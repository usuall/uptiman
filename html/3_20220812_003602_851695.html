<bound method Tag.prettify of <html lang="ko"><head>
<title>해외특허 &lt; SEARCH - KIPRIS 특허정보 검색서비스</title>
<!-- ▼아래는 2019년 메인개편 UI 관련 소스 -->
<link href="/abpat/common/css/layout_new.css" rel="stylesheet" type="text/css"/>
<meta charset="utf-8"/>
<meta content="특허청" name="keywords"/>
<meta content="KIPRIS" name="description"/>
<meta content="Copyright 2012 kipris. all rights reserved." name="copyright"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/> <!-- IE7 에서 스마트 검색에 검색 안되는 부분이 있어서 추가 cjb -->
<meta content="width=device-width, initial-scale=0.3, minimum-scale=0.3, maximum-scale=1, user-scalable=yes, target-densitydpi=medium-dpi" name="viewport"/>
<link href="/abpat/common/css/basic_new.css" rel="stylesheet"/>
<link href="/abpat/common/css/mediaqueries_new.css" rel="stylesheet"/>
<link href="/abpat/common/jquery/jquery-ui-1.8.23.custom.css" rel="stylesheet"/>
<!-- ▼아래는 IE9 보다 버전이 낮은 브라우저에서만 이 스크립트를 해석하도록 한 것 -->
<!--[if lt IE 9]><script src="/abpat/common/js/html5.js"></script><![endif]-->
<!--[if lt IE 9]><script src="/abpat/common/js/css3-mediaqueries.js"></script><![endif]-->
<script async="" src="//www.google-analytics.com/analytics.js"></script><script language="javascript" src="/abpat/common/js/jquery.js" type="text/javascript"></script>
<script src="/abpat/common/jquery/jquery-ui-1.8.23.custom.min.js"></script>
<script src="/abpat/common/jquery/jquery.alphanumeric.js"></script>
<script src="/abpat/common/jquery/jquery.cookie.js"></script>
<script src="/abpat/common/js/common.js"></script><script src="/abpat/common/js/ie_print.js"></script>
<script src="/abpat/common/js/kipris_xe.js"></script>
<script src="/abpat/common/js/plani.js"></script>
<script src="/abpat/common/js/counter_checker.jsp"></script><script src="/abpat/service/check_counter.jsp"></script>
<script src="/abpat/common/js/preview.js"></script>
<link href="http://www.kipris.or.kr/khome/common/css/kipris_event.css" rel="stylesheet"/>
<script src="http://www.kipris.or.kr/khome/common/js/kipris_event.js" type="text/javascript"></script>
<!--Start 원클릭 별점 관련 js, css 추가 jsb-->
<link href="/abpat/common/css/jquery.rating.css" rel="stylesheet" type="text/css"/>
<!--End 원클릭 별점 관련 js, css 추가 jsb-->
<style type="text/css">
#showAllCheckArticleBtnContainer {
	display: none;
}
</style>
<script language="javascript" type="text/javascript">
$(document).ready(function(){
        //원클릭 글자수 카운트 jsb
        $("#oneClickMemo").keyup(function(){
            $("#countCharacter").text("("+$(this).val().length+"/200자)");
        });
});

/**
 * 뒤로가기, 앞으로가기 시 history에 저장된 state를 로딩
 * 2017.07.15 jsb
 */
function loadStateContent(state){
    
    /*START 스마트검색 세팅*/
    var smartForm = document.SearchItemForm;
     
        smartForm.KW.value = state.smartSearchItem.KW;
        smartForm.IPC.value = state.smartSearchItem.IPC;
        smartForm.CPC.value = state.smartSearchItem.CPC;
        smartForm.AN.value = state.smartSearchItem.AN;
        smartForm.GN.value = state.smartSearchItem.GN;
        smartForm.OPN.value = state.smartSearchItem.OPN;
        smartForm.PN.value = state.smartSearchItem.PN;
        smartForm.CLAS.value = state.smartSearchItem.CLAS;
        smartForm.EC.value = state.smartSearchItem.EC;
        smartForm.RN.value = state.smartSearchItem.RN;
        smartForm.PD_FROM.value = state.smartSearchItem.PD_FROM;
        smartForm.PD_TO.value = state.smartSearchItem.PD_TO;
        smartForm.PD.value = state.smartSearchItem.PD;
        smartForm.AD_FROM.value = state.smartSearchItem.AD_FROM;
        smartForm.AD_TO.value = state.smartSearchItem.AD_TO;
        smartForm.AD.value = state.smartSearchItem.AD;
        smartForm.GD_FROM.value = state.smartSearchItem.GD_FROM;
        smartForm.GD_TO.value = state.smartSearchItem.GD_TO;
        smartForm.GD.value = state.smartSearchItem.GD;
        smartForm.OPD_FROM.value = state.smartSearchItem.OPD_FROM;
        smartForm.OPD_TO.value = state.smartSearchItem.OPD_TO;
        smartForm.OPD.value = state.smartSearchItem.OPD;
        smartForm.FI.value = state.smartSearchItem.FI;
        smartForm.FT.value = state.smartSearchItem.FT;
        smartForm.IAN.value = state.smartSearchItem.IAN;
        smartForm.IDT.value = state.smartSearchItem.IDT;
        smartForm.IDT_FROM.value = state.smartSearchItem.IDT_FROM;
        smartForm.IDT_TO.value = state.smartSearchItem.IDT_TO;
        smartForm.RD_FROM.value = state.smartSearchItem.RD_FROM;
        smartForm.RD_TO.value = state.smartSearchItem.RD_TO;
        smartForm.RD.value = state.smartSearchItem.RD;
        smartForm.TL.value = state.smartSearchItem.TL;
        smartForm.AB.value = state.smartSearchItem.AB;
        smartForm.CL.value = state.smartSearchItem.CL;
        smartForm.RC.value = state.smartSearchItem.RC;
        smartForm.AP.value = state.smartSearchItem.AP;
        smartForm.IN.value = state.smartSearchItem.IN;
        smartForm.AG.value = state.smartSearchItem.AG;
        smartForm.IOD.value = state.smartSearchItem.IOD;
        smartForm.IOD_FROM.value = state.smartSearchItem.IOD_FROM;
        smartForm.IOD_TO.value = state.smartSearchItem.IOD_TO;
    /*END 스마트검색 세팅*/

   var theForm = document.SearchPara;
      
   /*START 정렬버튼 아이콘 및 정렬방법 세팅*/
   var sortState1 = state.searchItem.sortState1;
   var sortState2 = state.searchItem.sortState2;
   
   if(sortState1 == "ASC"){
	jQuery("#spanSortOrderAsc_1").removeClass("btn_up_on").removeClass("btn_up").addClass("btn_up_on");
	jQuery("#spanSortOrderDesc_1").removeClass("btn_down_on").removeClass("btn_down").addClass("btn_down");
        jQuery("#sortState1", jQuery("#divSearchItems")).val("ASC");
   }else if(sortState1 == "DESC"){
	jQuery("#spanSortOrderAsc_1").removeClass("btn_up_on").removeClass("btn_up").addClass("btn_up");
	jQuery("#spanSortOrderDesc_1").removeClass("btn_down_on").removeClass("btn_down").addClass("btn_down_on");   
        jQuery("#sortState1", jQuery("#divSearchItems")).val("DESC");
   }else{
        jQuery("#spanSortOrderAsc_1").removeClass("btn_up_on").removeClass("btn_up").addClass("btn_up");
	jQuery("#spanSortOrderDesc_1").removeClass("btn_down_on").removeClass("btn_down").addClass("btn_down"); 
        jQuery("#sortState1", jQuery("#divSearchItems")).val("");
        jQuery("#sortField1", jQuery("#divSearchItems")).val("");
   }
   
    if(sortState2 == "ASC"){
	jQuery("#spanSortOrderAsc_2").removeClass("btn_up_on").removeClass("btn_up").addClass("btn_up_on");
	jQuery("#spanSortOrderDesc_2").removeClass("btn_down_on").removeClass("btn_down").addClass("btn_down");
        jQuery("#sortState2", jQuery("#divSearchItems")).val("ASC");
   }else if(sortState2 == "DESC"){
	jQuery("#spanSortOrderAsc_2").removeClass("btn_up_on").removeClass("btn_up").addClass("btn_up");
	jQuery("#spanSortOrderDesc_2").removeClass("btn_down_on").removeClass("btn_down").addClass("btn_down_on");   
        jQuery("#sortState2", jQuery("#divSearchItems")).val("DESC");
   }else{
        jQuery("#spanSortOrderAsc_2").removeClass("btn_up_on").removeClass("btn_up").addClass("btn_up");
	jQuery("#spanSortOrderDesc_2").removeClass("btn_down_on").removeClass("btn_down").addClass("btn_down"); 
        jQuery("#sortState2", jQuery("#divSearchItems")).val("");
        jQuery("#sortField2", jQuery("#divSearchItems")).val("");
   }
   
   var sortField1 = SortFieldName(state.searchItem.sortField1);
   var sortField2 = SortFieldName(state.searchItem.sortField2);
   
   jQuery("#divSelSort_1").text(sortField1);
   jQuery("#divSelSort_2").text(sortField2);
    /*END 정렬버튼 아이콘 및 정렬방법 세팅*/

   /*START 기본 검색 데이터 세팅 및 AJAX 검색 처리*/
   document.biblioF.currentPage.value = state.searchItem.currentPage;
   theForm.currentPage.value = state.searchItem.currentPage;
   theForm.queryText.value = state.searchItem.queryText;
   theForm.expression.value = state.searchItem.expression;
   theForm.searchExpression.value = state.searchItem.searchExpression;
   theForm.next.value = document.listForm.next.value;  //재검색부분 include 관련 수정  2007/10/29
    
    var artPost = state.searchItem;
	artPost.next = state.searchItem.next;
        artPost.nowTab = state.searchItem.nowTab;
        artPost.history = 'true';
        
    AjaxResultLoad("/abpat/resulta.do", artPost);
    getCtryCntList(artPost);
    jQuery("#transFlag", jQuery("#divSearchItems")).val("NO");
   /*END 기본 검색 데이터 세팅 및 AJAX 검색 처리*/

    
   /*START 결과내 재검색 체크박스 세팅*/
   if(state.reSearchChkbox!= null){
        if(state.reSearchChkbox.searchInResultCk==1){
            theForm.searchInResultCk.checked = true;
        }else{
            theForm.searchInResultCk.checked = false;
        }
   }
   /*END 결과내 재검색 체크박스 세팅*/
    
    /*START 국가별 결과 보기 탭 세팅*/
    jQuery("li[id^='liselect_']", jQuery("#divCtrycnt")).removeClass("on");
    if(state.Cntry !=null){
        jQuery("li[id='"+state.Cntry+"']", jQuery("#divCtrycnt")).addClass("on");
    }else{
        jQuery("li[id='liselect_all']", jQuery("#divCtrycnt")).addClass("on");
    }
    /*END 국가별 결과 보기 탭 세팅*/
    
   /*START 국가 선택 체크박스 세팅*/
   var topform = document.frmNationSel;
   if(state.collectionChkbox!= null){
        var i = 0;
        $("input[name='COLLECTION_TOP']").each(
            function(){
               var id = this.id;
               if(state.collectionChkbox[id]==1){
                    topform.COLLECTION_TOP[i].checked = true;
               }else{
                    topform.COLLECTION_TOP[i].checked = false;
               }
               i++;
            }
        );
   }
   if(state.allChkbox!= null){
        var i = 0;
        $("input[name='chkAll']").each(
            function(){
               var id = this.id;
               if(state.allChkbox[id]==1){
                    topform.chkAll.checked = true;
               }else{
                    topform.chkAll.checked = false;
               }
               i++;
            }
        );
   }
   /*END 국가 선택 체크박스 세팅*/

    /*START 선택보기 아이콘 세팅*/
    if(state.searchItem.FROM =="BOOKMARK"){
        jQuery("#showAllCheckArticleBtnContainer").show() ;
        jQuery("#showOnlyCheckArticleBtnContainer").hide() ;
        jQuery("#FROM", jQuery("#divSearchItems")).val("BOOKMARK");
    }else if(state.searchItem.FROM ==""){
        jQuery("#showOnlyCheckArticleBtnContainer").show() ;
	jQuery("#showAllCheckArticleBtnContainer").hide() ;
        jQuery("#FROM", jQuery("#divSearchItems")).val("");
    }
    /*END 선택보기 아이콘 세팅*/
    
    /*START 페이지당 갯수 세팅*/
    if(state.searchItem.numPerPage==30 || state.searchItem.numPerPage==60 || state.searchItem.numPerPage==90){
        $("#pageSel").show();
        $("#AllImgViewPageSel").hide();
        $("#opt28").val(state.searchItem.numPerPage);
        theForm.numPerPage.value = state.searchItem.numPerPage;
    }else if(state.searchItem.numPerPage==10 || state.searchItem.numPerPage==20 || state.searchItem.numPerPage==40) {
        $("#pageSel").hide();
        $("#AllImgViewPageSel").show();
        $("#opt29").val(state.searchItem.numPerPage);
        theForm.numPerPage.value = state.searchItem.numPerPage;
    }
    /*END 페이지당 갯수 세팅*/

    /*START 한글-영어 체크박스 세팅*/
    var obj = jQuery("#searchInTransCk", jQuery("#divSearchItems"));
    var dummyBtn = jQuery("#spanCheckExtend", jQuery("#total_search"));
    var dummy = jQuery("#searchInTransCkDummy") ;
    
    if(state.searchItem.searchInTransCk == "Y"){
        dummyBtn.addClass("extend_on") ;
        obj.prop("checked", true) ;
        dummy.prop("checked", true) ;
    }else{
        dummyBtn.removeClass("extend_on") ;
        obj.prop("checked", false) ;
        dummy.prop("checked", false) ;
    }
    /*END 한글-영어 체크박스 세팅*/
}

/**
 * 정렬필드값을 영문 -> 한글로 변경
 * 2017.07.15 jsb 
 */
function SortFieldName(sortitem)
{
	var sortfield = "";

	switch(sortitem)
	{
		// 특허 / 실용신안
                case "CC" : 		sortfield = "국가"; break;
		case "OPN" : 		sortfield = "공개번호"; break;
		case "TL" : 	sortfield = "발명의 명칭"; break;
                case "IPC" : 			sortfield = "IPC"; break;
                case "AN" : 		sortfield = "출원번호"; break;
		case "GN" : 		sortfield = "등록번호"; break;
                case "PN" : 		sortfield = "공보번호"; break;
                case "IAN" : 		sortfield = "국제출원번호"; break;
                case "ION" :	 	sortfield = "국제공개번호"; break;
                case "RN" : 		sortfield = "우선권주장번호"; break;
                case "PD" : 		sortfield = "공보일자"; break;
                case "AD" : 		sortfield = "출원일자"; break;
                case "GD" : 		sortfield = "등록일자"; break;
		case "OPD" : 		sortfield = "공개일자"; break;
		case "IDT" :	 	sortfield = "국제출원일자"; break;
		case "IOD" : 		sortfield = "국제공개일자"; break;
		case "RD" : 		sortfield = "우선권주장일자"; break;                
                case "AP" : 		sortfield = "출원인"; break;
		case "AG" : 		sortfield = "대리인"; break;
		case "IN" : 		sortfield = "발명인"; break;
		default : 				sortfield = "선택";
	}

	return sortfield;
}

/**
 * History 불러오는 이벤트 정의(Ajax 뒤로가기 구현)
 * 2017.07.17 jsb
 */
window.onpopstate = function(event) {
    var theForm = document.SearchPara;
    if(event.state==null){
            theForm.queryText.value = "";
            theForm.expression.value = "";
            theForm.nowTab.value="";
            
        var i = 0;
        var topform = document.frmNationSel;
        $("input[name='COLLECTION_TOP']").each(
            function(){
               topform.COLLECTION_TOP[i].checked = false;
               i++;
            }
        );
        topform.chkAll.checked = false;
       var artPost = getPostAllData("divSearchItems");
       artPost.history = 'true';
        AjaxResultLoad("/abpat/resulta.do", artPost);
        getCtryCntList(artPost);
    }else{
        loadStateContent(event.state);
    }
};
</script>
</head>
<body>
<script type="text/javascript">
	$(document).ready(function(){
		$("#gnb").children("li").not(":eq(1)").children("a").on("keypress",
		function(e){
			if(e.keyCode == 13) $(this).trigger("click");
		});
		
		$("#accessibility a").on("keyup", function(e)
		{
			if(e.keyCode == 13) $(this).trigger("click");
		});
	});
</script>
<dl id="accessibility">
<dt>컨텐츠 바로가기 영역</dt>
<dd><a onclick="$('div.search_section_head button:first').focus();" tabindex="0">본문으로 바로가기</a></dd>
<dd><a onclick="$('#gnb &gt; li:first &gt; a').focus();" tabindex="0">주메뉴로 바로가기</a></dd>
<dd><a onclick="$('li.menu01 &gt; a').focus();" tabindex="0">사이드메뉴로 바로가기</a></dd>
</dl>
<!-- 로딩바 시작 -->
<div id="loadingBarBack" style="display: none;">
<div><img alt="해외특허 검색결과를 불러오고 있습니다." src="/abpat/images/common/loading.gif"/></div>
</div>
<!-- 로딩바 끝!!!!! -->
<div id="wrapper">
<header id="header">
<!-- Header Start -->
<div id="header_bar">
<div class="grab">
<div class="topLink">
<a class="link blue" href="http://eng.kipris.or.kr/enghome/main.jsp" target="_blank" title="KIPRIS 영문사이트 새창으로 열림">ENGLISH</a>
</div>
<ul class="topMenu">
<li><a onclick="newPopupWindow('/abpat/loginRedirect.jsp', 'login', 700, 400, 'C', 'T');" style="cursor: pointer;" tabindex="0" title="새창으로 열림">로그인</a></li>
<li><a href="http://login.kipris.or.kr/member/kr/join/memberAction.do?act=joinSelectType">회원가입</a></li>
<li><a href="http://www.kipris.or.kr/khome/sitemap/sitemap.jsp">사이트맵</a></li>
</ul>
</div>
</div>
<!--### 로고와 네비게이션 ###-->
<div class="gnbWrap">
<div class="grab">
<h1 class="logo"><a href="http://www.kipris.or.kr/khome/main.jsp"><img alt="특허정보넷키프리스 메인화면으로 이동" src="/abpat/images/common/logo01_new.png"/></a></h1>
<h2 class="sr-only">주메뉴 영역</h2>
<nav class="cbp-hrmenu" id="cbp-hrmenu">
<ul class="depth1" id="gnb">
<li class="cbp-hropen depth1-1">
<a style="cursor: pointer;" tabindex="0">지식재산권 검색<i class="arrow"><img alt="" src="/abpat/images/main_new/gnb_activeArr.png"/></i></a>
<div class="cbp-hrsub">
<ul class="cbp-hrsub-inner depth2">
<li><a href="http://kpat.kipris.or.kr/kpat/searchLogina.do?next=MainSearch">특허·실용신안</a></li>
<li><a href="http://kdtj.kipris.or.kr/kdtj/searchLogina.do?method=loginDG">디자인</a></li>
<li><a href="http://kdtj.kipris.or.kr/kdtj/searchLogina.do?method=loginTM">상표</a></li>
<li><a href="http://kdtj.kipris.or.kr/kdtj/searchLogina.do?method=loginJM">심판</a></li>
<li><a href="http://kpa.kipris.or.kr/kpa/search/search_kpa.do" target="_blank" title="한국특허영문초록 새창으로 열림">KPA</a></li>
<li><a href="http://abpat.kipris.or.kr/abpat/searchLogina.do?next=MainSearch">해외특허</a></li>
<li><a href="http://abtm.kipris.or.kr/abtm/search/resultList.jsp">해외상표</a></li>
<li><a href="http://abdg.kipris.or.kr/abdg/searchLogina.do?next=MainSearch">해외디자인</a></li>
<li><a href="http://kpat.kipris.or.kr/kpat/searchLogina.do?next=CyberSearch">인터넷기술공지</a></li>
<li><a href="http://kpat.kipris.or.kr/kpat/searchLogina.do?next=ContestSearch">아이디어공모전</a></li>
<li><a href="http://kdc.kipris.or.kr/kdc/searchLogina.do?next=MainSearch">문장검색</a></li>
</ul>
<!-- /cbp-hrsub-inner -->
</div>
<!-- /cbp-hrsub -->
</li>
<li class="depth1-2">
<span><a class="tm" href="http://www.kipris.or.kr/khome/today/today.jsp">투데이 키프리스</a></span>
</li>
<li class="depth1-3">
<a style="cursor: pointer;" tabindex="0">키프리스 소개<i class="arrow"><img alt="" src="/abpat/images/main_new/gnb_activeArr.png"/></i></a>
<div class="cbp-hrsub">
<ul class="cbp-hrsub-inner depth2">
<li><a class="tm" href="http://www.kipris.or.kr/khome/pr/pr.jsp">홍보</a></li>
<li><a class="tm" href="http://www.kipris.or.kr/khome/guideMaina.do">가이드</a></li>
<li><a class="tm" href="http://www.kipris.or.kr/khome/kipris/kipris.jsp">개요</a></li>
</ul>
<!-- /cbp-hrsub-inner -->
</div>
<!-- /cbp-hrsub -->
</li>
</ul>
</nav>
<script>
			var cbpHorizontalMenu=(function(){
				var $listItems = $("#cbp-hrmenu > ul > li"),
				$menuItems = $listItems.children("a"),
				current = 0;
				
				function init(){
					$menuItems.on("click", open);
					$listItems.on("click", function(event){
						event.stopPropagation()
					})
				}
				
				function open(event){
					if(current !== -1){
						$listItems.eq(current).removeClass("cbp-hropen")
					}
					
					var $item = $(event.currentTarget).parent("li"),
					idx = $item.index();
					$item.addClass("cbp-hropen");
					current = idx;
					
					return false;
				}
				
				return{ init : init };
			})();
			
			$(function() {
				cbpHorizontalMenu.init();
			});
		</script>
</div>
</div>
<script>
	$(document).ready(function(){
		$('.tm').bind("click", saveStat);
	});
	
	function goMemberLogin() {
		newPopupWindow("/abpat/loginRedirect.jsp", "wLoginPop", 700, 400, "C", "T", "location=yes, toolbar=no, status=yes, resizable=no") ;
	}
	
	//상단 네비게이션 이용통계 추가 by 2014.09.15
	function saveStat(){
	    var href = $(this).attr('href');
	
	    if(href.indexOf('today.jsp') > -1){ //today
	        SaveOpsvcData('KR', 'ABPAT', 'HEAD', 'TODAY');
	    } else if(href.indexOf('pr.jsp') > -1){ //PR
	        SaveOpsvcData('KR', 'ABPAT', 'HEAD', 'PR');
	    } else if(href.indexOf('guideMaina.do') > -1){ //GUIDE
	        SaveOpsvcData('KR', 'ABPAT', 'HEAD', 'GUIDE');
	    } else if(href.indexOf('kipris.jsp') > -1){ //KIPRIS
	        SaveOpsvcData('KR', 'ABPAT' , 'HEAD', 'KIP'); 
	    }
	}
	
	function checkSpecialChar(V) {
		var str = V ;
		str = str.replace(/[\*\+\?\)\(\!]/g, ' ') ;
		var tempvalue = str ;
		var specialchar = '#$%^&|\\{}[]\';,.~=<>()+*?@!`' ;
	
		tempvalue = tempvalue.replace(/ /g, '') ;
	
		for (var i = 0 ; i < specialchar.length ; i++) {
			for (var k = 0 ; k < str.length ; k++) {
				if (str.charAt(k) == specialchar.charAt(i)) {
					throw("특수문자는 사용할수 없습니다 [ " + specialchar.charAt(i) + " ]") ;
				}
			}
		}
	
		return true ;
	}
	
	
	$("#gnb").children("li").not(":eq(1)").children("a").on("keypress",
			function(e){
				if(e.keyCode == 13) $(this).trigger("click");
			});

</script>
<!-- Header End -->
<!-- 상단 통합검색 Start -->
<!-- 헤더영역 -->
<script type="text/JavaScript">
<!--
    $(document).ready(function(){
        $(".plusView").click(function(evt) {
            evt.stopPropagation();
            $('.etcCntry').toggle();
        });
        $(".etcCntry").click(function(evt) {
            evt.stopPropagation();
        });
        $(document).click(function(){
           $('.etcCntry').hide();
        });
        $(".fTxtCntry_btn").click(function(evt) {
            $('.fTxtCntryArea').toggle();
        });
        $("#chkAll").click(function(){
            if($("#chkAll").prop("checked")){
                $("input[name=COLLECTION_TOP]").prop("checked",true);    
            }else{
                $("input[name=COLLECTION_TOP]").prop("checked",false);
            }
        });
        
        // 주요국(5개) 기본적으로 선택되어있도록 설정 by2017.12.13
         $("input[name=COLLECTION_TOP]#US").prop("checked",true);
         $("input[name=COLLECTION_TOP]#EP").prop("checked",true);
         $("input[name=COLLECTION_TOP]#WO").prop("checked",true);
         $("input[name=COLLECTION_TOP]#JP").prop("checked",true);
         $("input[name=COLLECTION_TOP]#CN").prop("checked",true);
        
        
    });
	// 검색 결과 항목 전체선택'on' 전체해제 'off'
	function AllCheckResultItem(mode)
	{
	    var form = document.fieldCheckF;

	    for (var i = 0; i < form.cbSearchItem.length; i++)
	         (mode == 'on') ? form.cbSearchItem[i].checked = true :  form.cbSearchItem[i].checked = false ;
	}

	// 기본선택
	function BasicCheckResultItem()
	{
	    var cbSearchItems = document.fieldCheckF.cbSearchItem;

	    for (var i = 0; i < cbSearchItems.length; i++)
	         cbSearchItems[i].checked = false ;

	    //cbSearchItems[0].checked = true;
	    //cbSearchItems[1].checked = true;
	    //cbSearchItems[6].checked = true;
	}

	function bookMarkNext()
	{
	    bookMark('');
	}

	// 출력된 입력검색식을 클릭하면 검색하는 텍스트박스에 검색어 입력되게 한다
	function inputQuery(str)
	{
	     str = Replace( str, "#", "\"");
	     //str.replaceAll.("#", "\""); //
	     document.SearchPara.queryText.value = str;
	     document.SearchPara.searchInResult.checked = false;
	}

        // 결과내 재검색 체크시 검색어 입력창 초기화
        function clearForSearchInresult(obj)
        {
            if(obj.checked == true)
                SearchPara.queryText.value = "";
        }
        
     function setSearchKeywordHistory(V) {
        	jQuery("#queryText", jQuery("#divSearchItems")).val(V);
        	jQuery("#queryText", jQuery("#divSearchItems")).focus();
        }

 
        
     function regChk(vTok){
    	 var result = vTok;
    	 //var regExp = /^(?:[0-9]{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12][0-9]|3[01]))-[1-4][0-9]{6}$/;
    	 var regExp = /^(?:[0-9]{6})-(?:[0-9]{7})$/;
    	 
    	 if(vTok.match(regExp) != null){
    		 result = "******-*******";
    	 }
    	 
    	 return result;
     }
     
     function cutStr(vTok){
    	 var result = vTok;
    	 
    	 if(vTok.length > 15){
    		 result = vTok.substring(0, 15);
    		 result += "...";
    	 }
    	 
    	 return result;
     }
//-->
</script>
<div id="total_search">
<form id="frmNationSel" name="frmNationSel">
<div class="flag_area" id="divNationSelTop">
<div class="mainCntry">
<h2>국가선택</h2>
<span><input id="chkAll" name="chkAll" type="checkbox"/><label for="chkAll">전체</label></span>
<span><input id="US" name="COLLECTION_TOP" type="checkbox" value="US_T.col"/><label for="US">미국(US)</label></span>
<span><input id="EP" name="COLLECTION_TOP" type="checkbox" value="EP_T.col"/><label for="EP">유럽(EP)</label></span>
<span><input id="WO" name="COLLECTION_TOP" type="checkbox" value="WO_T.col"/><label for="WO">PCT(WO)</label></span>
<span><input id="JP" name="COLLECTION_TOP" type="checkbox" value="PAJ_T.col"/><label for="JP">일본(JP)</label></span>
<span><input id="CN" name="COLLECTION_TOP" type="checkbox" value="CN_T.col"/><label for="CN">중국(CN)</label></span>
<img alt="기타국 열기" class="plusView" src="/abpat/images/button/btn_Wopen.gif"/>
</div>
<div class="fTxtCntry">
                            전문제공국가
                            <img alt="기타국 열기" class="fTxtCntry_btn" src="/abpat/images/service/questionIcon.gif"/>
<div class="fTxtCntryArea" id="fTxtCntryArea">
<b>전문제공국가</b><br/>                        
                                미국, 유럽, WIPO, 일본, 중국,<br/>
                                 영국, 독일, 프랑스, 호주, <br/> 캐나다, 콜롬비아, 러시아, 대만
                            </div>
</div>
<div class="etcCntry">
<table>
<tbody><tr>
<td class="etcCntry_td">
<span><input id="GB" name="COLLECTION_TOP" type="checkbox" value="GB_T.col"/><label for="GB">영국(GB)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="DE" name="COLLECTION_TOP" type="checkbox" value="DE_T.col"/><label for="DE">독일(DE)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="FR" name="COLLECTION_TOP" type="checkbox" value="FR_T.col"/><label for="FR">프랑스(FR)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="AU" name="COLLECTION_TOP" type="checkbox" value="AU_T.col"/><label for="AU">호주(AU)</label></span>
</td>
</tr>
<tr>
<td class="etcCntry_td">
<span><input id="CA" name="COLLECTION_TOP" type="checkbox" value="CA_T.col"/><label for="CA">캐나다(CA)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="RU" name="COLLECTION_TOP" type="checkbox" value="RU_T.col"/><label for="RU">러시아(RU)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="TA" name="COLLECTION_TOP" type="checkbox" value="TA_T.col"/><label for="TA">대만(TW)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="AT" name="COLLECTION_TOP" type="checkbox" value="AT_T.col"/><label for="AT">오스트리아(AT)</label></span>
</td>
</tr>
<tr>
<td class="etcCntry_td">
<span><input id="DK" name="COLLECTION_TOP" type="checkbox" value="DK_T.col"/><label for="DK">덴마크(DK)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="IL" name="COLLECTION_TOP" type="checkbox" value="IL_T.col"/><label for="IL">이스라엘(IL)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="ES" name="COLLECTION_TOP" type="checkbox" value="ES_T.col"/><label for="ES">스페인(ES)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="PT" name="COLLECTION_TOP" type="checkbox" value="PT_T.col"/><label for="PT">포르투갈(PT)</label></span>
</td>
</tr>
<tr>
<td class="etcCntry_td">
<span><input id="PH" name="COLLECTION_TOP" type="checkbox" value="PH_T.col"/><label for="PH">필리핀(PH)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="CH" name="COLLECTION_TOP" type="checkbox" value="CH_T.col"/><label for="CH">스위스(CH)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="PL" name="COLLECTION_TOP" type="checkbox" value="PL_T.col"/><label for="PL">폴란드(PL)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="SE" name="COLLECTION_TOP" type="checkbox" value="SE_T.col"/><label for="SE">스웨덴(SE)</label></span>
</td>
</tr>
<tr>
<td class="etcCntry_td">
<span><input id="SI" name="COLLECTION_TOP" type="checkbox" value="SI_T.col"/><label for="SI">슬로베니아(SI)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="CO" name="COLLECTION_TOP" type="checkbox" value="CO_T.col"/><label for="CO">콜롬비아(CO)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="EA" name="COLLECTION_TOP" type="checkbox" value="EA_T.col"/><label for="EA">유라시아(EA)</label></span>
</td>
<td class="etcCntry_td">
<span><input id="RS" name="COLLECTION_TOP" type="checkbox" value="RS_T.col"/><label for="RS">세르비아(RS)</label></span>
</td>
</tr>
</tbody></table>
</div>
</div>
</form>
<div class="lside_menu">
<span title="이 기능을 이용하시려면 로그인하셔야 합니다."><a href="javascript:void(goMemberLogin())" title="로그인페이지 새창으로 열림"><img alt="동의어사전(새창)" src="/abpat/images/common/lside01.gif"/></a></span>
<!-- <span title="이 기능을 이용하시려면 로그인하셔야 합니다."><a href="javascript:void(goMemberLogin())" title="로그인페이지 새창으로 열림"><img src="/abpat/images/common/lside02.gif" alt="유사검색식(새창)" /></a></span> -->
<span title="이 기능을 이용하시려면 로그인하셔야 합니다."><a href="javascript:void(goMemberLogin())" title="로그인페이지 새창으로 열림"><img alt="내검색식(새창)" src="/abpat/images/common/lside03.gif"/></a></span>
<a href="#" id="btnCheckExtend" onclick="return false;"><span class="search_extend extend" id="spanCheckExtend"><input id="searchInTransCkDummy" name="searchInTransCkDummy" type="checkbox" value=""/><label for="searchInTransCkDummy">한글-영어</label></span></a>
</div>
<div id="searchAreaTop">
<div class="hsearch" id="divSearchItems">
<form action="/abpat/qyvw0020a.do?method=list" id="remoconFrm" method="post" name="remoconFrm">
<input id="remoconExpression" name="expression" type="hidden" value=""/>
<input id="remoconDocsFound" name="docsFound" type="hidden" value=""/>
<input id="remoconSelectedArticles" name="selectedArticles" type="hidden" value=""/>
</form>
<form id="SearchPara" name="SearchPara" onsubmit="return false;">
<fieldset>
<legend>검색</legend>
<div class="search_selectBox">
<span id="spanSelectedPatImg"><a href="#" id="btnViewSelectPat" onclick="return false;"><img alt="해외특허" id="imgSelPat" src="/abpat/images/common/txt_keyword07.gif"/></a></span>
<ul id="ulSelPatArea">
<li><a href="#" id="btnSelPat01" onclick="return false;"><img alt="통합검색" src="/abpat/images/common/txt_keyword01.gif"/></a></li>
<li><a href="#" id="btnSelPat02" onclick="return false;"><img alt="특허·실용신안" src="/abpat/images/common/txt_keyword02.gif"/></a></li>
<li><a href="#" id="btnSelPat03" onclick="return false;"><img alt="디자인" src="/abpat/images/common/txt_keyword03.gif"/></a></li>
<li><a href="#" id="btnSelPat04" onclick="return false;"><img alt="상표" src="/abpat/images/common/txt_keyword04.gif"/></a></li>
<li><a href="#" id="btnSelPat05" onclick="return false;"><img alt="심판" src="/abpat/images/common/txt_keyword05.gif"/></a></li>
<li><a href="#" id="btnSelPat06" onclick="return false;"><img alt="KPA" src="/abpat/images/common/txt_keyword06.gif"/></a></li>
<li><a href="#" id="btnSelPat07" onclick="return false;"><img alt="해외특허" src="/abpat/images/common/txt_keyword07.gif"/></a></li>
<li><a href="#" id="btnSelPat08" onclick="return false;"><img alt="해외상표" src="/abpat/images/common/txt_keyword08.gif"/></a></li>
<li><a href="#" id="btnSelPat10" onclick="return false;"><img alt="해외디자인" src="/abpat/images/common/txt_keyword10.gif"/></a></li>
</ul>
</div>
<input class="keyword" id="queryText" name="queryText" title="검색어입력" type="text" value=""/>
<div class="keyword_txtopen">
<button class="btn_keyword_open" id="btnKeywordareaOpen" type="button">펼치기</button>
<div class="keyword_area" id="divKeywordTextarea">
<label for="keywordTextarea">긴 검색식 입력</label><textarea cols="82" id="keywordTextarea" name="keywordTextarea" rows="5" style="width: 430px;"></textarea>
<button class="btn_keyword_close" id="btnKeywordareaClose" type="button">닫기</button>
</div>
</div>
<span class="input_btn"><a href="javascript:DoSearch()"><img alt="검색" src="/abpat/images/common/btn_search.gif"/></a></span>
<span class="reSearch"><input id="searchInResultCk" name="searchInResultCk" onclick="clearForSearchInresult(this);" title="결과 내 재검색" type="checkbox" value=""/> <label for="searchInResultCk"><img alt="결과 내 재검색" src="/abpat/images/common/txt_reSearch.gif"/></label></span>
</fieldset>
<input id="next" name="next" type="hidden" value="AbstList"/>
<input id="passwd" name="passwd" type="hidden" value=""/>
<input id="userId" name="userId" type="hidden" value=""/>
<input id="config" name="config" type="hidden" value="G11001111111111111111111111110S10000111000111100001000"/>
<input id="sortField" name="sortField" type="hidden" value="Score"/>
<input id="sortState" name="sortState" type="hidden" value="Desc"/>
<input id="sortField1" name="sortField1" type="hidden" value=""/>
<input id="sortState1" name="sortState1" type="hidden" value=""/>
<input id="sortField2" name="sortField2" type="hidden" value=""/>
<input id="sortState2" name="sortState2" type="hidden" value=""/>
<input id="configChange" name="configChange" type="hidden" value="Y"/>
<input id="expression" name="expression" type="hidden" value=""/>
<input id="numPerPage" name="numPerPage" type="hidden" value="30"/>
<input id="numPageLinks" name="numPageLinks" type="hidden" value="10"/>
<input id="currentPage" name="currentPage" type="hidden" value="1"/>
<input id="FROM" name="FROM" type="hidden" value=""/>
<input id="BOOKMARK" name="BOOKMARK" type="hidden" value=""/>
<input id="NWBOOKMARK" name="NWBOOKMARK" type="hidden" value=""/>
<input id="REBOOKMARK" name="REBOOKMARK" type="hidden" value=""/>
<input id="natlCD" name="natlCD" type="hidden" value=""/>
<input id="beforeExpression" name="beforeExpression" type="hidden" value=""/>
<input id="userInput" name="userInput" type="hidden" value=""/> <!-- 2008/05/26 수정 -->
<input id="searchInTrans" name="searchInTrans" type="hidden" value=""/> <!-- 2008/04/16 수정 -->
<input id="searchInResult" name="searchInResult" type="hidden" value=""/> <!-- 2008/04/16 수정 -->
<input id="logFlag" name="logFlag" type="hidden" value=""/> <!--ws080710 로그플래그-->
<input id="searchSaveCnt" name="searchSaveCnt" type="hidden" value=""/> <!--ws080728 검색결과-->
<input id="piField" name="piField" type="hidden"/>
<input id="piValue" name="piValue" type="hidden"/>
<input id="piSearchYN" name="piSearchYN" type="hidden"/> <!-- 분류통계 202205 -->
<input id="nowTab" name="nowTab" type="hidden" value="all"/>
<input id="transChoice" name="transChoice" type="hidden" value="N"/>
<input id="searchFg" name="searchFg" type="hidden" value="Y"/>
<input id="transFlag" name="transFlag" type="hidden" value="NO"/>
<input id="transAtcl" name="transAtcl" type="hidden" value=""/>
<input id="strstat" name="strstat" type="hidden" value=""/>
<input id="searchExpression" name="searchExpression" type="hidden" value=""/>
<!-- 모든 권리 공통으로 들어감  -->
<input id="SEL_PAT" name="SEL_PAT" type="hidden" value="ABPAT"/>
<input id="searchKeyword" name="searchKeyword" type="hidden" value=""/>
<input id="merchandiseString" name="merchandiseString" type="hidden" value=""/>
<input id="measureString" name="measureString" type="hidden" value=""/>
<input id="patternString" name="patternString" type="hidden" value=""/>
<input id="collectionValues" name="collectionValues" type="hidden" value=""/>
<input id="selectedLang" name="selectedLang" type="hidden" value=""/>
<input id="lang" name="lang" type="hidden" value=""/>
<!-- 모든 권리 공통으로 들어감  -->
<span class="display_none"><label for="searchInTransCk">한글-영어</label><input id="searchInTransCk" name="searchInTransCk" type="checkbox" value=""/></span>
</form>
</div>
</div>
<div class="search_keyword">
<h2><img alt="검색히스토리" src="/abpat/images/common/title_newSearch.gif"/></h2>
<div class="keyword_txt" id="divHistoryAreaContainer"><div id="divHistoryArea"></div></div>
<div class="page"><span class="page_prew"><button id="btnHistoryPrev" type="button">이전 검색어</button></span><span class="page_next"><button id="btnHistoryNext" type="button">다음 검색어</button></span></div>
</div>
</div><!--<p class="smartsearch_info"><img src="/abpat/images/common/smartsearch_info.png"  alt="항목별 검색을 위해 스마트검색(구 항목별검색)을 열어보세요" /></p>-->
<script>
    function setSearchKeywordHistoryBoard() {
    	jQuery("#divHistoryArea").empty() ;
    	jQuery("#divHistoryAreaContainer").prop("scrollLeft", "0") ;
    	//jQuery("#historyControllerBoard").hide() ;
    	var historyWords = jQuery.cookie(ABPAT_SRCH_HISTRY_KEY) ;
    	if (historyWords == void 0 || historyWords == "") {
    	} else {
    		var historyWord = historyWords.split("|") ;
    		for (var i = 0 ; i < historyWord.length ; i++) {
    			jQuery("#divHistoryArea").append("<span id='spanHistory" + i + "'>");
    			var regChkWord = regChk(decodeURIComponent(historyWord[i]));
    			var cutWord = cutStr(regChkWord);
    			var newTagStr = "<a id='btnHistory" + i + "' title='" + regChkWord + "' href='#' onclick='return false;' style='padding-right: 5px;'>" + cutWord + "</a>";
    			var newTag = jQuery(newTagStr) ;
    			jQuery("#spanHistory" + i).append(newTag) ;
    			var delTagStr = "<a id='btnHistoryDel" + i + "' title='" + regChkWord + "' href='#' onclick='return false;'><img src=\"/abpat/images/service/btn_del.png\" alt=\"검색히스토리 선택삭제\" /></a>";
    			var delTag = jQuery(delTagStr) ;
    			jQuery("#spanHistory" + i).append(delTag) ;
    			jQuery(newTag).click(
    					function(evt) {
    						setSearchKeywordHistory(this.title) ;
    					}
    				) ;
    			jQuery(delTag).click(
    					function(evt) {
    						var delNum = this.id;
    						delNum = delNum.replace("btnHistoryDel", "");
    						
    						if(historyWord.length == 1){
    							jQuery.removeCookie(ABPAT_SRCH_HISTRY_KEY, getCookieOption());
    						} else {
    							var saveHistoryWord = "";
    							for (var i = 0 ; i < historyWord.length ; i++) {
    								if(delNum != i){
    									if(saveHistoryWord == ""){
    										saveHistoryWord = historyWord[i];
    									} else {
    										saveHistoryWord += "|" + historyWord[i];
    									}
    								}
    							}
    							
    							jQuery.cookie(ABPAT_SRCH_HISTRY_KEY, saveHistoryWord, getCookieOption());
    						}
   							setSearchKeywordHistoryBoard() ;
    					}
    				) ;
    		}

    		var hCW = 0 ;
    		jQuery("#divHistoryArea").children().each(
    				function() {
    					hCW += jQuery(this).outerWidth(true) ;
    				}
    			) ;
    	}
    }

    setSearchKeywordHistoryBoard() ;
    </script>
<!-- 상단 통합검색 End -->
</header>
<hr/>
<div id="body">
<!-- 스마트 파인더 Start -->
<script src="/abpat/search/js/keyword/ajax.js" type="text/javascript"></script>
<script src="/abpat/search/js/keyword/fnUtil.js" type="text/javascript"></script>
<script src="/abpat/search/js/smartFinder_new.js"></script>
<script src="/abpat/remocon/js/link.js"></script>
<script src="/abpat/remocon/js/link.js"></script>
<!--script type="text/javascript" src="/abpat/common/jquery/jquery.textPlaceholder.js"></script-->
<script>
<!--

/////////////////////////////////// 항목별 검색 관련 JS ///////////////////////////////////


//항목설정 관련
function CheckSearchItem(Object)
{
    var val = Object.value;     //항목설정 중 클릭된 항목 checkbox
    var SelectSpan = document.getElementById('searchItem'+ val ); //searchItem0~searchItem20 값 선택

    if (Object.checked)  // 항목을 설정할 경우 항목에 해당하는 국가선택이 선택되어 있는지 여부검사
    {
        if (!checkNationCollection(val))
        {
            Object.checked = false;
            return;
        }
    }

    //if(( Object.checked ) || (val == "3") ) //출원번호이거나 checkbox 선택하면 해당 검색항목span enable
    if( Object.checked ) //checkbox 선택하면 해당 검색항목span enable
    {   SelectSpan.style.display = "";   } //해당 검색항목span enable
    else    //checkbox 선택 해제되면
    {
        SelectSpan.style.display = "none" //해당 검색항목span disaable
        document.getElementById('item'+ val).value = ""; //해당 검색항목 입력 텍스트 지우기
    }
}

// 항목에 해당하는 국가선택이 선택되어 있는지 여부검사
// 국가별로 검색항목설정
var F_IPC  =  0;  // IPC분류/로카르노(IPC)
var F_CLAS =  1;  // UPC(CLAS)
var F_FI   =  2;  // FI(FI)
var F_FT   =  3;  // F-TERM(FT)
var F_EC   =  4;  // EPC(EC)
var F_AB   =  5;  // 초록(AB)
var F_CL   =  6;  // 청구범위(CL)
var F_PN   =  7;  // 공보번호(PN)
var F_AN   =  8;  // 출원번호(AN)
var F_OPN  =  9;  // 공개번호(OPN)
var F_GN   = 10;  // 등록번호(GN)
var F_RN   = 11;  // 우선권주장번호(RN)
var F_IAN  = 12;  // 국제출원번호(IAN)
var F_ION  = 13;  // 국제공개번호(ION)
var F_PD   = 14;  // 공보일자(PD)
var F_AD   = 15;  // 출원일자(AD)
var F_OPD  = 16;  // 공개일자(OPD)
var F_GD   = 17;  // 등록일자(GD)
var F_RD   = 18;  // 우선권주장일자(RD)
var F_IDT  = 19;  // 국제출원일자(IDT)
var F_IOD  = 20;  // 국제공개일자(IOD)
var F_AP   = 21;  // 출원인(AP)
var F_IN   = 22;  // 발명자(IN)
var F_AG   = 23;  // 대리인(AG)
var F_DS   = 24;  // 상세설명(DS)
var F_CNT  = 25;  // 인용횟수(CNT)
var F_RC   = 26;  // 우선권주장국가(RC)
var F_CPC  = 27;  // CPC(CPC) //By J.H.S 20140115 CPC 검색필드 추가.

var C_US   =  0;  //미국
var C_EP   =  1;  //유럽
var C_WO   =  2;  //WO
var C_PAJ  =  3;  //일본
var C_CN   =  4;  //중국
var C_GB   =  5;  //영국
//var C_CN   =  3;  //중국
//var C_GB   =  4;  //영국
//var C_PAJ  =  5;  //일본
var C_DE   =  6;  //독일
var C_FR   =  7;  //프랑스
var C_AU   =  8;  //호주
var C_CA   =  9;  //캐나다
var C_RU   = 10;  //러시아
var C_TW   = 11;  //대만
function checkNationCollection(val)
{
    var theForm = document.SearchItemForm;  //국가 들어간 순서 파악. COLLECTION
    var collectionCheckBoxs = theForm.COLLECTION;       // 국가선택 체크박스 배열

    // 미국에 관련된 체크박스인 경우
    if (val == F_CLAS)  // 1.UPC
    {
        if (collectionCheckBoxs[C_US].checked == false)
        {
            alert("선택하신 검색항목은 미국(US)을 먼저 선택해야 합니다.");
            return false;
        }
    }

    // 일본에 관련된 체크박스인 경우
    if (val == F_FI || val == F_FT)  // 2.FI, 3.F-TERM
    {
        if (collectionCheckBoxs[C_PAJ].checked == false)
        {
            alert("선택하신 검색항목은 일본(JP)을 먼저 선택해야 합니다.");
            return false;
        }
    }

    // 유럽공개에 관련된 체크박스인 경우
    if (val == F_EC)  // 4.EC
    {
        if (collectionCheckBoxs[C_EP].checked == false)
        {
            alert("선택하신 검색항목은 유럽(EP)을 먼저 선택해야 합니다.");
            return false;
        }
    }

    // 미국,유럽,PCT에 관련된 체크박스인 경우
    if (val == F_CL/* || val == F_DS*/)  // 6.청구범위, 24.상세설명(상세설명은 색인에 잡히지 않아서 제외시킴)
    {
        if (collectionCheckBoxs[C_US].checked == false && collectionCheckBoxs[C_EP].checked == false && collectionCheckBoxs[C_WO].checked == false)
        {
            alert("선택하신 검색항목은 미국(US)이나 유럽(EP) 또는 PCT(WO)를 먼저 선택해야 합니다.");
            return false;
        }
    }

    // 미국,유럽,PCT,일본,중국,호주,캐나다에 관련된 체크박스인 경우
    // 9.공개번호, 10.등록번호, 12.국제출원번호, 13.국제공개번호, 16.공개일자, 17.등록일자, 19.국제출원일자, 20.국제공개일자
    if (val == F_OPN || val == F_GN || val == F_IAN || val == F_ION || val == F_OPD || val == F_GD || val == F_IDT || val == F_IOD)
    {
        if (collectionCheckBoxs[C_US].checked == false && collectionCheckBoxs[C_EP].checked == false && collectionCheckBoxs[C_WO].checked == false &&
            collectionCheckBoxs[C_PAJ].checked == false && collectionCheckBoxs[C_CN].checked == false && collectionCheckBoxs[C_AU].checked == false &&
            collectionCheckBoxs[C_CA].checked == false)
        {
            alert("선택하신 검색항목은 미국(US),유럽(EP),PCT(WO),일본(JP),중국(CN),호주(AU), 캐나다(CA)중 하나 이상의 국가를 먼저 선택해야 합니다.");
            return false;
        }
    }

    //국가를 하나도 선택하지 않은 경우
    if (val == F_IPC || val == F_CLAS || val == F_FI || val == F_FT || val == F_EC || val == F_AB ||
        val == F_CL || val == F_PN || val == F_AN || val == F_OPN || val == F_GN || val == F_RN ||
        val == F_IAN || val == F_ION || val == F_PD || val == F_AD || val == F_OPD || val == F_GD ||
        val == F_RD || val == F_IDT || val == F_IOD || val == F_AP || val == F_IN || val == F_AG ||
        val == F_DS || val == F_CNT || val == F_RC)
    {
        if (collectionCheckBoxs[C_US].checked == false && collectionCheckBoxs[C_EP].checked == false && collectionCheckBoxs[C_WO].checked == false &&
            collectionCheckBoxs[C_PAJ].checked == false && collectionCheckBoxs[C_CN].checked == false && collectionCheckBoxs[C_GB].checked == false &&
            collectionCheckBoxs[C_DE].checked == false && collectionCheckBoxs[C_FR].checked == false && collectionCheckBoxs[C_AU].checked == false &&
            collectionCheckBoxs[C_CA].checked == false && collectionCheckBoxs[C_RU].checked == false && collectionCheckBoxs[C_TW].checked == false )
        {
            alert("하나의 국가라도 선택하셔야 합니다.");
            return false;
        }
    }
    return true;
}

//전체선택'on' 전체해제 'off'
function AllCheckSearchItem(mode)
{
    var form = document.SearchItemForm;

    for (i = 0; i < form.cbSearchItem.length; i++)
    {
         //if(i != 3) //출원번호 제외 체크 설정/해제
         //{  (mode == 'on') ? form.cbSearchItem[i].checked = true :  form.cbSearchItem[i].checked = false ;     }
         (mode == 'on') ? form.cbSearchItem[i].checked = true :  form.cbSearchItem[i].checked = false ;
         CheckSearchItem(form.cbSearchItem[i]);//검색항목 숨기기
    }
}

//검색항목 레이어 관련
function DisplaySearchItem()
{
    var ItemSpan = document.getElementById('searchItem');
    (ItemSpan.style.display == "") ? ItemSpan.style.display = "none" : ItemSpan.style.display = "";
}

//검색관련
function GoItemizedSearch()
{
    var searchItemForm = document.SearchItemForm;
    var SearchPara   = document.SearchPara;
    var UserInputText = ""; //유저 입력 2008/05/26
    //var elsevalue = ""; //특허실용 선택
    //var lastvalue = ""; //행정처분 선택
    var query = "";
    var qnx      = 0;
    //var nextOpr = ""; //연산자 선택 추가 2007/12/04
    var andQuery = "";
    var orQuery = "";
    var lastQuery = "";
    var chkMsg = "N";
    var kwlist = "";
    
    /* 전체검색여부 기능이 없어서 삭제함. By J.H.S 20130502
    var nowTab = searchItemForm.rdoNowTab;
    SearchPara.nowTab.value = nowTab[0].checked == true ? nowTab[0].value : nowTab[1].value;
    */
    
    //오타수정 ws080620
    if( !isCheckCollection(document.frmNationSel, SearchPara) )
        return false;

    // 특실 종류 선택 여부를 Check   2007/10/30 함수로 변경 Searchcom.js
    /*var  elseFlag = CheckKind(searchItemForm);
    if ( elseFlag != false ) elsevalue = elseFlag;
    else return;      */

    //행정처분 선택   2007/10/30 함수로 변경 Searchcom.js
    //lastvalue = CheckLast(searchItemForm);


    /*
    for( inx = 0 ; inx < searchItemForm.elements.length ; inx++)
    {
    	if( searchItemForm.elements[inx].name == "KW" )
    		var start_num = inx;
    }
    */

    // 날짜 선택 정보 세팅
    if(setValidDateSearchFormat() == false)
    	return;

    if(setValidRDSearchFormat() == false)
    	return;
    
    var start_num = 0;

    //web2.0 적용후 3에서 26으로 변경    searchItemForm.elements.length-1 영문확장 체크박스 추가 후 변경 2007/12/04
    for( inx = start_num ; inx < searchItemForm.elements.length ; inx++)
    {
      	if( (searchItemForm.elements[inx].value.length > 0 ) && ( searchItemForm.elements[inx].name != "operate" ) )
        {
            var tmpValue = searchItemForm.elements[inx].value;
            var tmpName = searchItemForm.elements[inx].name;
            var nextOpr = (searchItemForm.elements[inx+1] == null) ? "" : searchItemForm.elements[inx+1].value; //연산자 선택 추가 후 변경 2007/12/04
            //var nextOpr = searchItemForm.elements[inx+1].value; //연산자 선택 추가 후 변경 2007/12/04

            if(	tmpName == undefined ||
            	tmpValue.length == 0 ||
            	tmpName == "" ||
            	tmpName.length == 0 ||
            	tmpName == null ||
            	tmpName == void 0 ||
            	/* 전체검색여부 기능이 없어서 삭제함. By J.H.S 20130502 */
                //tmpName.startsWith("rdoNowTab") ||
            	tmpName.startsWith("COLLECTION") ||
            	tmpName.startsWith("SLIDE") ||
            	tmpName.endsWith("_FROM") ||
            	tmpName.endsWith("_TO"))
            	continue;

            SearchPara.userInput.value = tmpValue; // 2008/05/26 유저 입력 저장


            //검색식 처음과 끝 공백 , 엔터값 제거, 연산자 기호 변환 2007/11/08 수정 edgeExtrim(Searchcom.js)
            if( (tmpValue= edgeExtrim(tmpValue)) == false)  return false;

            //콤마, @, 괄호, [] 갯수 등 체크 checkVaild (Searchcom.js)
            if(tmpName == "RN"){
                if( checkVaildOnlyRN( tmpValue ) != true ) return false;
            }
            else{
                if( checkVaild( tmpValue ) != true ) return false;
            }

            //구문연산(" ")이 아닌경우 KW, TL, AB, CL, RC 중간공백을 * 연산자로 변환 2007/11/09 수정
            // AP, AG, IN (출원,발명,대리인) 공백 * 연산자로 변환 (2013/01/24 수정)
            //alert("tmpName=[" + tmpName + "]") ;
            if( tmpName == "KW" || tmpName == "TL" || tmpName == "AB" || tmpName == "CL" || tmpName == "RC"  || tmpName == "AP" || tmpName == "AG" || tmpName == "IN"  || tmpName == "RB" )
            {
            /*exTrim 함수 수행시 공백이 모두 제거되어 공백을 *로 치환하지 못하는 문제 발생으로 공백을 *로 치환 후 exTrim 함수 수행하도록 순서 변경 by 2016.03 Jak
            변속+클러치 "데이터 신호" --> 변속+클러치"데이터 신호" (X) , 변속+클러치*"데이터 신호" (O)
            */
           //   alert("2["+tmpValue+"]");
                tmpValue = removeOperatorBlank( tmpValue );
            //    alert("3["+tmpValue+"]");
                
                //구문연산의 경우 앞뒤 공백제거
                if(tmpValue.indexOf('\"') != -1){
                  //  alert("1["+tmpValue+"]");
                   if( (tmpValue = exTrim(tmpValue)) == false)
                           return false;
                }
              
            }
            else
            {    //\n, CR, LF SPACE 제거 (구문검색의 공백은 제외)
                if( (tmpValue = exTrim(tmpValue)) == false)
                       return false;

                   //ws080711 한글이 입력됐는지 검사
                    for(i = 0 ; i < tmpValue.length ; i++) {
                       var a = tmpValue.charCodeAt(i) ;
					   if (a > 128) {
                            alert('자유검색, 발명(고안)의 명칭(TL), 요약(AB), 청구범위(CL) 만 한글 검색이 가능합니다.');
                            searchItemForm.elements[inx].focus();
                            return false;
                       }
                    }//end for
            }

            //번호 검색시  /, 공백 제거 후 검색
            // IAN: PCT출원번호  ION: PCT공개번호  AN: 출원번호  OPN: 공개번호  GN: 등록번호  RN: 우선권출원번호  PN: 공보번호
            //if( tmpName == "IAN" || tmpName == "ION" || tmpName == "AN" || tmpName == "OPN" || tmpName == "GN" || tmpName == "RN")
            
            if( tmpName == "IAN" || tmpName == "ION" || tmpName == "AN" || tmpName == "OPN" || tmpName == "GN" || tmpName == "RN" || tmpName == "KW"){
            
            	/*
            	By K.S.M 2019.02.28 주민번호 입력 시 마스킹 처리를 위해 주석 처리
            	//By J.H.S 20150513 입력된 숫자가 "숫자-숫자 형식일경우" 대쉬 제거
                var regExpRegNum1 = /\d{1,}-\d{1,}/;    
                if(regExpRegNum1.test(tmpValue)){
                    tmpValue = tmpValue.replace("-","");
                    //form.queryText.value = queryText;
                }
                */
                //By J.H.S 20150513 입력된 숫자가 "숫자-숫자-숫자 형식일경우" 대쉬 제거
                var regExpRegNum1 = /\d{1,}-\d{1,}-\d{1,}/;    
                if(regExpRegNum1.test(tmpValue)){
                    tmpValue = tmpValue.replace("-","");
                }
            }
            
            if( tmpName == "PN" || tmpName == "OPN" || tmpName == "GN" || tmpName == "RN")
            {
                tmpValue = Replace( tmpValue, "/", "");
                tmpValue = Replace( tmpValue, " ", "");
            }
            if( tmpName == "IAN" || tmpName == "ION" || tmpName == "AN")
            {
                tmpValue = Replace( tmpValue, " ", "");
            }
            
            // 일본 문헌 검색시 문헌번호 변경
            if( (tmpName == "PN" || tmpName == "AN" || tmpName == "OPN" || tmpName == "GN") & (document.frmNationSel.COLLECTION_TOP[C_PAJ].checked == true) & (chkMsg == "N"))
            {
                // 문헌번호가 10자리인지 확인
                if (isNumber(tmpValue) & tmpValue.length == 10) {
                    var nowYr = new Date().getFullYear();
                    var numYr = tmpValue.substr(0,4);
                    var era = "";
                    var num = "";

                    if (numYr > 1925 & numYr <= nowYr ){
                        if (numYr <= 1988) {
                            era = numYr - 1925;
                        } else {
                            era = numYr - 1988;
                        }

                        if (era<10){
                            num = "0" + era +  tmpValue.substr(4,6);
                        } else {
                            num = era +  tmpValue.substr(4,6);
                        }

                        alert("입력하신 번호는 일본식 연호로 변환하여 함께 검색합니다.");
                        chkMsg = "Y";
                        //tmpValue = tmpValue + "<OR>"+tmpName+"="+num;
                    }
                }

            }

            //인명검색 절단검색 연산자 없애기
            // AP: 출원인  AG: 대리인  IN: 발명인  RB: 전체(출원/발명/대리인)
            if(tmpName == "AP" || tmpName == "AG" || tmpName == "IN"  || tmpName == "RB" )
            {
              if( tmpValue.indexOf("?") != -1)
              {
                alert("절단자를 사용하실 수 없습니다.");
                tmpValue = Replace( tmpValue, "?", "");
                return;
              }

              if( kwValidationCheck(tmpValue,"B") == false ) return; //2008/05/14 추가
            }

            //일자 검색 확인
            // AD 출원일자 || OPD 공개일자 || GD 등록일자 || PD 공고일자 || IDT PCT출원일자 || IOD 국제공개일자 || TD 전체(출원/공개/등록일) || RD 우선권주장일자
            //if( tmpName == "AD" || tmpName == "OPD" || tmpName == "GD" ||  tmpName == "PD" || tmpName == "IDT" || tmpName == "IOD" ||  tmpName == "TD" )
            // * By J.H.S 20131114 우선권주장일자 from ~ to 로 적용되게 수정함. * //
            if( tmpName == "AD" || tmpName == "OPD" || tmpName == "GD" ||  tmpName == "PD" || tmpName == "IDT" || tmpName == "IOD" ||  tmpName == "TD" || tmpName == "RD" )
            {
                //~로 시작, 끝나는 일자 검색식 처리 2007/11/01
                if( (tmpValue.charAt(0) == "~")|| (tmpValue.charAt(tmpValue.length-1) == "~") )
                {tmpValue = checkPartDate( tmpValue ); }
                //일자 형식 확인
                if( !checkDateExpression( tmpValue ) )      return false;
                //19990101~20010101 형식으로 변환
                tmpValue = ConvertDateFormat( tmpValue );
                //검색시작일과 검색종료일을 확인
                if ( tmpValue.indexOf("~")!=-1) {
                    var firstDate = tmpValue.substring(0, tmpValue.indexOf("~"));
                    var secondDate = tmpValue.substring(tmpValue.indexOf("~")+1, tmpValue.length);

                    if ( firstDate > secondDate ) {
                        alert( " 범위를 잘못 지정하였습니다." );
                        return  false;
                    }
                }
                //변환된 검색식 체크
                if( tmpValue.length <= 0 )
                {
                    alert( " 자릿수는 년도포함 4자리, 월포함 6자리, 일자포함 8자리로 하셔야 합니다." );
                    return  false;
                }
            }

            // 인용횟수
            // CNT 인용횟수
            if( tmpName == "CNT" )
            {
                // 입력값이 숫자인지 확인
                if ( !(isNumber(tmpValue)) ) {
                    alert( " 정수로 입력하세요" );
                    return  false;
                }

                // 범위 검색을 할 경우 숫자의 역전을 확인
                if ( tmpValue.indexOf("~")!=-1) {
                    var firstNum = tmpValue.substring(0, tmpValue.indexOf("~"));
                    var secondNum = tmpValue.substring(tmpValue.indexOf("~")+1, tmpValue.length);

                    if ( firstNum > secondNum ) {
                        alert( " 범위를 잘못 지정하였습니다." );
                        return  false;
                    }
                }
            }
           
           /* By J.H.S 20131114 우선권 주장일자 From ~ To 로 입력받도록 수정 */
           /*
           if( tmpName == "RD")  //우선권 주장일자 제외 2008/04/24 변경
            {
                //YYYYMMDD의 형식으로 일자가 입력되었는지 확인
                if( tmpValue.length != 8 )
                {
                    alert( " 자릿수는 년도포함 4자리, 월포함 6자리, 일자포함 8자리로 하셔야 합니다." );
                    return  false;
                }
                //일자 형식 확인
                if( !checkDateExpression( tmpValue ) )      return false;
            }
            */
            /* ****************************우선권 주장일자 주석처리 끝****************************** */
            
            //검색식 조합
            // 2011.09.14 수정 - 과도한 괄호식 사용을 개선
            //                - 매 항목마다 괄호를 이용해 쌓던 것을 or연산(+)과 만날 경우에 하도록 변경
            if( tmpName == "KW" ) //KW일 경우 KW=[] 사용하지 않음
            {
               tmpValue = deleteSpecialChar(tmpValue, 'KW' ); //2007/11/23 추가

                // 2011.09.14 추가
                var orYn = tmpValue.split("+").length;

                if( kwValidationCheck(tmpValue,"B") == false ) return; //2007/11/23 추가, 자유검색 유효성 검사 "(, ), !, [, ], =, +, *" 등의 값 앞에 잘못된 값이 들어오진 않았는지.

                    if( (tmpValue = fCheckKeyWord(tmpValue)) != false )
                    {

                       if(nextOpr == "and" )         //and연산인 것들은 앞으로 or연산인 것들은 뒤로 빼기 위해 and와 or를 구분.
                       {
                            // 2011.09.14 변경  if(andQuery.length > 0) andQuery = "("+ andQuery + ")*(" + tmpValue+")";
                            //                 else  andQuery = tmpValue;
                                if (orYn > 1) {  //자유검색 검색식에 OR(+)연산이 있는 경우 - 검색식을 괄호로 묵어야 함(이현승)
                                    if(andQuery.length > 0) andQuery = andQuery + "*(" + tmpValue +")";
                                    else                    andQuery = "(" + tmpValue +")";
                                }
                                else {           //자유검색 검색식에 OR(+)연산이 없는 경우 - 검색색을 괄호로 묶을 필요가 없음(이현승)
                                    if(andQuery.length > 0) andQuery = andQuery + "*" + tmpValue;
                                    else                    andQuery = tmpValue;
                                }
                       }
                       else
                       {
                            // 2011.09.14 변경  if(orQuery.length > 0) orQuery = "("+ orQuery + ")+(" + tmpValue +")";
                            //                  else  orQuery = tmpValue;
                                if(orQuery.length > 0)  orQuery = orQuery + "+(" + tmpValue +")";
                                else                    orQuery = "(" + tmpValue +")";

                       }

                }
                else return;
            }
            else if( tmpName != "cbSearchItem" )
            {
            	if(nextOpr == "and" )
                {
                     if(andQuery.length > 0) andQuery = andQuery + "*" + tmpName +"=[" + tmpValue +"]"; // 2011.09.14 변경  if(andQuery.length > 0) andQuery = "("+ andQuery + ")*(" + tmpName +"=[" + tmpValue +"])";
                     else                    andQuery = tmpName +"=[" + tmpValue +"]";

                }
            	else     //query = tmpName +"=[" + tmpValue +"]";
                {
                     if(orQuery.length > 0) orQuery = orQuery + "+" + tmpName +"=[" + tmpValue +"]"; // 2011.09.14 변경  if(orQuery.length > 0) orQuery = "("+ orQuery + ")+(" + tmpName +"=[" + tmpValue +"])";
                     else                   orQuery = tmpName +"=[" + tmpValue +"]";
                }
                //query = "("+searchItemForm.elements[inx].name +"=[" + searchItemForm.elements[inx].value +"])";
            }

            searchItemForm.elements[inx].value = tmpValue;
	        kwlist += (searchItemForm.elements[inx].name + "|");    // <= 추가되는 부분

        }  //if 끝


    }  //for( inx = 26 끝

    if( (andQuery.length > 0)&&(orQuery.length > 0) )  lastQuery = "(" + andQuery + ")+(" + orQuery  + ")";   //alert("lastQuery:" + lastQuery);
    else if(andQuery.length > 0)         lastQuery = andQuery;
    else if(orQuery.length > 0)          lastQuery = orQuery;
    else
    {   alert("검색어를 입력하세요.");
        SearchItemForm.KW.focus();
        return false;
    }
    
    SearchPara.queryText.value = lastQuery;
    //By J.H.S 20140103 검색어 입력후 검색 했을때, searchExpression 검색어 저장기록.
    jQuery("#searchExpression").val(jQuery("#queryText").val());

    document.SearchPara.strstat.value = "SMART|" + kwlist;    // <= 추가되는 부분

    if (SearchPara.expression.value != SearchPara.beforeExpression.value)
    {
    	SearchPara.beforeExpression.value = SearchPara.expression.value;
    }

    //By J.H.S 20131022 추가
    //상단 검색 placeholder hidden 
    //$('#ol_queryTextlabel').css('visibility','hidden');    

    DoItemizedSearch(lastQuery);
}

function DoItemizedSearch(query)
{

    var theForm = document.SearchItemForm;
    var collectionCheckBoxs = document.frmNationSel.COLLECTION_TOP;

    //ws081230 일본체크 한글 검색가능하게 (일본어전문을 한글전문으로 작업)
    // 장문석 20110825
    // 일본이 선택된 상태에서 다흔 국가를 선택할 경우 다른 국가에 대해서도 한글 검색이 가능함으로 이를 방지하고자 else if~ 추가
    // '일본 + 다른 국가'를 선택한 상태에서 검색어 확장시는 예외
    // 일본을 선택하지 않았을 경우
    
    /* By J.H.S 20140120 euc-kr -> uni/ko loacle 전환함에 따른 한글검색 지원설정으로 인한 스크립트 제한 해제.
    if (collectionCheckBoxs[C_PAJ].checked == false)
    {
        //ws080711 한글-영어(검색어확장) 체크해제시 한글을 사용못하게
        if(document.SearchPara.searchInTransCk.checked == false )
        {
            if (!isHangul(query))
        	    return false;
        }
    }
    // 일본을 선택하고 다른 국가를 선택했을 경우
    else if (collectionCheckBoxs[C_US].checked == true || collectionCheckBoxs[C_EP].checked == true || collectionCheckBoxs[C_WO].checked == true ||
                collectionCheckBoxs[C_CN].checked == true || collectionCheckBoxs[C_GB].checked == true || collectionCheckBoxs[C_DE].checked == true ||
                collectionCheckBoxs[C_FR].checked == true || collectionCheckBoxs[C_AU].checked == true || collectionCheckBoxs[C_CA].checked == true ||
                collectionCheckBoxs[C_RU].checked == true || collectionCheckBoxs[C_TW].checked == true )
    {

           if(document.SearchPara.searchInTransCk.checked == false)
           {
                //alert('한글 검색은 일본(JP)만 선택시 또는 검색어 확장이 체크된 경우에만 가능합니다.');
                if (!isHangul(query))
                    return false;
            }
    }
    */
    //ws080711 모음,자음 체크
    if(!checkKoreanOnly(query)) return;

    var form = document.SearchPara;
    var config = form.config.value;

    /**
     * 검색항목을 설정하는 기능이 없어졌으므로... 우선
     * G1111111111111111111111S111111111111111110 으로 고정한다..
     */
    //var newConfig = GetConfig(config);
    var newConfig = "G1111111111111111111111S110001000000000000";

    if (config != newConfig)
    {
        form.configChange.value = "Y";
        form.config.value = newConfig;
    }
    else
    {
    	form.configChange.value = "N";
    }

    if (form.searchInTransCk.checked)
    {
    	form.searchInTrans.value = "Y";
    }
    else
    {
    	form.searchInTrans.value = "N";
    }
    form.expression.value = query;
    form.currentPage.value = 1; // 20190422 ChaeSH, 1페이지로 이동 추가
    form.logFlag.value = "Y"; //ws080710 로그플래그
    form.action = "/fpat11/resulta.do";
    // 분류통계 서비스 항목 확대 202205
    form.piSearchYN.value = "N";
    //form.submit();

    //showLoadingBar();               // 로딩 바 보이기

    //By J.H.S 20140807 스마트검색시 검색히스토리에 남김 추가.
    //웹취약점 조치를 위해 < , > 문자 제거 
    appendSearchKeywordHistory("ABPAT_SRCH_HISTRY", query.replace(/</gi,"").replace(/>/,""), 10) ;
    setSearchKeywordHistoryBoard() ;
    
    var artPost = getPostAllData("divSearchItems");
    artPost.next = jQuery("#next", jQuery("#divMainArticle")).val();

    AjaxResultLoad("/abpat/resulta.do", artPost);
    getCtryCntList(artPost);

	hideSmartFinder();		// 스마트 파인더 감추기
    

}

//ws080711 잘못입력된 '모음' '자음' 검증  예) "휴ㄴ대폰",  "자동ㅇ차",   "ㄱㄴㄷ"
function checkKoreanOnly( obj ) {
   var c;
   if ( obj == null ) return false ;

   for(var i=0; i < obj.length; i++){
     c = obj.charCodeAt(i);
     //( 0xAC00 <= c && c <= 0xD7A3 ) 초중종성이 모인 한글자
     //( 0x3131 <= c && c <= 0x318E ) 자음 모음

     if( 0x3131 <= c && c <= 0x318E ) {
        //obj.charAt(i)
        alert("단어의 철자가 정확한지 확인해 주십시오");
        return false ;
     }
   }//end for

   return true ;
}

/////////////////////////////////// 유효성 관련 JS ///////////////////////////////////

//검색식 처음과 끝 공백, 엔터값 제거, 연산자 기호 변환  2007/11/08
/*
function edgeExtrim( inputStr )
{
   var nowChar = "";

   inputStr = RemoveSpecialChar(inputStr); //엔터값 제거 2007/11/09
   inputStr = ReplaceSpecialStr(inputStr); //연산자를 기호로 변환 2007/11/09

   if( inputStr.indexOf('\"') == -1) //구문검색이 아닐경우
   {
       for( var i=0 ; i < inputStr.length ; i++ ) //문자열 시작위치
       {     if( inputStr.charCodeAt(i) != 32 )    break;    }

       for( var j=inputStr.length -1  ; j> -1  ; j-- ) //문자열 끝 위치
       {     if(  inputStr.charCodeAt(j) != 32 )   break;     }

       var retStr =   inputStr.substring(i, j+1);
       return retStr;
   }
   else //구문검색은 그대로 return
   {    return inputStr;   }
}
*/

//괄호갯수
function CompareCountChar(sourceStr, findChar1, findChar2)
{
   return (CountChar(sourceStr, findChar1) == CountChar(sourceStr, findChar2)) ? true : false;
}

//글자갯수
function CountChar(sourceStr, findChar)
{
    var count = 0;
    for (var i = 0; i <= sourceStr.length; i++)
    {        if (sourceStr.charAt(i) == findChar)  count++;    }
    return count;
}


// FUNCTION : ConvertDateFormat(); 일자포맷완성
function ConvertDateFormat(value, name)
{
    var str = "", i=0;
    var FromDate = "";
    var ToDate   = "";

    value = StrDelStr( value, ' ' );
    value = StrDelStr( value, '/' );
    value = StrDelStr( value, '*' );
    value = StrDelStr( value, '.' );
    value = StrDelStr( value, '-' );
    value = StrDelStr( value, '_' );

    for( i = 0; i < value.length; i++ )
    {
        if( (value.charAt(i) < '0' || value.charAt(i) > '9') &&
            (value.charAt(i) != '~'                        ) &&
            (value.charAt(i) != '?'                        )  )   break;
    }

    if( value.length < 17 )
    {        /* 예) 200401~200403 일 경우 ( 13 자리 ) */
        if( value.length == 13 )
        {
            var DelimeterPos = value.indexOf( '~' );
            if(DelimeterPos == 0)  return str;
            var FromDate = value.substring(0, DelimeterPos);
            var ToDate   = value.substring(DelimeterPos+1, value.length);

            yy = eval(ToDate.substring(0,4));
            mm = eval(ToDate.substring(4,6));
            dd = Getdd(yy, mm);

            FromDate = FromDate + '01';
            ToDate   = ToDate   + dd;
            /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
            str = FromDate + '~' + ToDate;
            return  str;
        }

        switch( IsDateFormat(value) )
        {
            case 'yyyy':
                FromDate = value + '0101';
                ToDate   = value + '1231';
                /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
                str = FromDate + '~' + ToDate;
                break;

            case 'yyyy?':
                FromDate = value.substring(0,4) + '0101';
                ToDate   = value.substring(0,4) + '1231';
                /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
                str = FromDate + '~' + ToDate;
                break;

            case 'yyyymm':
                yy = eval(value.substring(0,4));
                mm = eval(value.substring(4,6));
                dd = Getdd(yy, mm);
                FromDate = value + '01';
                ToDate   = value + dd;
                /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
                str = FromDate + '~' + ToDate;
                break;

            case 'yyyymm?':
                yy = eval(value.substring(0,4));
                mm = eval(value.substring(4,6));
                dd = Getdd(yy, mm);
                FromDate = value.substring(0,6) + '01';
                ToDate   = value.substring(0,6) + dd;
                /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
                str = FromDate + '~' + ToDate;
                break;

            case 'yyyymmdd':
                yy = eval(value.substring(0,4));
                mm = eval(value.substring(4,6));
                dd = eval(value.substring(6,2));
                FromDate = value;
                ToDate   = value;
                /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
                str = FromDate + '~' + ToDate;
                break;

            default:
    		    str = '';
    		    break;
        }
    }

    if( value.length == 17 )
    {
        var DelimeterPos = value.indexOf('~');
        if( DelimeterPos == 0 )  return str;

    	var FromDate = value.substring( 0, DelimeterPos );
    	var ToDate   = value.substring( DelimeterPos + 1, value.length );

    	if( IsDateFormat(FromDate) == 'yyyymmdd' && IsDateFormat(ToDate) == 'yyyymmdd' )
    	{
            /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
            str = FromDate + '~' + ToDate;
    	}
    	else
    	{
            str = "";
        }
    }
    return str;
}

//* FUNCTION : IsDateFormat( param ); Data 포맷 확인
function IsDateFormat(date)
{
    var i = 0;
    var yy, mm, dd;

    if( (date.length > 8)                            ||
        (date.length == 5 && date.charAt(4) != '?' ) ||
        (date.length == 7 && date.charAt(6) != '?' ) )
    {
        alert( " 입력하신 일자가 포맷에 맞지 않습니다.  " );
    }

    // 숫자인지 검사한다. 아니면 false
    if(date.length >= 4 && date.charAt(3) != '?')
    {
        yy = eval(date.substring(0,4));
        if(yy < 1947 || yy > 9999)
        {
            alert( " 입력하신 년(年)도는 형식이 맞지 않습니다.  " );
            return false;
        }

	if(date.length == 4)                           return 'yyyy';
        if(date.length == 5 && date.charAt(4) == '?')  return 'yyyy?';
    }
    else
    {
        return false;
    }

    if(date.length >= 6 && date.charAt(5) != '?')
    {
	    mm = eval(date.substring(4,6));
	    if(mm < 1 || mm > 12)
	    {
            alert( " 입력하신 월(月)은 조회가능한 월(1~12)이 아닙니다.  " );
            return false;
            }
	    if(date.length == 6 )                         return 'yyyymm';

        if(date.length == 7 && date.charAt(6) == '?') return 'yyyymm?';
    }
    else
    {
        return false;
    }

    if(date.length == 8 && date.charAt(7) != '?')
    {
        dd = eval(date.substring(6,8));
	if(dd < 1 || dd > Getdd(yy, dd))
	{
	        alert( " 입력하신 일(月)은 조회가능한 일(1~31)이 아닙니다.  " );
                return false;
        }

	if(date.length == 8)  return 'yyyymmdd';
    }
    else
    {
        return false;
    }
}

// 날짜에 대한 유효성 검사
function checkDateExpression(inputStr)
{
	var noArr= new Array();
	// 전체검색문자가 숫자와 - 만으로 이루어져 있는지 확인
	for( var i=0 ; i < inputStr.length ; i++ )
        {
		// 번호중  - , ? 문자는 포함 가능
		if(  inputStr.charAt(i) != "~" && inputStr.charAt(i) != "?" )
                {
			if( inputStr.charCodeAt(i) < 48 || inputStr.charCodeAt(i) > 57 )
                        {
				alert("[" + inputStr + "]내에 숫자,?,~ 가 아닌 문자가 포함되어 있습니다.");
				return false;
			}
		}
	}

	noArr= inputStr.split("~");
	if( noArr.length > 2 )
        {
		alert("[" + inputStr + "]중 날짜범위는 ~ 문자를 하나만 포함해야합니다.");
		return false;
	}
	else
        {
		for( var i=0 ; i < noArr.length ; i++ )
                {
			if( ! isCheckDateFormat(noArr[i]) )	return false;
		}
	}
	return true;
}

// 날짜형식 검사
function isCheckDateFormat( inputStr )
{
	var date= new Date();
	var year= date.getFullYear();

	if( inputStr.length < 4 || inputStr.length > 8)
        {
		alert("[" + inputStr + "]중 날짜는 4자리 이상 8자리 이하여야 합니다.");
		return false;
	}

	// 앞4개 문자가 숫자가 아닐경우 판별
	if( isNaN(inputStr.substring(0,4)) )
        {
		alert("[" + inputStr + "]중 앞4자리가 숫자가 아닙니다.");
		return false;
	}

	// 년도 체크
	if( Number(inputStr.substring(0,4)) < 1945 || Number(inputStr.substring(0,4)) > year )
        {
		alert("[" + inputStr + "]중 앞의 4자리년도는 1945부터 " + year + "사이여야 합니다.");
		return false;
	}
	return true;
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : Getdd(); 월별일자 가져오기                                     */
/*---------------------------------------------------------------------------*/
function Getdd(yy, mm)
{
    month = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    if(mm == 2)
   {
    	if(((yy % 4 == 0) && (yy % 100 != 0)) || (yy % 400 == 0))
            month[1] = 29;
    	else
    	    month[1] = 28;
    }
    return month[mm - 1];
}

//* FUNCTION : StrDelStr(); 특정문자 제거
function StrDelStr(Lstr, Sstr)
{
    var str = "";
    var index = Lstr.indexOf( Sstr );
    if( index == -1 )     {	    str = Lstr;    }
    else
    {
        str = Lstr.substring(0, index) + Lstr.substring(index+Sstr.length, Lstr.length);
        str = StrDelStr(str, Sstr);
    }
    alert(str);
    return str;
}


// FUNCTION : ConvertPartDateFormat(); ~로 시작, ~로 끝나는 일자포맷완성  2007/11/01
function ConvertPartDateFormat(value, flag)
{
    var str = "", i=0;

    value = StrDelStr( value, ' ' );
    value = StrDelStr( value, '/' );
    value = StrDelStr( value, '*' );
    value = StrDelStr( value, '.' );
    value = StrDelStr( value, '-' );
    value = StrDelStr( value, '_' );

    for( i = 0; i < value.length; i++ )
    {
        if( (value.charAt(i) < '0' || value.charAt(i) > '9') &&
            (value.charAt(i) != '~'                        ) &&
            (value.charAt(i) != '?'                        )  )   break;
    }

    switch( IsDateFormat(value) )
    {
        case 'yyyy':
            if( flag == "end")  str = value + '0101';
            else                  str  = value + '1231';
            break;

        case 'yyyy?':
            if( flag == "end")  str = value.substring(0,4) + '0101';
            else                  str = value.substring(0,4) + '1231';
            break;

        case 'yyyymm':
            yy = eval(value.substring(0,4));
            mm = eval(value.substring(4,6));
            dd = Getdd(yy, mm);
            if( flag == "end")  str = value + '01';
            else                  str   = value + dd;
            break;

        case 'yyyymm?':
            yy = eval(value.substring(0,4));
            mm = eval(value.substring(4,6));
            dd = Getdd(yy, mm);
            if( flag == "end")  str = value.substring(0,6) + '01';
            else                  str = value.substring(0,6) + dd;
            break;

        case 'yyyymmdd':
            yy = eval(value.substring(0,4));
            mm = eval(value.substring(4,6));
            dd = eval(value.substring(6,2));
            str = value;
            break;

        default:
                str = '';
                break;
    }
    return str;
}

function checkPartDate(inputStr)    //~로 시작, 끝나는 검색식 2007/11/01
{
    var str = "";
    var StartDate ="19480620";
    var today = "20220812";
    var flag = ""; //~로 시작 "start", ~로 끝 "end" 구분
    var toStr = "";
    var fromStr = "";
    if(  inputStr.charAt(0) == "~")
    {   flag = "start";
        if( ! checkDateExpression( inputStr.substring(1) ) )	return false;
        /* By J.H.S 20130909 날짜 초기화 변경
        inputStr = ConvertPartDateFormat(inputStr.substring(1), flag);
        str= StartDate + "~" + inputStr ;
        */
        flag = "start";
        toStr =  ConvertPartDateFormat(inputStr.substring(1), flag);    // 끝날짜
        flag = "end";
        fromStr =  ConvertPartDateFormat(inputStr.substring(1), flag); //시작날짜
        str = fromStr + "~" + toStr ;
    }
    else if(  inputStr.charAt(inputStr.length-1) == "~")
    {   flag = "end";
        if( ! checkDateExpression(inputStr.substring(0, (inputStr.length-1) )) )	return false;
        /* By J.H.S 20130909 날짜 초기화 변경
        inputStr = ConvertPartDateFormat(  inputStr.substring(0, (inputStr.length-1)) , flag);
        str= inputStr + "~" + today ;
        */
        fromStr = ConvertPartDateFormat(  inputStr.substring(0, (inputStr.length-1)) , flag);
        flag = "start";
        toStr = ConvertPartDateFormat(  inputStr.substring(0, (inputStr.length-1)) , flag);
        str = fromStr + "~" + toStr;
    }
    return str;
}

//검색값 체크
function checkVaild(inputStr)
{
    var quoteCnt= 0;
    if(  inputStr.indexOf(",") != -1 || inputStr.indexOf("@") != -1)
    {
        alert("[" + inputStr + "]내에 ',', '@' 문자가 포함되어 있습니다.");
        return false;
    }

    if (!CompareCountChar(inputStr, '(', ')'))
    {
        alert("검색식의 괄호'(,)'의 개수가 맞지 않습니다.");
        return false;
    }

    if (!CompareCountChar(inputStr, '[', ']'))
    {
        alert("검색식의 괄호'(,)'의 개수가 맞지 않습니다.");
        return false;
    }

    for( var i=0 ; i < inputStr.length ; i++ )
    {
        if( inputStr.charAt(i) == '\"')	quoteCnt++;
    }

    if( (quoteCnt % 2) != 0 )
    {
            alert("쌍따옴표 개수가 일치하지 않습니다.");
            return false;
    }
    return true;
}

//By J.H.S 20140814 우선권주장번호 , 입력되도록 추가.
function checkVaildOnlyRN(inputStr)
{
    var quoteCnt= 0;
    if(inputStr.indexOf("@") != -1)
    {
        alert("[" + inputStr + "]내에 '@' 문자가 포함되어 있습니다.");
        return false;
    }

    if (!CompareCountChar(inputStr, '(', ')'))
    {
        alert("검색식의 괄호'(,)'의 개수가 맞지 않습니다.");
        return false;
    }

    if (!CompareCountChar(inputStr, '[', ']'))
    {
        alert("검색식의 괄호'(,)'의 개수가 맞지 않습니다.");
        return false;
    }

    for( var i=0 ; i < inputStr.length ; i++ )
    {
        if( inputStr.charAt(i) == '\"')	quoteCnt++;
    }

    if( (quoteCnt % 2) != 0 )
    {
            alert("쌍따옴표 개수가 일치하지 않습니다.");
            return false;
    }
    return true;
}

/////////////////////////////////// login 관련 JS ///////////////////////////////////
var eCode = window.Event ? true : false;


function KeyLogin(ev)
{
    if (eCode)                      var whichCode = ev.which
    else if (ev.type == "keypress") var whichCode = ev.keyCode;

    if (whichCode != 13) return;

    Login();
}

function Login()
{
    var form = document.Auth;

    if (!form.userId.value)
    {
        alert("아이디를 입력하지 않으셨습니다.");
        form.userId.focus();
        return;
    }

    if (form.userId.value.length < 5)
    {
        alert("아이디는 5~16자리로 입력하셔야 합니다.");
        form.userId.focus();
        form.userId.select();
        return;
    }

    if (!form.passwd.value)
    {
        alert("비밀번호를 입력하지 않으셨습니다.");
        form.passwd.focus();
        return;
    }

    if (form.passwd.value.length < 5 || form.passwd.value.length > 12)
    {
        alert("비밀번호는 5~12자리로 입력하셔야 합니다.");
        form.passwd.focus();
        form.passwd.select();
        return;
    }

    var mainForm = document.SearchPara;
    //var mainForm = eval("document." + form.formName.value)

    mainForm.userId.value = form.userId.value;
    mainForm.passwd.value = form.passwd.value;

    GoConfigOption(mainForm);
}

function LogOut()
{
    location.href = "/fpat11/logouta.do";
    //location.href="http://www.kipris.or.kr/new_kipris/common/Auth_logout.jsp";
}

var ConfigOption = null;
function GoConfigOption()
{
    var form = document.Auth;

    var w = 400;
    var h = 260;

    var winl = (screen.width-w)/2;
    var wint = (screen.height-h)/2;
    var settings  ='height='+h+',';
          settings +='width='+w+',';
          settings +='top='+wint+',';
          settings +='left='+winl+',';
          settings +='scrollbars=no,';
          settings +='resizable=no';

    ConfigOption = window.open("", "ConfigOption", settings);
    //ConfigOption = window.open("", "ConfigOption");   //ttt

    form.target = 'ConfigOption';
    form.action='/fpat11/autha.do';
    form.submit();

    ConfigOption.focus();
    form.target = "";
}

function openLoginWindow()
{
    var w = 400;
    var h = 260;

    var winl = (screen.width-w)/2;
    var wint = (screen.height-h)/2;
    var settings  ='height='+h+',';
          settings +='width='+w+',';
          settings +='top='+wint+',';
          settings +='left='+winl+',';
          settings +='scrollbars=no,';
          settings +='resizable=no';

    window.open("/fpat11/auth/loginPopup.html", "login", settings);
    //ConfigOption = window.open("", "ConfigOption");   //ttt
}

function check_id(objtext1)
{
	var inText = objtext1.value;
	var ret;

	var str_new = ""

	for (k=0; k<inText.length ; k++)
        {
		var tmp = inText.charAt(k) //개별문자
		c = tmp.toUpperCase() //개별문자를 대문자로 (소문자는 toLowerCase)
		str_new = str_new + c //개별문자 누적시킴
	}

	objtext1.value = str_new

	for (var i = 0; i < inText.length; i++)
        {
		ret = inText.charCodeAt(i);

		if ((ret > 122) || (ret < 45) || (ret > 45 && ret < 48) || (ret > 57 && ret < 65) || (ret > 90 && ret < 94)|| (ret > 96 && ret < 97))
                {  // 한글제한  _ : 95  - :45
			alert("한글, 특수문자나 공백 등은 사용하실수 없습니다.\n\n아이디에 특수문자 등이 입력되신 회원분은 불편신고에 기재하시거나,\nuser@user@kipi.or.kr로 문의하시기 바랍니다.");
			objtext1.value = "";
			objtext1.focus();
			return false;
		}
	}
	return true;
}

/////////////////////////////////// 문자열 변환 관련 ///////////////////////////////////
// 연산자 앞 뒤 빈 공백문자 제거(따옴표로 묶여 있는 문자열은 제외)
// for 문으로 한문자씩 검사하면서 수행한다. 2008/04/10 박영후대리
function removeOperatorBlank(str)
{
    var isStr = false;              // 현재 큰따옴표로 묶여있는 문자열 안인지 여부
    var resultStr = "";             // 수행한 결과 문자열
    var ch_prev_prev = '';          // for 문에서 이전에 이전 문자
    var ch_prev = '';               // for 문에서 이전 문자
    var ch_now = '';                // for 문에서 현재 문자
    var ch_next = '';               // for 문에서 다음 문자

    for (var i=0; i<str.length; i++)  // for 문으로 한문자씩 검사하면서 수행한다.
    {
        if (i >= 2)  // 이전에 이저 문자가 존재할 경우 저장
            ch_perv_prev = str.charAt(i-2);
        else
            ch_perv_prev = '';

        if (i >= 1)  // 이전 문자가 존재할 경우 저장
            ch_prev = str.charAt(i-1);
        else
            ch_prev = '';

        ch_now = str.charAt(i);  // 현재 문자

        if (i < str.length-1)  // 다음 문자가 존재할 경우 저장
            ch_next = str.charAt(i+1);
        else
            ch_next = '';

        if (ch_now == '\"')  // 큰 따옴표가 나타나면 문자열인지 나타나는 변수의 boolean 상태를 변경
            isStr = !isStr;

        // 현재 문자가 공백이고 다음 문자가 공백이아니고 이전문자와 다음문자가 연산자가 아니라면 공백을 * 로 치환
        if (
                (isStr == false && ch_now == ' ' && ch_next != ' ') &&
                (
                    !(ch_next == '*' || ch_next == '+' || ch_next == '!' || ch_next == '^') &&
                    !(ch_prev == '*' || ch_prev == '+' || ch_prev == '!' || ch_prev == '^') &&
                    !(ch_prev_prev == '^' && (ch_prev == '1' || ch_prev == '2' || ch_prev == '3'))
                )
            )
        {
            resultStr += '*';

            continue;
        }

        // 현재 문자가 공백이고 다음 문자를 비교해서 연산자라면 공백처리(공백제거)
        if ( (isStr == false && ch_now == ' ') && (ch_next == '*' || ch_next == '+' || ch_next == '^') )
            continue;

        // 현재 문자가 공백이고 이전 문자를 비교해서 연산자라면 공백처리(공백제거)
        if (    (isStr == false && ch_now == ' ') &&
                (
                    ch_prev == '*' || ch_prev == '+' || ch_prev == '!' ||
                    (ch_prev_prev != '^' && (ch_prev == '1' || ch_prev == '2' || ch_prev == '3'))
                )
            )
        {
            continue;
        }

        if (isStr == false && ch_now == ' ')
            continue;

        resultStr += ch_now;
    }

    resultStr = ReplaceChar( resultStr, "**", "*");
    resultStr = ReplaceChar( resultStr, "!*", "!");
    resultStr = ReplaceChar( resultStr, "^*", "^");
    resultStr = ReplaceChar( resultStr, "^1*", "^1");
    resultStr = ReplaceChar( resultStr, "^2*", "^2");
    resultStr = ReplaceChar( resultStr, "^3*", "^3");

    return resultStr;
}

//자릿수 맞추기
function zeroPadding( value, no )
{
    var str = "";

    if( value.indexOf('?') != -1 ) return value;

    for( var k= 0,i = 0; i < no; i++ )
    {
        if( str.length + value.substring(k).length != no )         str+= "0";
        else                                                       str+= value.charAt(k++);

       if( str.charCodeAt(i) < 48 || str.charCodeAt(i) > 57)
       {
            alert( '문자가 포함되어 있습니다[ ' + str.charAt(i) + ']' );
            return false;
       }
    }
    return str;
}
//엔터값 제거
function RemoveSpecialChar(sourceStr)
{
    var str = sourceStr;
    str = ReplaceChar(str, String.fromCharCode(10), '');
    str = ReplaceChar(str, String.fromCharCode(13), '');
    return str;
}
//문자열 변환
function ReplaceChar(sourceStr, findChar, replaceChar)
{
    var pos = 0;
    pos = sourceStr.indexOf(findChar);

    while (pos != -1)
    {
        sourceStr = sourceStr.replace(findChar, replaceChar);
        pos = sourceStr.indexOf(findChar);
    }
    return sourceStr;
}

//연산자 기호 변환
function ReplaceSpecialStr(sourceStr)
{
    var str = sourceStr;
    str = ReplaceChar(str, "<and>", "*");
    str = ReplaceChar(str, "<AND>", "*");
    str = ReplaceChar(str, "<OR>" , "+");
    str = ReplaceChar(str, "<or>" , "+");
    str = ReplaceChar(str, "<near" , "<NEAR");  //near 검색 관련 2007/11/13

    while(  str.indexOf('<NEAR') != -1 )
    {
        var nearNum = str.indexOf( '<NEAR/' ) + 6;       //^1, ^2, ^3 의 경우 존재
        if( str.charAt(nearNum) == "1"  || str.charAt(nearNum) == "2" || str.charAt(nearNum) == "3"  )
        {
             var orgStr = "<NEAR/" + str.charAt(nearNum) +">";
             var repStr = "^" + str.charAt(nearNum);
             str = ReplaceChar(str, orgStr, repStr);
        }
        else
        {
            str = ReplaceChar(str, "<NEAR>" , "^");
        }
   }
    return str;
}

// keyword에서 \n, CR, LF, SPACE 제거 (구문검색의 공백은 제외)
function exTrim( inputStr )
{
	var quoteCnt= 0;
	var retStr= "";

	for( var i=0 ; i < inputStr.length ; i++ )
        {
		if( inputStr.charAt(i) == '\"')	quoteCnt++;
		if( inputStr.charCodeAt(i) != 32 && inputStr.charCodeAt(i) != 13 && inputStr.charCodeAt(i) != 10)
                {			retStr += inputStr.charAt(i);				}
		else
                {
			if( (quoteCnt % 2) != 0 ) {	retStr += inputStr.charAt(i);		}
		}
	}

	if( (quoteCnt % 2) != 0 )
        {
		alert("쌍따옴표 개수가 일치하지 않습니다.");
		return false;
	}
	return retStr;
}

//검색식 처음과 끝 공백, 엔터값 제거, 연산자 기호 변환  2007/11/08
function edgeExtrim( inputStr )
{
   var nowChar = "";

   inputStr = RemoveSpecialChar(inputStr); //엔터값 제거 2007/11/09
   inputStr = ReplaceSpecialStr(inputStr); //연산자를 기호로 변환 2007/11/09

 //  if( inputStr.indexOf('\"') == -1) //구문검색이 아닐경우
 //  {  //구문검색이 일부 존재하는경우 검색식의 양끝 공백을 제거하지 못하므로 해당 if 문 주석처리 , 구문검색 존재여부와 상관없이 양끝 공백 제거수행을 위해 by 2016.03
       for( var i=0 ; i < inputStr.length ; i++ ) //문자열 시작위치
       {     if( inputStr.charCodeAt(i) != 32 )    break;    }

       for( var j=inputStr.length -1  ; j> -1  ; j-- ) //문자열 끝 위치
       {     if(  inputStr.charCodeAt(j) != 32 )   break;     }

       var retStr =   inputStr.substring(i, j+1);
       return retStr;
  /* }
   else //구문검색은 그대로 return
   {    return inputStr;   }*/
}
/////////////////////////////////// 일반검색 관련 JS ///////////////////////////////////
//단어검색
function GoWordSearch()
{
    var form = document.WordForm;  //단어검색 from 값
    var collectionCheckBoxForm = document.collectionForm;  //국가 컬렉션 form 값
    var szKw = form.KW.value;  //단어검색 textarea의 값
    var SearchPara   = document.SearchPara;  //기타 환경값
    var query = "";

   SearchPara.userInput.value = szKw ; // 2008/05/26 유저 입력 저장
    if( !isCheckCollection(collectionCheckBoxForm, SearchPara) )
        return false;

    if (szKw.length < 1)
    {
        alert("검색어를 입력하십시오.");
        return;
    }

//    if( form.KW.value.indexOf("?") != -1)   //2007/10/24 ff적용위한 변경
//    {
//        alert("절단자를 사용하실 수 없습니다.");
//        return;
//    }

    //콤마, @, 괄호, [] 갯수 등 체크 checkVaild (Searchcom.js) 2007/11/09
    if( checkVaild( szKw ) != true ) return false;
    //검색식 처음과 끝 공백, 엔터값 제거, 연산자 기호 변환 2007/11/09 수정 edgeExtrim(Searchcom.js)
    if( ( szKw = edgeExtrim( szKw )) == false) return false;

    szKw = deleteSpecialChar(szKw, 'KW' ); //2007/11/23 추가

     if((szKw = removeOperatorBlank( szKw )) == false) return false; // 2008/05/21 추가

 //   if( kwValidationCheck(szKw,"B") == false ) return; //2007/11/23 추가

    var searchRange = "";
    //검색범위 1년~10년 선택이 없을 경우
    if(form.dateRange.options[form.dateRange.selectedIndex].value == "")
    {          query = szKw;      }
    else //검색범위 1년~10년 선택됐을 경우
    {
      searchRange = GetSearchRange(form.dateRange. options[form.dateRange.selectedIndex].value);
      searchRange = "(OPD=[" + searchRange + "]+GD=[" + searchRange + "])";
      query = szKw + "*"  + searchRange ;
    }



    if (document.WordForm.searchInTrans.checked)
    {   SearchPara.searchInTrans.value = "Y"; }
    else    {   SearchPara.searchInTrans.value = "N"; }

    DoGeneralSearch(query);
}

//번호검색
function GoNumberSearch()
{
    var query= "";
    var SearchPara   = document.SearchPara;

    var form = document.NumberForm;
    var collectionCheckBoxForm = document.collectionForm;
    var kind = form.no1.value;
    var num  = form.no3.value;

    if( !isCheckCollection(collectionCheckBoxForm, SearchPara) )
        return false;

   if(num.length < 1)       {  alert(  '일련번호를 입력하지 않으셨습니다.'); return false;   }
   else if(num.length > 18) { alert( '번호는 17자리를 초과할수 없습니다.');  return false;   }

   query = kind + "=[" + num + "]";
   DoGeneralSearch(query);
}

//일반검색 - 일자검색(출원일자/공개일자/등록일자)
function GoDateSearch()
{
    var query = "";
    var SearchPara   = document.SearchPara;  //기타 환경값
    var form = document.DateForm;  //단어검색 from 값
    var collectionCheckBoxForm = document.collectionForm;  //국가 컬렉션 form 값
    var tmpTd  = form.TD.value;

    if( !isCheckCollection(collectionCheckBoxForm, SearchPara) ) {
        return false;
    }

    if(tmpTd.length < 1)       {  alert(  '날짜를 입력하지 않으셨습니다.'); return false;   }  //날짜를 입력하지 않으셨습니다.

    //~로 시작, 끝나는 일자 검색식 처리 2007/11/01
    if( (tmpTd.charAt(0) == "~")|| (tmpTd.charAt(tmpTd.length-1) == "~") )
        {tmpTd = checkPartDate( tmpTd ); }
    //일자 형식 확인
    if( !checkDateExpression( tmpTd ) )      return false;
    //19990101~20010101 형식으로 변환
    tmpTd = ConvertDateFormat( tmpTd );
    //검색시작일과 검색종료일을 확인
    if ( tmpTd.indexOf("~")!=-1) {
        var firstDate = tmpTd.substring(0, tmpTd.indexOf("~"));
        var secondDate = tmpTd.substring(tmpTd.indexOf("~")+1, tmpTd.length);

        if ( firstDate > secondDate ) {
            alert( " 범위를 잘못 지정하였습니다." );
            return  false;
        }
    }
    //변환된 검색식 체크
    if( tmpTd.length <= 0 )
    {
        alert( " 자릿수는 년도포함 4자리, 월포함 6자리, 일자포함 8자리로 하셔야 합니다." );
        return  false;
    }

    //최종쿼리 형태 TD=[시작일~종료일]
    //위의 형태로 쿼리를 보내게 되면 ResultA.java에서 Parse.parse(tmpString) 부분에서 쿼리가
    //(AD>=19800101<AND>AD<=20110101)<OR>(PD>=19800101<AND>PD<=20110101)<OR>(RD>=19800101<AND>RD<=20110101)로 변함.
    query = "TD=[" + tmpTd + "]";

    DoGeneralSearch(query);
}

//일반검색 - 인명검색(출원인/발명인/대리인)
function GoPeopleSearch() {
    var query = "";
    var SearchPara   = document.SearchPara;  //기타 환경값
    var form = document.PeopleForm;  //단어검색 from 값
    var collectionCheckBoxForm = document.collectionForm;  //국가 컬렉션 form 값
    var tmpRb  = form.RB.value;

    if( !isCheckCollection(collectionCheckBoxForm, SearchPara) )
        return false;

    if( tmpRb.indexOf("?") != -1)
    {
        alert("절단자를 사용하실 수 없습니다.");
        tmpRb = Replace( tmpRb, "?", "");
        return;
    }
    if( kwValidationCheck(tmpRb,"B") == false ) return; //2008/05/14 추가

    query = "RB=[" + tmpRb + "]";

    DoGeneralSearch(query);
}

//특실종류 변경시
function SelectNo1()
{
    document.NumberForm.dummyNo1.value = document.NumberForm.no1.value;
}

function canChange()    //일반검색 번호선택 관련 2007/11/16 추가
{
    var form = document.NumberForm;
    var value = form.dummyNo1.value

    if( value == "10G" || value == "20G" )
    {
        form.no2.selectedIndex = 0;
        form.no2.blur();
        form.no2.focus();
        alert( "등록번호의 경우 년도를 선택할 수 없습니다");
    }
}

// 한글이 입력됐는지 검사
function isHangul(query)
{
    for(i=0;i<query.length;i++)
    {
       var a=query.charCodeAt(i);
       if (a > 128)
       {
       //ws080711 alert('해외특허검색은 한글로 검색할 수 없습니다.');
       alert('일본(JP)만 선택하거나 검색어 확장이 선택된 경우에만 한글로 검색할 수 있습니다.');
       return false;
       }
    }

    return true;
}

//최종 검색 함수 submit
function DoGeneralSearch(query)
{
   var theForm = document.collectionForm;
   var collectionCheckBoxs = theForm.COLLECTION;

    //ws081230 일본체크 한글 검색가능하게 (일본어전문을 한글전문으로 작업)
    // 장문석 20110825
    // 일본이 선택된 상태에서 다흔 국가를 선택할 경우 다른 국가에 대해서도 한글 검색이 가능함으로 이를 방지하고자 else if~ 추가
    // '일본 + 다른 국가'를 선택한 상태에서 검색어 확장시는 예외
    
    /* By J.H.S 20140120 euc-kr -> uni/ko loacle 전환함에 따른 한글검색 지원설정으로 인한 스크립트 제한 해제.
    if (collectionCheckBoxs[C_PAJ].checked == false){
        //ws080711 한글-영어(검색어확장) 체크해제시 한글을 사용못하게
       if(document.WordForm.searchInTrans.checked == false){
            if (!isHangul(query))
               return false;
        }
    }
    else if (collectionCheckBoxs[C_US].checked == true || collectionCheckBoxs[C_EP].checked == true || collectionCheckBoxs[C_WO].checked == true ||
                collectionCheckBoxs[C_CN].checked == true || collectionCheckBoxs[C_GB].checked == true || collectionCheckBoxs[C_DE].checked == true ||
                collectionCheckBoxs[C_FR].checked == true || collectionCheckBoxs[C_AU].checked == true || collectionCheckBoxs[C_CA].checked == true ||
                collectionCheckBoxs[C_RU].checked == true || collectionCheckBoxs[C_TW].checked == true ) {
           if(document.WordForm.searchInTrans.checked == false){
               if (!isHangul(query))
                   //alert('한글 검색은 일본(JP)만 선택시 또는 검색어 확장이 체크된 경우에만 가능합니다.');
                   return false;
            }
    }
    */

    //ws080711 모음,자음 체크
    if(!checkKoreanOnly(query)) return;

    var form = document.SearchPara;
    var config = form.config.value;
    var newConfig = "G" + config.substr(1, config.length);

    if (config != newConfig)
    {
        form.configChange.value = "Y";
        form.config.value = newConfig;
    }
    else
    {
        form.configChange.value = "N";
    }

    //query = "(" + query + ")";  //2007/10/17
    form.ion.value = query;
    form.action = "/fpat11/resulta.do";
    form.logFlag.value = "Y"; //ws080710 로그플래그
    //form.target = "_new";       //test를 위해 새창에서 검색
    form.submit();

    //Loading.style.display="";
    showLoadingBar();               // 로딩 바 보이기
}

//검색범위 선택
function GetSearchRange(val)
{
    var now   = new Date();
    var year  = now.getFullYear(); //2007/10/24 ff적용위해 getYear()에서 변경
    var month = now.getMonth() + 1;
    var date  = now.getDate();
    var AD ="";

    if(month < 10)    month = "0" + month;
    if(date  < 10)    date  = "0" + date;

    endRange   = year + "" + month + "" + date;
    startRange = (endRange - (val * 10000));
    searchRange = startRange + "~" + endRange;

    return searchRange;
}

//검색을 위한 특실 체크 확인 2007/10/30
/*function CheckKind(form)
{   var elsevalue = "";
    // 특실 종류 선택 여부를 Check 2007/10/30
    if( form.gubn[0].checked == true && form.gubn[1].checked == true)
        elsevalue = "ALL";
    else if( form.gubn[0].checked == true )        elsevalue = "{CLS=P}";
    else if( form.gubn[1].checked == true )        elsevalue = "{CLS=U}";
    else
    {
        alert( '특허/실용을 선택하여 주십시오.');
        //alert( "특허/실용을 선택하여 주십시오.");
        return false;
    }
    return elsevalue;
} */

// 행정처분 선택
function CheckLast(form)
{   var lastvalue = "";

    for( qnx = 0; qnx < 7; qnx++ )
    {
        if( form.hangjung[qnx].selected == true  )
        {
            cHangJundgubn = form.hangjung[qnx].value;
            //if ((cHangJundgubn != null) && (cHangJundgubn == 'R'))
            if ((cHangJundgubn == 'R'))         lastvalue =  "({LST=R}+{LST=F})";   //등록선택시 등록+소멸
            else if ( cHangJundgubn == '0' )    lastvalue = "ALL";
            else                                lastvalue =  "{LST=" + cHangJundgubn + "}";
        }
    }
    return lastvalue;
}

// 화면에서 현재 스크롤 위치
function getNowScroll()
{
    var de = document.documentElement;
    var b = document.body;
    var now = {};

    now.X = document.all ? (!de.scrollLeft ? b.scrollLeft : de.scrollLeft) : (window.pageXOffset ? window.pageXOffset : window.scrollX);
    now.Y = document.all ? (!de.scrollTop ? b.scrollTop : de.scrollTop) : (window.pageYOffset ? window.pageYOffset : window.scrollY);

    return now;
}

/**
 * 페이지 이동시에 로딩바 보이기
 * 2012.11.06 bhhan
 */
function showLoadingBar()
{
	var loadingBarBack = jQuery("#loadingBarBack");
	var scrltop = $(window).scrollTop();
	var win_h = $(window).height();
	var win_w = $(window).width();
	var clnt_h = loadingBarBack.height();
	var clnt_w = loadingBarBack.width();
	var bar_h = scrltop + ((win_h - clnt_h) / 2);
	var bar_w = (win_w - clnt_w) / 2;

	loadingBarBack
		.css("top", bar_h)
		.css("left", bar_w)
		.show();
}


//로딩바 숨기기
function hideLoadingBar()
{
    var loadingBarBack = jQuery("#loadingBarBack").hide();
}


// 권리구분 선택 여부
function isCheckCollection(collectionCheckBoxForm, SearchPara)
{

    //ws080826 국가선택 체크박스 추가 (중국공개,공고)
    var flag = true;
    for(var j=0; j < collectionCheckBoxForm.COLLECTION_TOP.length; j++){
        if(collectionCheckBoxForm.COLLECTION_TOP[j].checked){
            flag = false;
            break;
        }
    }

/* ws080826 국가추가 중국공개,공고
    if (collectionCheckBoxForm.COLLECTION[0].checked == false &&
        collectionCheckBoxForm.COLLECTION[1].checked == false &&
        collectionCheckBoxForm.COLLECTION[2].checked == false &&
        collectionCheckBoxForm.COLLECTION[3].checked == false &&
        collectionCheckBoxForm.COLLECTION[4].checked == false)
    {
*/
    if(flag){
        alert("국가를 선택해 주시기 바랍니다.");
        return false;
    }
    else
    {
        var collectionCheckBoxStr = "";

        // 권리구분을 하나의 문자열로 만든다.
        for (var i=0; i<collectionCheckBoxForm.COLLECTION_TOP.length; i++)
        {
            if (collectionCheckBoxForm.COLLECTION_TOP[i].checked == true) {
                collectionCheckBoxStr += collectionCheckBoxForm.COLLECTION_TOP[i].value + ",";
            }
        }

        SearchPara.collectionValues.value = collectionCheckBoxStr;
        return true;
    }
}

/////////////////////////////////// 결과리스트 관련 ///////////////////////////////////
//대표도면 big Size
var bigFrontDraw = null;
function OpenFrontDrawPop(publ_key, cntry)
{

    //이용현황 통계 추가 by2018.07.26
     SaveOpsvcData('KR', 'ABPAT', 'OPSVC', 'IMZM');
     
    if (bigFrontDraw == null || bigFrontDraw.closed)
    {
    	// 1. contents : 팝업창 위치 일원화 작업에 따른 위치 변경 (20191108)
    	// 2. author : jihoo       
    	//bigFrontDraw = window.open("/abpat/biblio/biblioFrontDrawPop.jsp?publ_key="+publ_key+"&cntry="+cntry, "bigFrontDraw", "width=1024, height=768, left=10, top=10, resizable=yes, scrollbars=yes, status=yes");
        bigFrontDraw = newPopupWindow("/abpat/remoteFile.do?method=bigFrontDraw&publ_key="+ publ_key+"&cntry="+ cntry, "bigFrontDraw", 1024, 768, "R", "M", "resizable=yes, scrollbars=yes, status=yes");
        bigFrontDraw.focus();
    }
    else
    {
        bigFrontDraw.close();
     	// 1. contents : 팝업창 위치 일원화 작업에 따른 위치 변경 (20191108)
    	// 2. author : jihoo
		// bigFrontDraw = window.open("/abpat/remoteFile.do?method=bigFrontDraw&publ_key="+ publ_key+"&cntry="+ cntry, "bigFrontDraw", "width=1024, height=768, left=10, top=10, resizable=yes, scrollbars=yes, status=yes");
        bigFrontDraw = newPopupWindow("/abpat/remoteFile.do?method=bigFrontDraw&publ_key="+ publ_key+"&cntry="+ cntry, "bigFrontDraw", 1024, 768, "R", "M", "resizable=yes, scrollbars=yes, status=yes");
        bigFrontDraw.focus();
    }

}

//-->
</script>
<script>
<!--
var sSearchT =""; // ResultList.jsp에서 SearchInTransCk 값 가져올때 저장하는 변수 2008/05/02
var maxBookMark = 50;		// 최대 가능한 북마크 수


/////////////////////////////////// 재검색 관련 ///////////////////////////////////

//ie8
function SearchKeyEvent(evt)
{
    var e = new xEvent(evt);
    if (e.keyCode != 13) return;

    var element = e.target;
    if(!element) return;

   //fireFox 일때 처리
    if(xFF){
    var evnt = document.createEvent("KeyboardEvent");
    evnt.initKeyEvent(
                     "keyup",        //  in DOMString typeArg,
                      true,             //  in boolean canBubbleArg,
                      true,             //  in boolean cancelableArg,
                      null,             //  in nsIDOMAbstractView viewArg,  Specifies UIEvent.view. This value may be null.
                      false,            //  in boolean ctrlKeyArg,
                      false,            //  in boolean altKeyArg,
                      false,            //  in boolean shiftKeyArg,
                      false,            //  in boolean metaKeyArg,
                       39,               //  in unsigned long keyCodeArg,
                       0);              //  in unsigned long charCodeArg);

    element.dispatchEvent(evnt);
    }
    DoSearch();
}

function CheckOnload()  //페이지 로딩 시 특허/실용, 출원/등록상태 체크 2007/10/15
{
    var form = document.SearchPara;
    var queryText = form.queryText.value;
/*
    //특실선택 여부 2007/10/31 변경
    form.gubn[0].checked = true ;
    form.gubn[1].checked = true ;
    if (
    if (queryText.indexOf("{CLS=P}") != -1)         form.gubn[1].checked = false ;
    else if (queryText.indexOf("{CLS=U}") != -1)    form.gubn[0].checked = false ;

    //최종처분 선택 여부 2007/10/31 변경
    if (queryText.indexOf("{LST=J}") != -1) //거절
         form.hangjung[1].selected = true  ;
    else if (queryText.indexOf("{LST=R}") != -1) //등록
         form.hangjung[2].selected = true  ;
    else if (queryText.indexOf("{LST=F}") != -1)  //소멸
        form.hangjung[3].selected = true  ;
    else if (queryText.indexOf("{LST=I}") != -1)  //무효
         form.hangjung[4].selected = true ;
    else if (queryText.indexOf("{LST=C}") != -1)  //취하
         form.hangjung[5].selected = true ;
    else if (queryText.indexOf("{LST=G}") != -1)  //포기
         form.hangjung[6].selected = true ; */
}

function CheckSearchInResult(Object)
{
    var form = document.SearchPara;
    var expression = form.expression.value;
    var userInput = form.userInput.value; //2008/05/26
    var queryText = form.queryText.value;

     if (Object.checked)
    {
        if (queryText == userInput)    form.queryText.value = "";
    }
}

function ChangeSearchField()
{
    var form = document.SearchPara;

    form.queryText.value = "";
    //form.searchInResult.checked = false;
}


// 한글이 입력됐는지 검사
function isHangul(query)
{
    for(i=0;i<query.length;i++)
    {
       var a=query.charCodeAt(i);
       if (a > 128)
       {
       //ws080711 alert('해외특허검색은 한글로 검색할 수 없습니다.');
       alert('일본(JP)만 선택하거나 검색어 확장이 선택된 경우에만 한글로 검색할 수 있습니다.');
       return false;
       }
    }

    return true;
}

function DoTransSearch(trans)
{
	if(jQuery("#SEL_PAT", jQuery("#divSearchItems")).val() != "ABPAT")
	{
		alert("해외특허에 대한 검색에서만 사용하실 수 있습니다.");
		return;
	}
	jQuery("#transFlag", jQuery("#divSearchItems")).val(trans);

	var artPost = getPostAllData("divSearchItems");
	artPost.nowTab = jQuery("#nowTab", jQuery("#divSearchItems")).val();
    AjaxResultLoad("/abpat/resulta.do", artPost);

    jQuery("#transFlag", jQuery("#divSearchItems")).val("NO");
}


function DoSearch()
{
    //검색시 북마크를 초기화 시킨다. by lhy 2013.02.27
    jQuery("#FROM", jQuery("#divSearchItems")).val("");
    jQuery("#NWBOOKMARK", jQuery("#divSearchItems")).val("");
    //[선택하기]로 버튼 초기화 By J.H.S 20130910
    jQuery("#showOnlyCheckArticleBtnContainer").show() ;
    jQuery("#showAllCheckArticleBtnContainer").hide() ;
    
    var form = document.SearchPara;
    var queryText = form.queryText.value;
    //var qField = form.searchField.value; //Result 유저 <= searchField 선택이 없으므로 우선 키워드검색 처리 2012.09.17 bhhan
    var qField = "KW";
    var userInput = form.userInput.value; // 유저입력 저장 2008/05/26
    var beforeQry = form.expression.value;
    var tmpValue =  form.queryText.value; // 2008/04/23 테스트용
    //var elsevalue = ""; //특허실용 선택 여부 확인 2007/10/30
    //var lastvalue = ""; //행정처분 선택 여부 확인 2007/10/30
    var qnx      = 0;
    var srchForm = document.SearchItemForm;

    var txtareaStat = jQuery("#divKeywordTextarea", jQuery("#divSearchItems")).css("display");
    queryText = (txtareaStat == "none") ? queryText : form.keywordTextarea.value;
    // 분류통계정보 초기화
    form.piSearchYN.value = "N";
    form.piField.value="";
    form.piValue.value="";
    
    //By J.H.S 정렬선택 후 정렬값 선택하지 않을경우 추가.
    ////////////////////////////////////////////////
    // 2단계 정렬 추가
    // 2012.10.05 bhhan
    var sort1 = jQuery("#sortField1").val();
    var sort2 = jQuery("#sortField2").val();
    var sortstat1 = jQuery("#sortState1").val();
    var sortstat2 = jQuery("#sortState2").val();

    if( (sort1 != "" && sortstat1 == "") || (sort2 != "" && sortstat2 == "") )
    {
            alert("정렬방법이 선택되지 않았습니다.");
            return;
    }
    //////////////////////////////////////////////////
    
    //By J.H.S 20131112 [펼치기]후 검색버튼 눌렀을때 [펼치기 닫고] 검색되게 함
    if($("#divKeywordTextarea", $("#divSearchItems")).css("display") == "block"){
        $("#btnKeywordareaClose").click();
        queryText = form.queryText.value;
    }
    //By J.H.S 20140103 검색어 입력후 검색 했을때, searchExpression 검색어 저장기록.
    jQuery("#searchExpression").val(jQuery("#queryText").val());

    if( !isCheckCollection(document.frmNationSel, form) )
        return ;
/*
 	탭 없어짐.. 2012.10.08 bhhan
    else
    	theForm.isTabSearchAgain.value = '1';

	form.nowTab.value = ""; // 탭 없어짐..
*/

//	var nowTab = srchForm.rdoNowTab;
//	form.nowTab.value = nowTab[0].checked == true ? nowTab[0].value : nowTab[1].value;

   	var collectionCheckBoxs = document.frmNationSel.COLLECTION_TOP;

	if(form.SEL_PAT.value == "ABPAT")	// 해외특허 검새인 경우
	{
	    //ws081230 일본체크 한글 검색가능하게 (일본어전문을 한글전문으로 작업)
	    // 장문석 20110825
	    // 일본이 선택된 상태에서 다흔 국가를 선택할 경우 다른 국가에 대해서도 한글 검색이 가능함으로 이를 방지하고자 else if~ 추가
	    // '일본 + 다른 국가'를 선택한 상태에서 검색어 확장시는 예외
            
           /* By J.H.S 20140120 euc-kr -> uni/ko loacle 전환함에 따른 한글검색 지원설정으로 인한 스크립트 제한 해제. 
	   if (collectionCheckBoxs[3].checked == false){     //By J.H.S 20130823 국가선택 일본의 6번째에서 4번째로 위치변경으로 배열 인덱스 5 -> 3으로 변경
	        //ws080711 한글-영어(검색어확장) 체크해제시 한글을 사용못하게
	       if(form.searchInTransCk.checked == false){
	            if (!isHangul(tmpValue))
	               return;
	        }
	    }
	    else if (collectionCheckBoxs[0].checked == true || collectionCheckBoxs[1].checked == true || collectionCheckBoxs[2].checked == true || 
	                collectionCheckBoxs[4].checked == true || collectionCheckBoxs[5].checked == true || collectionCheckBoxs[6].checked == true ||
	                collectionCheckBoxs[7].checked == true || collectionCheckBoxs[8].checked == true || collectionCheckBoxs[9].checked == true ||
	                collectionCheckBoxs[10].checked == true || collectionCheckBoxs[11].checked == true ) {
	           if(form.searchInTransCk.checked == false){
                        if (!isHangul(tmpValue))
                            return ;
                   }
	    }
            */
	}

    //ws080711 모음,자음 체크
    if(!checkKoreanOnly(tmpValue)) return;

    //다른권리에서 한글-영어 선택 후 진입시 searchPara에 searchB.getSearchInTransCk 값이 Y면 checked
    if (form.searchInTransCk.checked || form.searchInTrans.value == "Y") {         //2008/05/02 한영 번역 부분 check값 추가
         form.searchInTrans.value = "Y";
         form.searchInTransCk.value = "Y";
         //form.searchInTransCk.value = "Y";
         form.searchInTransCk.checked = true;
     }  else  {

         form.searchInTrans.value = "N";
          form.searchInTransCk.value = "N";
         //form.searchInTransCk.value = "N";
         form.searchInTransCk.checked = false;
    }
    
    form.next.value = document.listForm.next.value;     //재검색부분 include 관련 수정  2007/10/30 추가

    // 특실 종류 선택 여부를 Check   2007/10/30 함수로 변경 Searchcom.js
    //var  elseFlag = CheckKind(form);
    //  if ( elseFlag != false ) elsevalue = elseFlag;
    //else return;

    //행정처분 선택   2007/10/30 함수로 변경 Searchcom.js
    //  lastvalue = CheckLast(form);

    if (form.expression.value != form.beforeExpression.value)
    {     
    	form.beforeExpression.value = form.expression.value;    
    }

    if (!queryText)
    {
        alert("검색어를 입력하십시오.");
        return;
    }

            //By J.H.S 20131022 검색상단 placeholder 숨김
            //$('#ol_queryTextlabel').css('visibility','hidden');
            
            /*
            By K.S.M 2019.03.20 주민번호 입력 시 마스킹 처리를 위해 주석처리
            //By J.H.S 2015.03.13 입력된 숫자가 "숫자-숫자 형식일경우" 대쉬 제거
            var regExpRegNum1 = /\d{1,}-\d{1,}/;    
            if(regExpRegNum1.test(queryText)){
                queryText = queryText.replace("-","");
                //form.queryText.value = queryText;
            }
            */
            //By J.H.S 2015.03.13 입력된 숫자가 "숫자-숫자-숫자 형식일경우" 대쉬 제거
            var regExpRegNum1 = /\d{1,}-\d{1,}-\d{1,}/;    
            if(regExpRegNum1.test(queryText)){
                queryText = queryText.replace("-","");
            }

            queryText = ReplaceSpecialStr(queryText);

           //검색식 처음과 끝 공백 , 엔터값 제거, 연산자 기호 변환 2007/11/08 수정 edgeExtrim(Searchcom.js)
           //if( (queryText= edgeExtrim(queryText)) == false)  return false;
           if( (queryText= edgeExtrim(queryText)) == false)  return ;

             //콤마, @, 괄호, [] 갯수 등 체크 checkVaild (Searchcom.js)
            //if( checkVaild( queryText ) != true ) return false;
             if( checkVaild( queryText ) != true ) return;

            //구문연산(" ")이 아닌경우 KW, TL, AB, CL 중간공백을 * 연산자로 변환 2007/11/09 수정
            if( qField == "KW" || qField == "TL" || qField == "AB" || qField == "CL"  )
            {
            /*exTrim 함수 수행시 공백이 모두 제거되어 공백을 *로 치환하지 못하는 문제 발생으로 공백을 *로 치환 후 exTrim 함수 수행하도록 순서 변경 by 2016.03 Jak
            변속+클러치 "데이터 신호" --> 변속+클러치"데이터 신호" (X) , 변속+클러치*"데이터 신호" (O)
           */
           // alert("2<"+queryText+">");
                queryText = removeOperatorBlank( queryText );
             //   alert("3<"+queryText+">");
                
               //구문연산의 경우 앞뒤 공백제거
                if(queryText.indexOf('\"') != -1){
                    //alert("1<"+queryText+">");
                   if( (queryText = exTrim(queryText)) == false)
                           return false;
                }
                
            }
            else
            {    //\n, CR, LF SPACE 제거 (구문검색의 공백은 제외)
                if( (queryText = exTrim(queryText)) == false)
                       return false;

                   //ws080711 한글이 입력됐는지 검사
                    for(i=0;i<tmpValue.length;i++) {
                       var a=tmpValue.charCodeAt(i);
                       if (a > 128){
                            alert('자유검색, 요약(AB), 청구범위(CL), 발명의 명칭(TL) 만 한글 검색이 가능합니다.');
                            return false;
                       }
                    }//end for
            }
            //By J.H.S 20130823 국가선택 일본의 6번째에서 4번째로 위치변경으로 배열 인덱스 5 -> 3으로 변경
            if( (collectionCheckBoxs[3].checked == true) & (qField == "KW") & ((queryText.indexOf("PN=[")>=0) || (queryText.indexOf("AN=[")>=0) || (queryText.indexOf("OPN=[")>=0) || (queryText.indexOf("GN=[")>=0)) ){
                var pnValue  = "";
                var anValue  = "";
                var opnValue = "";
                var gnValue  = "";
                var pnYr     = "";
                var anYr     = "";
                var opnYr    = "";
                var gnYr     = "";
                var i = 0;

                var idxPn  = queryText.indexOf("PN=[");
                var idxAn  = queryText.indexOf("AN=[");
                var idxOpn = queryText.indexOf("OPN=[");
                var idxGn  = queryText.indexOf("GN=[");

                if (idxPn >= 0){
                    pnValue  = queryText.substring(idxPn  + 4, queryText.indexOf("]", idxPn));
                    pnYr = pnValue.substr(0,4);
                }
                if (idxAn >= 0){
                    anValue  = queryText.substring(idxAn  + 4, queryText.indexOf("]", idxAn));
                    anYr = anValue.substr(0,4);
                }
                if (idxOpn >= 0){
                    opnValue = queryText.substring(idxOpn + 4, queryText.indexOf("]", idxOpn));
                    opnYr = opnValue.substr(0,4);
                }
                if (idxGn >= 0){
                    gnValue  = queryText.substring(idxGn  + 4, queryText.indexOf("]", idxGn));
                    gnYr = gnValue.substr(0,4);
                }

                // 숫자인자 확인
                if ((isNumber(pnValue)) || (isNumber(anValue)) || (isNumber(opnValue)) || (isNumber(gnValue))){
                    // 자릿수 확인
                    if ((pnValue.length == 10) || (anValue.length == 10) || (opnValue.length == 10) || (gnValue.length == 10)){
                        var nowYr = new Date().getFullYear();

                        if (pnYr > 1925 & pnYr <= nowYr )
                            i++;
                        if (anYr > 1925 & anYr <= nowYr )
                            i++;
                        if (opnYr > 1925 & opnYr <= nowYr )
                            i++;
                        if (gnYr > 1925 & gnYr <= nowYr )
                            i++;
                        if (i > 0)
                            alert("입력하신 번호는 일본식 연호로 변환하여 함께 검색합니다.");
                    }
                }
            }

            //번호 검색시  /, 공백 제거 후 검색
             if( qField == "IAN" || qField == "ION" || qField == "AN" || qField == "ON" || qField == "GN" || qField == "RN")
            {
                queryText = Replace( queryText, "/", "");
                queryText = Replace( queryText, " ", "");
            }

            //인명검색 절단검색 연산자 없애기
            if(qField == "AP" || qField == "AG" || qField == "IN" )
            {
              if( queryText.indexOf("?") != -1)
              {
                alert("절단자를 사용하실 수 없습니다.");
                queryText = Replace( queryText, "?", "");
                return;
              }
            }

            //일자 검색 확인
            // AD 출원일자  ||  OD 공개일자 ||  GD 등록일자 ||  PD 공고일자
            if( qField == "AD" || qField == "OD" || qField == "GD" ||  qField == "PD" || qField == "IDT" || qField == "IOD")
            {
                //~로 시작, 끝나는 일자 검색식 처리 2007/11/01
                if( (queryText.charAt(0) == "~")|| (queryText.charAt(queryText.length-1) == "~") )
                {queryText = checkPartDate( queryText ); }
                //일자 형식 확인
                if( !checkDateExpression( queryText ) )      return false;
                //19990101~20010101 형식으로 변환
                queryText = ConvertDateFormat( queryText );
                //변환된 검색식 체크
                if( queryText.length <= 0 )
                {
                    alert( " 자릿수는 년도포함 4자리, 월포함 6자리, 일자포함 8자리로 하셔야 합니다." );
                    return  false;
                }
            }

           if( qField == "RD")  //우선권 주장일자 제외 2008/04/24 변경
            {
                //YYYYMMDD의 형식으로 일자가 입력되었는지 확인
                if( queryText.length != 8 )
                {
                    alert( " 자릿수는 년도포함 4자리, 월포함 6자리, 일자포함 8자리로 하셔야 합니다." );
                    return  false;
                }
                //일자 형식 확인
                if( !checkDateExpression( queryText ) )      return false;
            }


              //검색식 조합
            if( qField == "KW" ) //KW일 경우 KW=[] 사용하지 않음
            {
               queryText = deleteSpecialChar(queryText, 'KW' ); //2007/11/23 추가

                if( (queryText = fCheckKeyWord(queryText)) != false ){
               }
                else return;
            }

    if (form.searchInResultCk.checked  && form.beforeExpression.value != "")
    {
        form.searchInResult.value = "Y";
/*
        //특실 체크 검색식 없애기
        beforeQry = Replace(beforeQry, "*{CLS=P}", "");
        beforeQry = Replace(beforeQry, "*{CLS=U}", "");
        //출원/등록상태 체크 검색식 없애기
        beforeQry = Replace(beforeQry, "*{LST=J}", "");
        beforeQry = Replace(beforeQry, "*({LST=R}+{LST=F})", "");
        beforeQry = Replace(beforeQry, "*{LST=F}", "");
        beforeQry = Replace(beforeQry, "*{LST=I}", "");
        beforeQry = Replace(beforeQry, "*{LST=C}", "");
        beforeQry = Replace(beforeQry, "*{LST=G}", "");
*/
//        beforeQry = DeleteCheckoption(beforeQry);
  //      form.beforeExpression.value = DeleteCheckoption(form.beforeExpression.value);

  //       userInput = userInput +" "+ queryText;
   //      form.userInput.value = userInput;
          //  alert("beforeQry"+beforeQry);
     //       alert("form.beforeExpression.value"+form.beforeExpression.value);
          if( qField != "KW"  ) { //2007/11/01 수정

                   if (beforeQry != form.beforeExpression.value) { //2008/06/02 재검색 건수0일때 검색식만들기 수정
                     form.expression.value = form.beforeExpression.value;
                     beforeQry = null;
                     beforeQry = form.expression.value;
                  }
              queryText = "(" + beforeQry + ")*("+ qField + "=[" + queryText + "])";

          } else {
                  if (beforeQry != form.beforeExpression.value) { //2008/06/02 재검색 건수0일때 검색식만들기 수정
                     form.expression.value = form.beforeExpression.value;
                     beforeQry = null;
                     beforeQry = form.expression.value;
                  }
              queryText = "(" + beforeQry + ")*("+ queryText + ")";
          }
    }
    else
    {
        //form.searchInResult.value = "N";    <= searchInResult가 없으므로 우선 주석처리 함.. 2012.09.17 bhhan


            if( qField != "KW"  ) {//2007/11/01 수정

               queryText = qField + "=[" + queryText + "]";
             } else {
                queryText = queryText;
            }
    }

    if (beforeQry != form.beforeExpression.value) { //2008/06/02 재검색 건수0일때 검색식만들기 수정
                     form.expression.value = form.beforeExpression.value;
                     beforeQry = null;
                     beforeQry = form.expression.value;
                     form.expression.value = form.beforeExpression.value;;    //특허실용 선택 여부 확인 관련 2007/10/30
    }
    
    form.queryText.value = queryText;
    form.expression.value = queryText;    //특허실용 선택 여부 확인 관련 2007/10/30
    
    // 상단검색시 스마트검색의 항목 초기화
    $("#btnClearSmartFinder").click();
    
    // 상단검색의 검색어를 스마트검색의 단어검색 필드에 넣어줌
   jQuery("#KW", jQuery("#divSmartFinder")).val(queryText);
//    if (!isHangul(queryText))
//        return false;
    //form.sortField.value = "";
    //form.sortState.value = "";
    form.BOOKMARK.value = "";
    form.REBOOKMARK.value = "";
    form.currentPage.value = 1;
    form.FROM.value = "";  //책갈피 선택 초기화 //2007/11/01
    form.logFlag.value = "Y"; //ws080710 로그플래그
    form.strstat.value = srchpos + "|" + "KW";
    //form.action = "/fpat11/resulta.do";
    //form.submit();

    //By J.H.S 20140807 스마트검색시 검색히스토리에 남김 추가.
    //웹취약점 조치를 위해 < , > 문자 제거 
    appendSearchKeywordHistory(ABPAT_SRCH_HISTRY_KEY, queryText.replace(/</gi,"").replace(/>/,""), 10) ;
    setSearchKeywordHistoryBoard() ;

	var url = getSelectPatUrl();
    if(url.indexOf("/abpat/resulta.do") >= 0)	// 원래 해외특허 검색인 경우 Ajax처리
    {
        var artPost = getPostAllData("divSearchItems");
	    AjaxResultLoad(url, artPost);
	   	getCtryCntList(artPost);

    }
    else							// 권리를 바꿔서 검색할 경우에는 폼을 전송한다.
    {
    	$('#searchKeyword').val($('#queryText').val());
        form.action = url;
        form.method = "POST";
    	form.submit();
    	showLoadingBar();
    }

   	hideSmartFinder();	// 스마트 파인더 감추기
    
        /* place holder 관련 부분 적용*/
        //showplaceholder();
}

/////////////////////////////////// 간략리스트 관련 ///////////////////////////////////

var fileCheckTrans = null;          // 번역 링크 팝업 객체

// 번역 링크 팝업 열기
function goFileCheckTrans(appl, pub_reg, fp,ANLIST, PKLIST)
{

    //실서버
    var url = 'http://kpa.kipris.or.kr/kpa/trsv2000a.do?AN='+appl+'&PK='+pub_reg+'&ANLIST='+ANLIST+'&PKLIST='+PKLIST+'&FP='+fp;
    if( fileCheckTrans ) 	{  fileCheckTrans.close(); }
    fileCheckTrans = window.open(url ,'fileCheckTrans', 'status=yes,  width=960, height=734 , status=yes, scrollbars=no, resizable=no, menubar=no');

    return;
}

// 서지사항 팝업창 열기
function openDetail(publ_key, popno, collections, index, start, cntry, openPageId)
{
	var searchpara = document.SearchPara;
    var theForm = document.biblioF;


    theForm.publ_key.value = publ_key;
    theForm.popno.value = popno;
    theForm.index.value = index;
    theForm.start.value = start;
    theForm.cntry.value = cntry;
    theForm.searchFg.value = "Y";

    theForm.openPageId.value = openPageId;
    theForm.expression.value = searchpara.expression.value;
    theForm.sortField1.value = searchpara.sortField1.value;
    theForm.sortField2.value = searchpara.sortField2.value;
    theForm.sortState1.value = searchpara.sortState1.value;
    theForm.sortState2.value = searchpara.sortState2.value;
    theForm.searchInTrans.value = searchpara.searchInTrans.value;
    theForm.currentPage.value = searchpara.currentPage.value;
    theForm.numPerPage.value = searchpara.numPerPage.value;
    theForm.FROM.value = searchpara.FROM.value;
    theForm.BOOKMARK.value = searchpara.BOOKMARK.value;
    //분류통계 제공 202205
    theForm.piSearchYN.value = searchpara.piSearchYN.value;
    theForm.piField.value = searchpara.piField.value;
    theForm.piValue.value = searchpara.piValue.value;

    var expr = theForm.expression.value;
    if(expr.indexOf("\"") >= 0)
    {
    	theForm.expression.value = expr.replace(/\"/g, "&#34;"); //상세보기 창 볼때 ex)"4d" 검색시 servlet에서 ?d로 처리 되는 현상 수정. By J.H.S 20130704
    }

    if (collections == null || collections == "" || collections == "all")
        theForm.collectionValues.value = "US_T.col, EP_T.col, WO_T.col, PAJ_T.col, CN_T.col, GB_T.col,DE_T.col, FR_T.col,AU_T.col, CA_T.col, RU_T.col, TA_T.col, AT_T.col, DK_T.col, IL_T.col, ES_T.col,PT_T.col, PH_T.col, CH_T.col, PL_T.col., SE_T.col, SI_T.col, CO_T.col, EA_T.col, RS_T.col";
    else
        theForm.collectionValues.value = collections;

    biblioOpen();

}

// 서지사항 팝업창 열기
function openDetailRcntly(publ_key, popno, collections, index, start, cntry, openPageId)
{
    var searchpara = document.SearchPara;
    var theForm = document.biblioF;


    theForm.publ_key.value = publ_key;
    theForm.popno.value = popno;
    theForm.index.value = index;
    theForm.start.value = start;
    theForm.cntry.value = cntry;
    theForm.searchFg.value = "N";

    theForm.openPageId.value = openPageId;
    theForm.expression.value = searchpara.expression.value;
    theForm.sortField1.value = searchpara.sortField1.value;
    theForm.sortField2.value = searchpara.sortField2.value;
    theForm.sortState1.value = searchpara.sortState1.value;
    theForm.sortState2.value = searchpara.sortState2.value;
    theForm.searchInTrans.value = searchpara.searchInTrans.value;
    theForm.currentPage.value = searchpara.currentPage.value;
    theForm.numPerPage.value = searchpara.numPerPage.value;

    if (collections == null || collections == "" || collections == "all")
        theForm.collectionValues.value = "US_T.col, EP_T.col, WO_T.col, PAJ_T.col, CN_T.col, GB_T.col,DE_T.col, FR_T.col,AU_T.col, CA_T.col, RU_T.col, TA_T.col, AT_T.col, DK_T.col, IL_T.col, ES_T.col,PT_T.col, PH_T.col, CH_T.col, PL_T.col., SE_T.col, SI_T.col, CO_T.col, EA_T.col, RS_T.col";
    else
        theForm.collectionValues.value = collections;

    biblioOpen();

}

// 서지사항 팝업창 열기
function openMyFolderDetail(applno, index, applnoLinks, start, numPerPage)
{
    theForm = document.biblioF;
    theForm.applno.value = applno;
    theForm.index.value = index;
    theForm.applnoLinks.value = applnoLinks;
    theForm.start.value = start;
    theForm.numPerPage.value = numPerPage;
    biblioPatOpen();
}



// 검색항목설정 버튼 클릭시(검색항목이 열리거나 닫힐 경우) title 속성을 수정함
function changeTitle(btnObj)
{
    var searchItem = document.getElementById('searchItem' ); //searchItem 선택
    if (searchItem.style.display == "")
        btnObj.title = "검색항목을 설정합니다. 버튼을 클릭하시면 검색항목 설정 창이 열립니다. ";
    else
        btnObj.title = "검색항목을 설정합니다. 버튼을 클릭하시면 검색항목 설정 창이 닫힙니다. ";
}

// 결과항목설정 버튼 클릭시(검색항목이 열리거나 닫힐 경우) 버튼 이미지 교체와 title 속성을 수정함
function changeResultTitle(btnObj)
{
    var searchItem = document.getElementById('searchItem' ); //searchItem 선택
    if (searchItem.style.display == "")
    {
        btnObj.title = "결과항목을 설정합니다. 버튼을 클릭하시면 결과항목 설정 창이 열립니다.";
        //btnObj.style.background = "url(/fpat11/image/KP_re/btn/btn_result_setting_open.gif) no-repeat 0 0";
        btnObj.style.background = "url(/abpat/images/KP_re/btn/btn_result_setting_open.gif) no-repeat 0 0";
    }
    else
    {
        btnObj.title = "결과항목을 설정합니다. 버튼을 클릭하시면 결과항목 설정 창이 열립니다.";
        //btnObj.style.background = "url(/fpat11/image/KP_re/btn/btn_result_setting_close.gif) no-repeat 0 0";
        btnObj.style.background = "url(/abpat/images/KP_re/btn/btn_result_setting_close.gif) no-repeat 0 0";
    }
}

// 통합검색에서 고급검색입력창보기 버튼 클릭시(검색항목이 열리거나 닫힐 경우) title 속성을 수정함
function changePortalResultTitle(btnObj)
{
    var searchItem = document.getElementById('input_detail' ); //searchItem 선택
    if (searchItem.style.display == "")
        btnObj.title = "버튼을 클릭하시면 고급검색입력창이 열립니다.";
    else
        btnObj.title = "버튼을 클릭하시면 고급검색입력창이 열립니다.";
}

//환경설정
function GetConfig(config)
{
    //"012345678901234567890123456789012345678901*/
    //G1111111111111111111111S111111111111111111//

    // fieldCheckForm이 cbSearchItem(checkbox)까지 변수설정이 되어있는데 아래코드에서는 cbSearchItem를 한번 더 호출해서 크롬, 파이어폭스에서 작동안함.
    // 아래코드를 주석처리하고 form까지만 변수로 설정함. 2012.06.18
    // var fieldCheckForm = document.fieldCheckF.cbSearchItem;
    var fieldCheckForm = document.fieldCheckF;

    //var newConfig = "A11";  //항목/일반(G/A) + 자유검색(1) + 발명의 명칭(1)
    var newConfig = "";

    for (var i = 0; i < fieldCheckForm.cbSearchItem.length; i++)
    {
        // form아래 엘리먼트 탐색시 배열에는 ()가 아니라 []를 써야 ie외 타 브라우저에서 작동함. 2012.06.18
        //if (fieldCheckForm.cbSearchItem(i).checked)
        if (fieldCheckForm.cbSearchItem[i].checked)
            newConfig += "1";
        else
            newConfig += "0";
    }

    newConfig = config.substr( 0, config.indexOf('S')+1 ) + newConfig + "0";

//alert("########################### newConfig : " + newConfig);

    return newConfig;
}

// 정렬 변경 2008/05/02
function setSort(field, SearchT)
{
    var theForm = document.SearchPara;

    theForm.sortField.value = field;

    if (theForm.sortState.value == "Desc")
        theForm.sortState.value = "Asc";
    else
        theForm.sortState.value = "Desc";

    setRefresh(SearchT);
}

// 새 탭을 선택시에 선택한 탭으로 이동
function toTabMove(newTab, SearchT)
{
    var form = document.SearchPara;
    sSearchT = SearchT;

    form.nowTab.value = newTab;

    if( form.searchInTransCk.checked == true ) {
        if (sSearchT == "N") {
         form.searchInTrans.value = "N";
         form.searchInTransCk.value = "N";
        } else {
        form.searchInTrans.value = "Y";
        form.searchInTransCk.value = "Y";
        }
    }

    if ( form.searchInTransCk.checked == false) {   // 2008/05/02 한글-영어(검색어확장) 체크부분
        if (sSearchT =="Y") {
        form.searchInTrans.value = "Y";
        form.searchInTransCk.value = "Y";
        } else {

        form.searchInTrans.value = "N";
         form.searchInTransCk.value = "N";
        }
    }

    //if (nextLink)
     //   form.next.value = nextLink;
    //form.currentPage.value = "1";  //페이지 및 책갈피 정보 기억위한 수정 2007/10/29
    form.sortField.value = "Score";
    form.sortState.value = "Desc";
    //form.FROM.value = "";
    //form.BOOKMARK.value = "";
    //form.REBOOKMARK.value = "";
    //form.action = "/fpat11/resulta.do";
    form.action = "/abpat/resulta.do";
    form.submit();

    showLoadingBar();               // 로딩 바 보이기
}

// 간략 초록/보기로 이동 2008/05/02
function toMove(nextLink, SearchT)
{
    var form = document.SearchPara;
   // var formList = document.biblioF;
    sSearchT = SearchT;

    //if (nextLink)
        form.next.value = nextLink;
   // form.currentPage.value = "1";  //페이지 및 책갈피 정보 기억위한 수정 2007/10/29
    form.sortField.value = "Score";
    form.sortState.value = "Desc";
    //form.FROM.value = "";
    //form.BOOKMARK.value = "";
    //form.REBOOKMARK.value = "";
    //form.action = "/fpat11/resulta.do";
    form.action = "/abpat/resulta.do";
    form.submit();

    showLoadingBar();               // 로딩 바 보이기
}

// 페이지당 레코드수 설정 후 해당 nextlink 로 이동 (통합검색에서 사용됨)
function setPageAndMove(nextLink)
{
    var form = document.SearchPara;

     if( form.searchInTransCk.checked == true ) {
        form.searchInTrans.value = "Y";
        form.searchInTransCk.value = "Y";
    }

    form.next.value = nextLink;
    form.numPerPage.value = "30";
    //form.currentPage.value = "1";  //페이지 및 책갈피 정보 기억위한 수정 2007/10/29
    //form.sortField.value = "Score";
    //form.sortState.value = "Desc";
    //form.FROM.value = "";
    //form.BOOKMARK.value = "";
    //form.REBOOKMARK.value = "";
    //form.action = "/fpat11/resulta.do";
    form.action = "/abpat/resulta.do";
    form.target = "_self";
    form.submit();
}

// 조회항목 수정 후 화면에 적용 2008/05/02
function setRefresh(SearchT)
{
    var form = document.SearchPara;
    var config = form.config.value;
    var newConfig = GetConfig(config);

    if (config != newConfig)
    {
        form.configChange.value = "Y";
        form.config.value = newConfig;
    }
    else
    {
        form.configChange.value = "N";
    }

    sSearchT = SearchT;

     if( form.searchInTransCk.checked == true ) {
        if (sSearchT == "N") {
         form.searchInTrans.value = "N";
         form.searchInTransCk.value = "N";
        } else {
        form.searchInTrans.value = "Y";
        form.searchInTransCk.value = "Y";
        }
    }

    if ( form.searchInTransCk.checked == false) {   // 2008/04/30 한글-영어(검색어확장) 체크부분
        if (sSearchT =="Y") {
        form.searchInTrans.value = "Y";
        form.searchInTransCk.value = "Y";
        } else {

        form.searchInTrans.value = "N";
         form.searchInTransCk.value = "N";
        }
    }

    form.next.value = document.listForm.next.value;     //재검색부분 include 관련 수정  2007/10/30 추가
    //form.action = "/fpat11/resulta.do";
    form.action = "/abpat/resulta.do";
    //form.FROM.value = "";
    //form.BOOKMARK.value = "";
    //form.REBOOKMARK.value = "";
    form.submit();

    showLoadingBar();               // 로딩 바 보이기
}

// 검색목록에서 필드를 선택하는 체크박스가 몇개 선택되었는지를 알아낸다
function getCheckCount()
{
    var checkedcnt =0;
    var checkObjectArray = document.fieldCheckF.cbSearchItem;

    for (var i=0; i<checkObjectArray.length; i++)
    {
        if (checkObjectArray[i].checked == true)
            checkedcnt++;
    }

    return checkedcnt;
}

// 검색목록필드를 6개까지만 선택할 수 있게 한다
function setEnvironment( obj )
{
//    if( getCheckCount() > 6 )
    if (false) // 검색목록필드 선택 제한을 해제한 상태
    {
        alert( "검색항목은 최고 6개까지 선택할 수 있습니다.");
        obj.checked = false;
        return ;
    }
//     setCookie();

    var val = obj.value;     //항목설정 중 클릭된 항목 checkbox
    if (obj.checked)  // 항목을 설정할 경우 항목에 해당하는 국가선택이 선택되어 있는지 여부검사
    {
        if (!chkResultItem(val))
        {
            obj.checked = false;
            return;
        } else {
            obj.checked = true;
            return;
        }
    }
}

//var F_FI   =  2;  // FI(FI)
//var F_FT   =  3;  // F-TERM(FT)
//
//var C_US   =  0;  //미국
//var C_EP   =  1;  //유럽
//var C_WO   =  2;  //WO
//var C_PAJ  =  3;  //일본
//var C_CN   =  4;  //중국
//var C_GB   =  5;  //영국
//var C_DE   =  6;  //독일
//var C_FR   =  7;  //프랑스
//var C_AU   =  8;  //호주
//var C_CA   =  9;  //캐나다
//var C_RU   = 10;  //러시아
//var C_TW   = 11;  //대만
//function chkResultItem( val )
//{
//    var theForm = document.SearchPara;  //국가 들어간 순서 파악. COLLECTION
//    var temp_searchTab = theForm.nowTab;       // 국가선택 체크박스 배열
//    var searchTab = temp_searchTab.value;
//
//    // 일본에 관련된 체크박스인 경우
//    if (val == F_FI || val == F_FT)  // 2.FI, 3.F-TERM
//    {
//        if (searchTab == "all" || searchTab == "PAJ_T.col")
//        {
//            return true;
//        } else {
//            alert("해당항목은 전체보기 또는 일본에 대한 검색결과에서 선택가능합니다.");
//            return false;
//        }
//    }
//}

//ws080711 잘못입력된 '모음' '자음' 검증  예) "휴ㄴ대폰",  "자동ㅇ차",   "ㄱㄴㄷ"
function checkKoreanOnly( obj ) {
   var c;
   if ( obj == null ) return false ;

   for(var i=0; i < obj.length; i++){
     c = obj.charCodeAt(i);
     //( 0xAC00 <= c && c <= 0xD7A3 ) 초중종성이 모인 한글자
     //( 0x3131 <= c && c <= 0x318E ) 자음 모음

     if( 0x3131 <= c && c <= 0x318E ) {
        //obj.charAt(i)
        alert("단어의 철자가 정확한지 확인해 주십시오");
        return false ;
     }
   }//end for

   return true ;
}

//최종 검색 함수 submit
function DoGeneralSearch()
{
    var theForm = document.SearchPara;


    if( theForm.searchInTransCk.checked == true ) {
        theForm.searchInTrans.value = "Y";
        theForm.searchInTransCk.value = "Y";
    }

    //theForm.action = "/fpat11/resulta.do";
    theForm.action = "/abpat/resulta.do";
    //form.target = "_new";       //test를 위해 새창에서 검색

    theForm.submit();

    //Loading.style.display="";
    showLoadingBar();               // 로딩 바 보이기
}

// 페이지당 레코드수 수정
function setNumPerPage(numPerPage)
{
    var theForm = document.SearchPara;
    var nextForm = document.listForm.next.value;

    theForm.next.value = nextForm;
    theForm.currentPage.value = 1;
    theForm.numPerPage.value = numPerPage;

    if(theForm.searchInTransCk != undefined && theForm.searchInTransCk.checked == true ) {
        theForm.searchInTrans.value = "Y";
        theForm.searchInTransCk.value = "Y";
    }

    /*
    if(nextForm == "ResultList")	// 최초검색인 경우 검색 결과 페이지로 페이지를 전환한다.
    	theForm.submit();
    else							// 최초검색이 아닌경우 페이지전환 없이 ajax 처리한다. 2012.09.24 bhhan
    {
    	var artPost = getPostAllData("divSearchItems");
    	AjaxResultLoad("/abpat/resulta.do", artPost);
    }

    hideSmartFinder();				// 스마트 파인더 감추기
    */

    DoSearch();
}

// 페이지 링크 이동
function SetPage(page)
{
    document.SearchPara.currentPage.value = page;
    document.SearchPara.next.value = document.listForm.next.value;  //재검색부분 include 관련 수정  2007/10/29

    document.SearchPara.logFlag.value = "Y"; //ws080714 로그플래그

    DoGeneralSearch();              // 재검색을 위한 submit() 을 하는 함수 호출
}

/* 검색결과 열람 maxCount 값 설정 해줬을때 쓰는 스크립트 By J.H.S 20130626 */
function SetPageMoveLimit(page)
{
    var theForm = document.SearchPara;
    
    var SelectNumPerPage = theForm.numPerPage.value;
    
    var viewMaxPage = ((100000 % parseInt(SelectNumPerPage)) != 0) ? (parseInt(100000 / parseInt(SelectNumPerPage)) + 1) : parseInt(100000 / parseInt(SelectNumPerPage));
    
    //alert("검색결과 열람은 100,000건 까지만 할 수 있습니다.\n\n페이지당 "+ SelectNumPerPage + "개는 " + viewMaxPage + "페이지까지 볼 수 있습니다.");
    alert("검색서버 과부하로 인하여 열람 항목을 100,000건 이하로 제한하오니\n\n검색 조건을 추가 또는 변경하시어 검색하시기 바랍니다.");
}
//페이지 링크 이동 (ajax 처리)
function SetPageAjax(page)
{
        var theForm = document.SearchPara;

  	//theForm.piValue.value = 'null';
  	//theForm.piField.value = 'null';

  	//document.biblioF.currentPage.value = page;
  	theForm.currentPage.value = page;

  	theForm.next.value = document.listForm.next.value;  //재검색부분 include 관련 수정  2007/10/29

	// PISearch가 아니면 연도 / 분류별 파라미터값을 초기화한다. 202205
	
	if(theForm.piSearchYN.value != "Y")
	{
	 	theForm.piValue.value = "";
	 	theForm.piField.value = "";
	}

	if(theForm.searchInTransCk != undefined && theForm.searchInTransCk.checked == true ) {
	    theForm.searchInTrans.value = "Y";
	    theForm.searchInTransCk.value = "Y";
	}

  	var artPost = getPostAllData("divSearchItems");
	artPost.next = theForm.next.value;
	artPost.nowTab = theForm.nowTab.value;
  	AjaxResultLoad("/abpat/resulta.do", artPost);
        

        
}


//검색항목 레이어 관련
function DisplayResultItem()
{
    
            //var layerBtnObj = document.getElementById("tit_btn08");
            var searchItem = document.getElementById('searchItem' ); //searchItem 선택
            var sort = document.getElementById('sort' ); //searchItem 선택

           if (searchItem.style.display == "")
            {
                searchItem.style.display = "none";
                sort.style.top = "235";
                ABChoice.style.top = "235";
            }
            else
            {
                searchItem.style.display = "";
                sort.style.top = "395";
                ABChoice.style.top = "395";
            }
    
}

//통합검색에서 고급검색입력창 보기 버튼클릭시 고급검색입력창 보이거나 없애기
function DisplayTotalAdvanedSearchInput()
{
    var input_detail = document.getElementById('input_detail');             // 고급검색영역
    var search_write = document.getElementById('search_write');             // 통합검색영역

    if ( input_detail.style.display == "" )
    {
        input_detail.style.display = "none";
        search_write.style.display = "";
    }
    else
    {
        input_detail.style.display = "";
        search_write.style.display = "none";
    }
}

// 북마크를 위해 선택한 레코드(체크박스)에 대한 처리
function checkBoxInsert( obj )
{
    var lmt = document.SearchPara.numPerPage.value;
    if(lmt == null || lmt == "") lmt = 50;
    if( hiddencheckBoxInsert( obj.checked, obj.value) == false )
    {
        obj.checked = false;
        //ws080717 alert("북마크는 50개까지 입니다");
         alert("북마크는 "+ lmt +"개까지 입니다");
        return false;
    }
}

// 선택한 레코드(체크박스)에 대해서 북마크 실행함
function bookMark(SearchT)
{
    var form = document.SearchPara;

     sSearchT = SearchT;

     if( form.searchInTransCk.checked == true ) {
        if (sSearchT == "N") {
         form.searchInTrans.value = "N";
         form.searchInTransCk.value = "N";
        } else {
        form.searchInTrans.value = "Y";
        form.searchInTransCk.value = "Y";
        }
    }

    if ( form.searchInTransCk.checked == false) {   // 2008/04/30 한글-영어(검색어확장) 체크부분
        if (sSearchT =="Y") {
        form.searchInTrans.value = "Y";
        form.searchInTransCk.value = "Y";
        } else {

        form.searchInTrans.value = "N";
         form.searchInTransCk.value = "N";
        }
    }

    if( CHECKBOX_COUNT < 1 ){
        alert( "선택된 북마크가 없습니다");
        return;
    }
    if( form.FROM.value == "BOOKMARK" )
        form.BOOKMARK.value = form.REBOOKMARK.value;
    //alert("form.BOOKMARK.value    ::"+form.BOOKMARK.value);
    form.isTabSearchAgain.value = "1"; // 탭 다시 검색 추가 2008/05/08
    form.next.value = document.listForm.next.value;     //재검색부분 include 관련 수정  2007/10/30
    form.REBOOKMARK.value = "";
    form.FROM.value = "BOOKMARK";
    form.currentPage.value = "1";
    //form.action = '/fpat11/resulta.do';
    form.action = '/abpat/resulta.do';
    form.submit();
}


// 북마크로 이동후에 다시 이전화면으로
function showList()
{
    var form = document.SearchPara;

    if( form.searchInTransCk.checked == true ) {
        form.searchInTrans.value = "Y";
        form.searchInTransCk.value = "Y";
    }
    //alert("showList()  form.FROM.value   ======== "+ form.FROM.value);
    form.FROM.value = "";
   form.isTabSearchAgain.value = "1"; // 탭 다시 검색 추가 2008/05/08
    form.next.value = document.listForm.next.value;
    //form.action = "/fpat11/resulta.do";
    form.action = "/abpat/resulta.do";
    form.submit();
}

// 모든 체크박스를 선택하는 함수
function allCheck()
{
    var form = document.listForm;

    for (var i=0; i<form.elements.length; i++)
    {
        if (form.elements[i].type == "checkbox" && form.elements[i].name != "all")
        {
            form.elements[i].checked = form.all.checked;

            if( checkBoxInsert( form.elements[i] ) == false )
                return ;
        }
    }
}


// 모든 북마크를 해제 하는 함수
function initBookMark()
{
    //bookmark 변수 초기화, 화면에 보이는 checkbox풀고
    var form = document.SearchPara;
    form.BOOKMARK.value = "";

    CHECKBOX_COUNT = 0;

    var listForm = document.listForm;

    for (var i=0; i<listForm.elements.length; i++)
    {
        if (listForm.elements[i].type == "checkbox" && listForm.elements[i].name != "all")
        {
            listForm.elements[i].checked = false;
        }
    }
    //북마크리스트 화면인 경우 이전 화면으로 돌아가야 한다.
    if (form.FROM.value == "BOOKMARK")
    {
        showList();
    }
}


// 북마크에서 선택한 레코드의 체크박스는 문서로딩 후 선택되게 한다.
function checkViewCnt(checkcnt)
{
    var form = document.SearchPara
    var lstForm = document.listForm

   //ws080717 var arrBook = new Array(50);
    var lmt = form.numPerPage.value;
    if(lmt == null || lmt == "") lmt = 50;
    var arrBook = new Array(lmt);
    var k = 0;
    var u=0;

   //ws080717 for( j = 0 ; j < 50 ; j++)
    for( j = 0 ; j < lmt ; j++)
       arrBook[j] = "";


    while( k <  form.BOOKMARK.value.length )
    {
        //if(arrBook[] == "undefined")
        //    arrBook[i] = "";
        switch( form.BOOKMARK.value.charAt(k))
        {
            case '+':  u++;
            break;
            default:  arrBook[u] += form.BOOKMARK.value.charAt(k);

            break;
        }
        k++;
    }

    for( var k = 0; k< checkcnt; k++)
    {
        for( u =0; u < lstForm.elements.length; u++)
        {
            if( arrBook[k] == lstForm.elements[u].value )
            {
                lstForm.elements[u].checked = true;
                break;
            }
        }
    }

}

// 문서 로딩 완료 후 문서 초기화 함수
function init()
{

    if (document.SearchPara.FROM.value == "")
        checkViewCnt(CHECKBOX_COUNT);       // 북마크에서 선택한 레코드의 체크박스는 선택되게 한다.

    //scrollSendRequest();                // 통계와 인기검색어 스크롤 --> 이것은 아작스 방식으로 현재는 아이프레임 방식으로 하면서 사용하지 않음

    CheckOnload() //검색시 선택한 특허/실용, 출원/등록상태 체크  2007/10/31 변경
}

// 엑셀파일 다운로드
function excelFile()
{
    try
    {
        if(PAJ_exists_in_search_results)
            alert("다운로드시 일본(JP)는 제외됩니다.");
    }
    catch(e)        
    {
        
    }


    var theForm = document.SearchPara;
    var srchForm = document.frmNationSel;

    if( !isCheckCollection(srchForm, theForm) )
        return ;

    if( theForm.searchInTransCk.checked == true ) {
        theForm.searchInTrans.value = "Y";
        theForm.searchInTransCk.value = "Y";
    }
    if(theForm.queryText.value == "") {
    	alert("검색후 엑셀저장이 가능 합니다.");
    	theForm.queryText.focus();

        return ;
    }else{
    	//theForm.nowTab.value = "all";
    	theForm.method = "post";
    	theForm.action= "/abpat/excela.do?method=excelDown";    	
    }
    	theForm.submit();
}
/*
// 인쇄
function goPrint(idValue)
{
    var printArea = document.getElementById(idValue);


    printFrame.document.body.innerHTML += printArea.innerHTML;

    printFrame.focus();
    printFrame.print();
}
*/

// 북마크를 위해 선택한 레코드(체크박스)에 대한 처리
function hiddencheckBoxInsert( CheckYn, value )
{
    var form = document.SearchPara;

    if( form.FROM.value == "BOOKMARK" )
    {
      	form.REBOOKMARK.value = Replace(form.REBOOKMARK.value, "+" + value       , "");
        form.REBOOKMARK.value = Replace(form.REBOOKMARK.value,       value + "+" , "");
        form.REBOOKMARK.value = Replace(form.REBOOKMARK.value,       value       , "");

        if( CheckYn == true )
        {
            CHECKBOX_COUNT++;
            //ws080717 if( CHECKBOX_COUNT > maxBookMark )
            if( CHECKBOX_COUNT > form.numPerPage.value)
            {
                CHECKBOX_COUNT--;
                CheckYn = false;
                return false;
            }
            if( form.REBOOKMARK.value != "" )
                form.REBOOKMARK.value += "+" + value;
            else
                form.REBOOKMARK.value = value;
        }
        else
            CHECKBOX_COUNT--;
    }
    else
    {

        if( CheckYn == true )
        {
            if( form.BOOKMARK.value.indexOf( value ) != -1 )
            {
                CHECKBOX_COUNT--;
      	        form.BOOKMARK.value = Replace(form.BOOKMARK.value, "+" + value       , "");
                form.BOOKMARK.value = Replace(form.BOOKMARK.value,       value + "+" , "");
                form.BOOKMARK.value = Replace(form.BOOKMARK.value,       value       , "");
            }
            CHECKBOX_COUNT++;
            //ws080717 if( CHECKBOX_COUNT > maxBookMark )
            if( CHECKBOX_COUNT > form.numPerPage.value)
            {
                CHECKBOX_COUNT--;
                CheckYn = false;

                return false;
            }
            if( form.BOOKMARK.value != "" )
                form.BOOKMARK.value += "+" + value;
            else
                form.BOOKMARK.value = value;
        }
        else
        {
            if( form.BOOKMARK.value.indexOf( value ) != -1 )
            {
                CHECKBOX_COUNT--;
      	        form.BOOKMARK.value = Replace(form.BOOKMARK.value, "+" + value       , "");
                form.BOOKMARK.value = Replace(form.BOOKMARK.value,       value + "+" , "");
                form.BOOKMARK.value = Replace(form.BOOKMARK.value,       value       , "");
            }
        }
    }

    // 마이폴더를 위해 권리구분을 문자열로 저장
    form.natlCD.value = parseNatlCD(form.BOOKMARK.value);
   //alert("form.natlCD.value        ::"+form.natlCD.value);
}

// 북마크 문자열에서 권리구분을 뽑아내서 문자열로 변환
function parseNatlCD(bookmark)
{
    //alert("bookmark     ==="+bookmark);
    var natlCdValues = "";
    var VdkVgwKeyArray = new Array;
    VdkVgwKeyArray = bookmark.split("+");
    //alert("VdkVgwKeyArray   ::"+VdkVgwKeyArray);
    if (bookmark)
    {
        for (var i=0; i<VdkVgwKeyArray.length; i++)
        {
            var natlCdHiddenObj = document.listForm["myFolderPublicKey_" + VdkVgwKeyArray[i]];
//alert("VdkVgwKeyArray["+i+"]    ::"+VdkVgwKeyArray[i]);
//alert("natlCdHiddenObj    === "+natlCdHiddenObj.value);
            if (VdkVgwKeyArray.length-1 == i){
                if (typeof(natlCdHiddenObj)!= "undefined"){ //ws080717
                    natlCdValues += natlCdHiddenObj.value;
                }
 //  alert("natlCdValues    ::"+natlCdValues);
            }else{
                if (typeof(natlCdHiddenObj)!= "undefined"){ //ws080717
                    natlCdValues += natlCdHiddenObj.value + "+";
                }
  //  alert("natlCdValues2    ::"+natlCdValues);
            }
        }
    }

    return natlCdValues;
}

//ws080725 검색결과저장 3,000건이하인지 체크
function checkRemoconOpen(menuid, menuKind){
    var form = document.SearchPara;
    var total = form.searchSaveCnt.value;
    if(total == 'undefined' || total == '') total = 0;

    if(total > 3000){
        alert('검색결과가 3,000건 이하일 경우에만 사용가능합니다.');
        return;
    }
    //remocon/left.jsp
    remoconOpen(menuid, menuKind, total);
}

/**
 * 검색 결과 페이지 Ajax 처리
 * 2012.09.21 bhhan
 */
function AjaxResultLoad(url, jsonpost)
{
        // ajax 뒤로가기 구현시 공백을 검색할시 로딩바 안나오도록 변경 jsb 2017.08.08
        if(jsonpost.queryText != "" && jsonpost.queryText != null){
            showLoadingBar(); // 로딩 바 보이기
        }
        var piSearchYN = jsonpost.piSearchYN; //분류통계

	/*
    $.ajaxPrefilter('json', function(option, orig ,jqXHR){
		return 'html';
	});
		*/
	// 뒤로가기 구현시 첫화면에서는 검색식이 없으므로 검색하지않고 페이지 처리 jak	
        if(jsonpost.queryText == "" || jsonpost.queryText == null){
            url = "/abpat/Error/DataNotFound.jsp"  ;
        }
        
	$.ajax({
		url : url,
		type : 'post',
		data : jsonpost,
		async : true,
		cache : true,
                //cache : false,
		datatype: 'html',
                /*beforeSend:function(){
                    alert("beforeSend : " + url );
                },*/
		success : function(data)
		{
			jQuery("#divMainArticle").empty().html(data);
			hideLoadingBar();
            jQuery(document).scrollTop(0);
            if(piSearchYN != "Y"){
				// 새로운 키워드 검색시 기존 분류통계 PI 결과 지우기
				jQuery(".side_formCon2_popup").hide();
				jQuery("#PIContents").hide();
				jQuery(".listlayer").empty();
            }

            // 뒤로가기 구현시 공백으로 검색할시 타이틀이 기본타이틀이 나오도록 수정 2017.08.04 jsb
            if(jsonpost.queryText != "" && jsonpost.queryText != null){
                document.title = "해외특허 (" + jsonpost.queryText + ") < SEARCH - KIPRIS 특허정보 검색서비스";           
            }else{
                document.title = "해외특허 < SEARCH - KIPRIS 특허정보 검색서비스";
            }
                        
		},
                error : function()
		{
			hideLoadingBar();
		}
                /*,
		error : function(jqXHR, textStatus, errorThrown)
		{
			alert("[AjaxResultLoad] connection failed!!!!! : " + jqXHR.status + " / request. : " + jqXHR.reponseText);
                        alert("[AjaxResultLoad] caused by " + errorThrown);
			hideLoadingBar();
		}*/
	});
        /*START Ajax 뒤로가기를 위해 추가 jsb 2017.08. 08*/
        if(jsonpost.history != 'true'){

            var reSearchChk = {};
            var collectionChk = {};
            var allChk = {};
            $("input[name='chkAll']:checked").each(
                function(){
                    var id = this.id;
                    allChk[id] = (this.checked ? 1 : 0)
                }
            );
            $("input[name='COLLECTION_TOP']:checked").each(
                function(){
                    var id = this.id;
                    collectionChk[id] = (this.checked ? 1 : 0)
                }
            );
            $("input[name='searchInResultCk']:checked").each(
                function(){
                    var id = this.id;
                    reSearchChk[id] = (this.checked ? 1 : 0)
                }
            );
             if(typeof document.createElement('canvas').getContext ==="function"){
                 history.pushState({searchItem: getPostAllData("divSearchItems"),smartSearchItem:getPostAllData("divSmartFinderWrap"),reSearchChkbox:reSearchChk,collectionChkbox:collectionChk, allChkbox:allChk, transFlag:jsonpost.transFlag}, 'PushState - 1', '?next=MainSearch#page'+jsonpost.currentPage);
             }
        }
        /*END Ajax 뒤로가기를 위해 추가*/
}



/**
 * 부가서비스 통계 저장
 * 2013.01.31 bhhan
 */
function SaveOpsvcData(lang_tpcd, svc_tpcd, loctn_tpcd, itm_tpcd)
{
	var jsonpost = new Object();

	jsonpost.lang_tpcd = lang_tpcd;
	jsonpost.svc_tpcd = svc_tpcd;
	jsonpost.loctn_tpcd = loctn_tpcd;
	jsonpost.itm_tpcd = itm_tpcd;
	
	$.ajax({
		url : "/abpat/stata.do",
		type : 'post',
		data : jsonpost,
		async : true,
		cache : true,
		datatype: 'html',
		success : function(data)
		{
			//alert(data);
		},
		error : function()
		{
			hideLoadingBar();
		}
	});

}

/**
 * 국가별 Count 가져오기
 * 2012.10.11 bhhan
 */
function getCtryCntList(jsonpost)
{
	//[선택하기]로 버튼 초기화 By J.H.S 20130910
        jQuery("#showOnlyCheckArticleBtnContainer").show() ;
        jQuery("#showAllCheckArticleBtnContainer").hide() ;
        
        var url =  "/abpat/resultcnta.do?method=getCtryCount";
        // 뒤로가기 구현시 첫화면에서는 검색식이 없으므로 검색하지않고 페이지 처리 jak 	
        if(jsonpost.queryText == "" || jsonpost.queryText == null){
            url = "/abpat/search/ctryCountList.jsp";
        }
        
        $.ajax({
		url :url,
		type : 'post',
		data : jsonpost,
		async : true,
		cache : false,
		datatype: 'html',
		success : function(data)
		{
			jQuery("#divCtrycnt").empty().html(data);

			jQuery("li[id^='liselect_']", jQuery("#divCtrycnt"))
				.unbind("click")
				.bind("click", getCtryData);

		},
		error : function()
		{
		}
	});
}

/**
 * 선택한 국가의 특허정보 가져오기
 * 국가별 Count를 가져오는것이 완료되면 각 국가별 Count의 click이벤트에 바인딩 되는 함수
 * 2012.10.11 bhhan
 */
function getCtryData()
{
	//[선택하기]로 버튼 초기화 By J.H.S 20130910
        jQuery("#showOnlyCheckArticleBtnContainer").show() ;
        jQuery("#showAllCheckArticleBtnContainer").hide() ;
        
        var cntry = $(this).prop("id").replace(/liselect_/g, "");
	cntry = (cntry == "all") ? "all" : cntry.toUpperCase() + "_T.col";
	jQuery("li[id^='liselect_']", jQuery("#divCtrycnt")).removeClass("on");
	$(this).addClass("on");
	var theForm = document.SearchPara;
  	//theForm.piValue.value = 'null';
  	//theForm.piField.value = 'null';
	// 이전 검색 분류통계 정보 초기화
	theForm.piSearchYN.value = "N";
	theForm.piField.value="";
	theForm.piValue.value="";
  	theForm.currentPage.value = 1;
  	theForm.next.value = document.listForm.next.value;  //재검색부분 include 관련 수정  2007/10/29

        // By J.H.S 20130802 [선택보기]후 cntryCountList 버튼 클릭시 전체검색을 하도록 FROM 값 설정변경
        var checkCntry = $(this).prop("id");
        jQuery("#FROM", jQuery("#divSearchItems")).val("");
        jQuery("input[name='chkSelItem']:checkbox").each(function(){  //checkbox 전부 false 하기
            $(this).attr("checked",false);
        });
        $("#NWBOOKMARK", $("#divSearchItems")).val("");  //[선택보기]한 정보들을 초기화 하는 부분 
        // ----------------------------------------------------------------------------------- //

	// PISearch가 아니면 연도 / 분류별 파라미터값을 초기화한다.
	/*if(theForm.next.value != "PISearch")
	{
	 	theForm.piValue.value = "";
	 	theForm.piField.value = "";
	}*/

	if(theForm.searchInTransCk != undefined && theForm.searchInTransCk.checked == true ) {
	    theForm.searchInTrans.value = "Y";
	    theForm.searchInTransCk.value = "Y";
	}

  	var artPost = getPostAllData("divSearchItems");
	artPost.next = theForm.next.value;
	artPost.nowTab = cntry;
	theForm.nowTab.value = cntry;

        //By J.H.S 20140106 검색 후 상단 검색어가 없을 경우에 leftSide 결과의 국가로 검색했을 때 지워진 검색어로 검색되게 함. 
        var queryCheck = jQuery("#queryText").val();
        if(queryCheck == "" || queryCheck == null){
            theForm.queryText.value = jQuery("#searchExpression").val();
            //By J.H.S 20140106 검색상단 placeholder 숨김
            //$('#ol_queryTextlabel').css('visibility','hidden');
            artPost.queryText = jQuery("#searchExpression").val();
            artPost.expression = jQuery("#searchExpression").val();
        }
        
        //By J.H.S 20140106 검색 후 이전검색어와 새 검색어(단, 새 검색어만 입력하고 검색하지 않음)를 비교하여 다를경우는 기능을 false 시킨다. 
        var befor = jQuery("#searchExpression").val();
        var after = jQuery("#queryText").val();
        if(befor != after){
            //alert("상단의 검색어 또는 스마트검색을 통해 검색해 주십시오.");
            // 1. contents : 결과 내 재검색의 경우는 검색이 되어야 하므로, 해당 분기문 추가 (20210513) 
            // 2. authro : jihoo
            if(jQuery("#searchInResultCk").is(":checked") != true){ // 결과내 재검색 체크가 안된 경우
            	jQuery("#queryText").val(befor); // 검색된 검색어로 국가별 검색이 되도록 변경
            	artPost.queryText = befor;
                artPost.expression = befor;
//             	return false;
            }
//             return false;
        }
  	AjaxResultLoad("/abpat/resulta.do", artPost);

        
}

/**
 * 상세보기 팝업
 * 2012.09.27 bhhan
 */
var biblioWindow = null;
function biblioOpen()
{
    if (biblioWindow == null || biblioWindow.closed)
    {
    	// 1. contents : 팝업창 위치 일원화 작업에 따른 위치 변경 (20191108)
    	// 2. author : jihoo
//         biblioWindow = window.open("","biblioWin", 'scrollbars=no,resizable=yes,width=1024,height=875');
        biblioWindow = newPopupWindow("", "biblioWin", 1024, 875, "C", "M", "resizable=yes");

        biblioWindow.focus();
    }
    else
    {
        biblioWindow.close();
     	// 1. contents : 팝업창 위치 일원화 작업에 따른 위치 변경 (20191108)
    	// 2. author : jihoo
        //biblioWindow = window.open("","biblioWin", 'scrollbars=no,resizable=yes,width=1024,height=875');
        biblioWindow = newPopupWindow("", "biblioWin", 1024, 875, "C", "M", "resizable=yes");
        biblioWindow.focus();
    }
    var biblioF = document.biblioF;

    biblioF.method = "post";
    biblioF.target = 'biblioWin';
    biblioF.action = "/abpat/biblioa.do?method=biblioFrame";
    biblioF.submit();
    biblioF.target = "";
}


/**
 * 검색 권리 선택에서 권리별 검색 URL을 구한다.
 */
function getSelectPatUrl() {
	var pat = jQuery("#SEL_PAT", jQuery("#divSearchItems")).val();
	
	var url = "/abpat/resulta.do" ;

 	///////////////////////////////////////////////////////////////

	var query = jQuery("#queryText", jQuery("#divSearchItems")).val() ;

	if (pat == "KPORTAL") {
		jQuery("#queryText", jQuery("#divSearchItems")).val(query);
		jQuery("#expression", jQuery("#divSearchItems")).val(query);
		url = "http://kportal.kipris.or.kr/kportal/search/total_search.do" ;
	} else if (pat == "KPAT") {
		jQuery("#expression", jQuery("#divSearchItems")).val(query);
		//url = "http://kpat.kipris.or.kr/kpat/resulta.do?next=ResultList";
                url = "http://kpat.kipris.or.kr/kpat/searchLogina.do?next=MainSearch&checkPot=Y";
	} else if (pat == "DG") {
		jQuery("#expression", jQuery("#divSearchItems")).val(query) ;
                jQuery("#config", jQuery("#divSearchItems")).val("G1111111111111111111111S110001000000000000") ;
		url = "http://kdtj.kipris.or.kr/kdtj/searchLogina.do?method=loginDG&checkPot=Y";
                //url = "http://kdtj.kipris.or.kr/kdtj/grrt1000a.do?method=searchDG&next=ResultListDG" ;
	} else if (pat == "TM") {
		jQuery("#merchandiseString", jQuery("#divSearchItems")).val("td40,td41,td42,td43,td44,td45,td47,tdmd,") ;
		jQuery("#measureString", jQuery("#divSearchItems")).val("A,B,J,R,F,I,C,G,") ;
		jQuery("#patternString", jQuery("#divSearchItems")).val("letter,figure,lmixed,fmixed,sounds,fragre,") ;
		jQuery("#expression", jQuery("#divSearchItems")).val("KW=[" + query + "]") ;
                jQuery("#config", jQuery("#divSearchItems")).val("G1111111111111111111111S110001000000000000") ;
                url = "http://kdtj.kipris.or.kr/kdtj/searchLogina.do?method=loginTM&checkPot=Y";
		//url = "http://kdtj.kipris.or.kr/kdtj/grrt1000a.do?method=searchTM&next=ResultListTM" ;
	} else if (pat == "JM") {
		/*
                jQuery("#expression", jQuery("#divSearchItems")).val("KW=[" + query + "]") ;
                jQuery("#config", jQuery("#divSearchItems")).val("G1111111111111111111111S110001000000000000") ;
                url = "http://kdtj.kipris.or.kr/kdtj/grrt1000a.do?method=searchJM&next=ResultListJM&rights=JM" ;
                */
                jQuery("#expression", jQuery("#divSearchItems")).val(query);			
                url = "http://kdtj.kipris.or.kr/kdtj/searchLogina.do?method=loginJM&checkPot=Y" ;
		//url = "http://kdtj.kipris.or.kr/kdtj/grrt1000a.do?method=searchJM&next=ResultListJM" ;
	} else if (pat == "KPA") {
		jQuery("#SearchPara").prop("target", "_blank") ;
		url = "http://kpa.kipris.or.kr/kpa/search/search_kpa.do" ;
	} else if (pat == "ABPAT") {
		url = "/abpat/resulta.do" ;
	} else if (pat == "ABROADTM") {
		/*
                jQuery("#expression", jQuery("#divSearchItems")).val("KW=[" + query + "]") ;
		jQuery("#sortState", jQuery("#divSearchItems")).val("") ;
		jQuery("#sortField", jQuery("#divSearchItems")).val("") ;
		jQuery("#collectionValues", jQuery("#divSearchItems")).val("US,JP,AU,CA") ;
		jQuery("#config", jQuery("#divSearchItems")).val("G01") ;
		url = "http://abtm.kipris.or.kr/abtm/general.do?next=ResultList" ;
                */
                var query = jQuery("#queryText", jQuery("#divSearchItems")).val();
                jQuery("#expression", jQuery("#divSearchItems")).val(query);
                jQuery("#sortState", jQuery("#divSearchItems")).val("");
                jQuery("#sortField", jQuery("#divSearchItems")).val("");
                jQuery("#collectionValues", jQuery("#divSearchItems")).val("US,JP");
                jQuery("#config", jQuery("#divSearchItems")).val("G01");
                url = "http://abtm.kipris.or.kr/abtm/general.do?next=ResultList";
	} else if (pat == "ABDG") {
                var query = jQuery("#queryText", jQuery("#divSearchItems")).val();
                jQuery("#expression", jQuery("#divSearchItems")).val(query);
                jQuery("#sortState", jQuery("#divSearchItems")).val("");
                jQuery("#sortField", jQuery("#divSearchItems")).val("");
                jQuery("#collectionValues", jQuery("#divSearchItems")).val("JP,US");
                jQuery("#config", jQuery("#divSearchItems")).val("G01");
                url = "http://abdg.kipris.or.kr/abdg/searchLogina.do?next=MainSearch"; 
        } 
        /*
        else if (pat == "CYBER") {
                //jQuery("#expression", jQuery("#divSearchItems")).val(query) ;
                //url = "http://kpat.kipris.or.kr/kpat/cyberResulta.do?next=ResultList" ;
                url = "/kpat/cyberResulta.do?next=ResultList" ;
	}
        */
 	///////////////////////////////////////////////////////////////

	return url ;

}


/**
 * 환경설정 팝업
 * 2012.11.15 bhhan
 */
var popSetting = null ;
function popupSetting(pat) {
	if (popSetting == null || popSetting.closed) {
		//rcp 대체로 인한 소스 변경(Smilebug)
		// 1. contents : 팝업창 위치 일원화 작업에 따른 위치 변경 (20191114)
    	// 2. author : jihoo

                popSetting = newPopupWindow("http://login.kipris.or.kr/member/kr/setting/setting" + pat +".do", "bigFrontDraw", 900, 630, "C", "M", "scrollbars=yes");

		popSetting.focus() ;
	} else {
		//rcp 대체로 인한 소스 변경(Smilebug)
                popSetting.close() ;
        // 1. contents : 팝업창 위치 일원화 작업에 따른 위치 변경 (20191114)
        // 2. author : jihoo

				popSetting = newPopupWindow("http://login.kipris.or.kr/member/kr/setting/setting" + pat +".do", "bigFrontDraw", 900, 630, "C", "M", "scrollbars=yes");
		popSetting.focus() ;
	}
}
//-->
</script>
<script type="text/JavaScript">
<!--
/*---------------------------------------------------------------------------*/
/* FUNCTION : isNumber(); 숫자포맷 확인                                      */
/*---------------------------------------------------------------------------*/
function isNumber( str )
{
    var inx = 0;
    var aChar ;

    for( inx = 0; inx < str.length; inx++ )
    {
        if( str.charAt(inx) == '?' || str.charAt(inx) == '~' ) /* '?'일경우 skip */
            inx++;
        else
            aChar = str.charAt(inx);

        if( !isDigit(aChar) )
            return false;
    }
    return true;
}

function isDigit(num)
{

    if( num >= "0" && num <= "9" )
        return true;
    else if( num == "?" )
        return true;
    else
        return false;

}
/******************************************************************************
 *
 *  키워드 관련 자바스크립트 ( 2004.03.16 )
 *
 *-----------------------------------------------------------------------------
 *  [ 검색 연산자 ]
 *   * : and
 *   + : or
 *   = : 검색 항목
 *   ? : Wild card
 *   () : 괄호 허용
 *   그외 : 검색어로 취급
 *-----------------------------------------------------------------------------
 *  테스트 질의어
 *       car
 *       car*(TL=현대+기아)*모터
 *       car*((TL=(현대+기아))*모터)
 *       1*2*(9+AP=2)TL=3+(4*TL=(5*6)*7)
 *          = (1,2)<in>KW<or>(9<in>KW<or>2<in>AP)<or>3<in>TL<or>(4<in>KW<and>(5<and>6<in>TL)<and>7<in>KW)
 *                 1         2         3         4
 *       0123456789012345678901234567890123456789012345678
 *       car*TL=현대*GN=1234*AD=1999~199912*GN=106271*AD=1999*AN=101998219
 *       AD=1999
 *       AD=1999~2000 : (AD>=19990000)<and>(AD<=20009999)
 *
 *****************************************************************************/

/*---------------------------------------------------------------------------*/
/* FUNCTION : fCheckKeyWord();                                               */
/*---------------------------------------------------------------------------*/
function fCheckKeyWord( sQueryText )
{

    var sQuery    = sQueryText;
    var sSource   = "";         // fNomalization( sQuery )값 return
 // // // // // // // // // // // // // // // // // // // // //
//alert("sQuery       ::"+sQuery);
 // // // // // // // // // // // // // // // // // // // // // //
    var i         = 0;
    var j         = 0;
    var iOp       = 0;
    var iCount    = 0;
    var iGroup    = 1;          // 그룹번호

    var sChar     = 0;          // 단어 하나 받을 변수
    var sResult   = "";
    var iBraceCnt = 0;

    var sToken = new Array(5000);
    var sGroup = new Array(5000);
    var sType  = new Array(5000);

    //-----------------------------------------------------------
    //  입력된 스트링의 길이 확인
    //-----------------------------------------------------------
    if( sQuery.length < 1 ) return ;

    //-----------------------------------------------------------
    //  "(" , ")" 개수 확인
    //-----------------------------------------------------------
    if( fFind(sQueryText, '(') != fFind(sQueryText, ')') )
    {
        alert( " 검색식의 괄호'(,)'의 개수가 맞지 않습니다." );
        return false;
    }

    //-----------------------------------------------------------
    //  Initialization 초기화
    //-----------------------------------------------------------
    for( i = 0 ; i < 5000 ; i++ )
    {
        sToken[i] = "";
        sGroup[i] = "9999";
        sType [i] = "";
    }

    //-----------------------------------------------------------
    //  Nomalization : 불요 공백, 연산자 처리
    //-----------------------------------------------------------
    sSource = fNomalization( sQuery );
 // // // // // // // // // // // // // // // // // //
//alert("sSource Nomalization     ::"+sSource);
 // // // // // // // // // // // // // // // // // // // // // // // //
    //-----------------------------------------------------------
    //  입력된 스트링을 읽어 배열의 갯수를 정의한다.
    //  - 연산자 단위 : * +
    //  - 괄호의 단위 : ( )
    //-----------------------------------------------------------
    for( i = 0 ; i < sSource.length; i++ )
    {
        switch( (sChar = sSource.charAt(i)) )
        {

            case '(' :
            case ')' :
                sToken[++iCount] = sChar.toString();
                if( sChar == '(' )
                {
                    sType[iCount]  = "X";
                    sGroup[iCount] = "0";
                }
                else
                {
                    sType[iCount]  = "X";
                    sGroup[iCount] = "0";
                }
                iOp = 1;
                break;

            case '[' :
            case ']' :
                sToken[++iCount] = sChar.toString();
                if( sChar == '[' )
                {
                    sType[iCount]  = "Q";
                    sGroup[iCount] = "0";
                }
                else
                {
                    sType[iCount]  = "Y";
                    sGroup[iCount] = "0";
                }
                iOp = 1;
                break;
 
           case '*' : // AND(*)
                sToken[++iCount] = sChar.toString();
                sGroup[iCount]   = "0";
                iGroup++;
                sType[iCount]    = "O";
                iOp = 1;
                break;

            case '+' : // OR(+)
                sToken[++iCount] = sChar.toString();
                sGroup[iCount]   = "0";
                iGroup++;
                sType[iCount]    = "O";
                iOp = 1;
                break;

            case '=' : // Assign(=)
                sToken[++iCount] = sChar.toString();
                sGroup[iCount]   = iGroup.toString();
                sType[iCount]    = "A";
                iOp = 1;
                break;

            default  :
                if( iOp > 0 )
                {
                    iCount++;
                    iOp = 0;
                }
                sToken[iCount] = sToken[iCount] + sChar.toString();
                sGroup[iCount] = parseInt(iGroup).toString();
                sType [iCount] = "X";

                break;

        }
    }
    
///alert("sToken["+iCount+"]       ::"+ sToken[iCount]);
///alert("sGroup["+iCount+"]       ::"+ sGroup[iCount]);
///alert("sType ["+iCount+"]       ::"+ sType [iCount]);
    //-----------------------------------------------------------
    //  불필요한 괄호를 제거한다.
    //-----------------------------------------------------------
    
    var bEqual      = false;
    var ileftBrace  = 0;
    var irightBrace = 0;
    var sGrouptmp   = "";

    for( iGroup = i = 0; i <= iCount ; i++ )
    {
        if( (sToken[i  ] == "(") && (sToken[i+2] == ")") )
        {
            //sToken[i  ] = "99999";
            sToken[i  ] = "(";
            
            //sToken[i+2] = "99999";
            sToken[i+2] = ")";

            sGroup[i  ] = "99999";
            sGroup[i+1] = (parseInt(sGroup[i+1]) - 1).toString();
            sGroup[i+2] = "99999";
            continue;
        }

        if( sGroup[i] == null || sGroup[i] == "" ) sGroup[i] = "99999";
        if( iGroup < parseInt(sGroup[i])         ) iGroup    = parseInt(sGroup[i]);

        /**
         **  항목명을 조회한다.( If Condition true THEN assign True )
         **/
        sType[i] = fFindReserved( sToken[i], sType[i] );

        if( bEqual && sToken[i] == "40" ) ileftBrace++;
        if( bEqual && sToken[i] == "41" ) irightBrace++;

        if( sType [i  ] == "R"  &&
            sType [i+1] == "A"  &&
            sToken[i+2] == "40" )
        {
            bEqual    = true;
            sGrouptmp = (parseInt(sGroup[i])).toString();
        }

        if( bEqual )             sGroup[i] = sGrouptmp;

        if( sType[i  ] == "R" &&
            sType[i+1] != "A"  ) sType[i]  = " ";

        if( bEqual                    &&
            irightBrace == ileftBrace &&
            ileftBrace > 0            )
        {
            irightBrace = ileftBrace = 0;
            bEqual = false;
        }

    }

    //-----------------------------------------------------------
    //  검색질의어 생성 -
    //-----------------------------------------------------------
    if( (sResult = fQueryProcess(iCount, sToken, sGroup, sType, sSource)) != false )
    {
///        alert("sResult      ::"+sResult);
///        alert("iCount   ::"+iCount);
        if( sResult == "-1" )
            return  false; // 검색질의어 오류
        else
            return  sResult;
    }
    else
        return  false;
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : fQueryProcess( iCount, sToken, sGroup, sType );                */
/*---------------------------------------------------------------------------*/
function  fQueryProcess( iCount, sToken, sGroup, sType, sSource )
{   
    var  i           = 0;      // Loop 카운터
    var  iCurrGroup  = 0;
    var  iPrevGroup  = 0;
    var  iType       = 0;      // 검색 항목의 구분 1:일자, 2:번호
    var  inextX      = 0;
    var  bBrace      = false;
    var  sWord       = "KW" ;

    var  sTemp       = "";
    var  sResult     = "";  // Validation Check 용 String
    var  sReturnStr  = "";  // Ejb에 던져줄 최종 검색질의어
    var  sStrTemp    = "";  // Replace 하기전 담아둘 검색어

    var  sCurrWord   = "";
    var  iCurrType   = 0 ;
    var  iStartBrace = 0 ;
    var  iEndBrace   = 0 ;
    var  iOperator   = 0 ;
    var  iAssigner   = 0 ;

    //-----------------------------------------------------------
    //  검색 질의어 생성
    //-----------------------------------------------------------
    for( i = 0 ; i <= iCount ; i++ )
    {
        if( sToken[i] == null || sToken[i] == "" ) continue;
        if( sType [i] == null || sType [i] == "" ) continue;

        switch( sType[i].charAt(0) )
        {
            case 'S': // 괄호 시작
                sResult += "(";
                sReturnStr += "(";
//////////////////////////////////////////////////////////////////////                
/////alert("sType["+i+"]     S   "+sType[i]);
/////alert("sResult  S     "+sResult);
/////alert("sReturnStr  S     "+sReturnStr);
                iStartBrace = 1;
                iEndBrace   = 0;

                if( sType[i-1].charAt(0) == 'A' )  bBrace = true;
                break;

            case 'E': // 괄호 종료
                sResult +=  ")";
                sReturnStr += ")";
/////alert("sType["+i+"]     E   "+sType[i]);
/////alert("sResult  E     "+sResult);
/////alert("sReturnStr  E     "+sReturnStr);
                iStartBrace = 0;
                iEndBrace   = 1;
                iAssigner   = 0;

                bBrace  = false;
                iCurrGroup = parseInt(sGroup[i]);

                if( ( iPrevGroup == iCurrGroup ) &&
                    ( iType      != 1          ) &&
                    ( iType      != 2          ) &&
                    ( iType      != 9          ) )
                {
                    sResult += sWord + "=" + sToken[i];
                    sReturnStr += sToken[i];
                    sWord   = "KW";
                    iType   = 0;
                }
               else
                    sWord   = "KW";
                break;

            case 'Q': // 그룹시작
                sResult += "[";
                sReturnStr += "[";
                break;    

            case 'Y': // 그룹끝
                sResult += "]";
                sReturnStr += "]";
                break;    

            case 'A': // Assigner [=]
                iAssigner = 1;
                sReturnStr += sToken[i];
                break;

            case 'O': // Operator
                sResult += sToken[i];
                sReturnStr += sToken[i];
/////alert("sResult  O     "+sResult);
/////alert("sReturnStr  O     "+sReturnStr);
                break;

            case 'R': // 검색 항목 지정
                sWord = sToken[i];
                if(      sWord == "AD"  ||  // 출원일자
                         sWord == "OPD"  ||  // 공개일자
                         sWord == "GD"  ||  // 등록일자
                        
                         sWord == "IDT" ||  // 국제출원일자 
                         sWord == "IOD" ||  // 국제출원공개일자 
                          sWord == "PD" )   // 공보일자
                {
                    iType = 1;
                    iCurrType = iType;
                    sCurrWord = sWord;
                }
                else if( sWord == "IPC" ||  // IPC
                         sWord == "EC"  || // UPC 유럽분류                
                         sWord == "CLAS" || // UPC 미국분류
                         sWord == "FI"   || // FI                         
                         sWord == "FT"   || // FT                            
//                         sWord == "FS"   || // Field of Search                            
                
                         sWord == "AN"  ||  // 출원번호
                         sWord == "OPN" )  // 공개번호
                         
                {
                    iType = 2;
                    iCurrType = iType;
                    sCurrWord = sWord;
                }
                else if( sWord == "TL"  ||  // 발명의명칭
                         sWord == "AB"  ||  // 초록
                         sWord == "CL"  ||  // 청구범위
                        // sWord == "KW"  || 
                                                 
//                         sWord == "UR"  ||  // 미국인용 특허
//                         sWord == "FR"  ||  // 외국참조
//                         sWord == "OR"  ||  // other 참조
                         
                         sWord == "IN"  ||  // 발명자
                         sWord == "AP"  ||  // 출원인
                         sWord == "AG"  ||  // 대리인
                         sWord == "RD"  ||  // 우선권일자 (20080101 정확한 일자만 검색가능) 2008/04/24 위치변경
                         sWord == "RN"  ||  // 우선권번호 구성( 문자 + 번호 )
                         sWord == "IAN" ||  // 국제출원번호 (문자 + 번호)
                         sWord == "ION" ||  // 국제공개번호  (문자 + 번호)
                         sWord == "GN"  )  // 등록번호 구성( 문자 + 번호 )    
                {
                    iType = 3;
                    iCurrType = iType;
                    sCurrWord = sWord;
                }

                sReturnStr += sWord;
/////alert("sReturnStr  R     "+sReturnStr);
                break;
                
            case 'X': // 검색어
                sReturnStr += sToken[i];
/////alert("sReturnStr  X     "+sReturnStr);
                break;
            default :  // 검색 질의어

                if( iEndBrace != 1 &&
                    iAssigner != 0 )
                {
                    sWord = sCurrWord ; // O.H.K.
                    iType = iCurrType ;
                }

///////////////////////////////////////////////////////////////////////////////
//alert( "\n\n iCount        : " + iCount    +
//       "\n\n sWord         : " + sWord     +
//       "\n\n sToken["+i+"] : " + sToken[i] +
//       "\n\n sGroup["+i+"] : " + sGroup[i] +
//       "\n\n sType ["+i+"] : " + sType[i]  +
//       "\n\n sSource       : " + sSource );
///////////////////////////////////////////////////////////////////////////////

                iCurrGroup = parseInt(sGroup[i]);
                //-----------------------------------------------------------//
                // 일자( Date ) 타입으로 변환                                //
                //     - AD [출원일자],                                      //
                //       OD [공개일자],                                      //
                //       GD [등록일자],                                      //
                //       RD [우선권주장일자]                                 //
                //       FDA [국제출원일자]                                   //
                //       FDO [국제공개일자]                                   //
                //----------------------------------------------------------//
                if( iType == 1 )
                {
                    sStrTemp = sToken[i]; // 변경전 담아둘 변수.

                    if( (sToken[i] = fProcessDate(sToken[i], sWord)) != false )
                    {
                        if( sTemp == "-1" )  return  "-1";

                        if( sToken[i] != undefined )
                        {
                            sResult += sWord + "=" + sToken[i];

                            // 번호 관련, 일자 관련 포맷이 변경된 값을 Ejb에 넘겨줌.
                            sReturnStr += sToken[i]; //편무학
                        }
                        else
                            return false;

if(i == iCount)  return  sReturnStr;

                        inextX  = 0;
                        while( true )
                        {
                            if( sType[i + ++inextX] == "X" ) break;
                            if( inextX == 500 )  break;
                        }

                        if( (sGroup[i + inextX] == sGroup[i]) == false )
                        {
                            sWord = "KW";
                            iType = 9;
                        }
                    }
                    else
                    {
                        return false;
                    }

if(i == iCount)  return  sReturnStr;
                }
                //-----------------------------------------------------------//
                // 숫자( Number ) 타입으로 변환                              //
                //     - AN [출원번호],                                      //
                //       ON [공개번호],                                      //                
                //       GN [등록번호],                                      //
                //       IPC[IPC번호].                                       //
                // 예외) --> 'RN(우선권주장번호)' --> iType:3으로 이동       //
                //-----------------------------------------------------------//
                else if( iType == 2 )
                {
                    /**
                     **  번호 포맷 확인
                     **  2004.03.18 OHK 추가 작성
                     **/
                    sStrTemp = sToken[i]; // 변경전 담아둘 변수.

                    switch( sWord )
                    {
                        case 'IPC' : // IPC 번호
                            if( (sToken[i] = fCheckIPCNumber(sToken[i], sWord)) != false )
                            {
                                if( sToken[i] != undefined )
                                {
                                    sResult += sWord + "=" + sToken[i];

                                    // 번호 관련, 일자 관련 포맷이 변경된 값을 Ejb에 넘겨줌.
                                    sReturnStr += sToken[i];

if(i == iCount)  return  sReturnStr;
                                }
                                else
                                    return false;
                            }
                            else
                                return false;
                            break;

                        default :
                            break;

                    } /* End of Switch */

if(i == iCount)  return  sReturnStr;

                    inextX = 0;
                    while( true )
                    {
                        if( sType[i + ++inextX] == "X" )  break;

                        if( inextX == 500 ) break;
                    }

                    if( (sGroup[i+1] == sGroup[i]) == false )
                    {
                        sWord = "KW";
                        iType = 9;
                    }

if(i == iCount)  return  sReturnStr;

                }
                //-----------------------------------------------------------//
                // 단어 (발명의명칭[TL],                                     //
                //       출원인    [AP],                                     //
                //       발명자    [IN],                                     //
                //       대리인    [AG],                                     //
                //       우선권번호[RN] - "번호 + 문자"로 구성 )             //
                //-----------------------------------------------------------//
                else if( iType == 3 )
                {
                    var temp = sToken[i];
                    temp = Replace( temp, "(", "");
                    temp = Replace( temp, "(", "");
                    if( temp.charAt(0) == "?" ) 
                    {
                        alert( "앞절단자를 사용하실 수 없습니다." );
                        return -1;
                     }
                        
                    if( iPrevGroup == iCurrGroup || bBrace )
                    {
                    
                        sResult += sWord + "=" + sToken[i];
                        sReturnStr += sToken[i];
                        bBrace  = false;
                    }
                    else
                    {
                        sResult += sWord + "=" + sToken[i];
                        sReturnStr += sToken[i];
                        sWord   = "KW";
                        iType   = 0;
                    }

if(i == iCount)  return  sReturnStr;

                }
                //-----------------------------------------------------------//
                //                                                           //
                // 해당 항목이 없을 경우                                     //
                //                                                           //
                //-----------------------------------------------------------//
                else
                {
                    var temp = sToken[i];
                    temp = Replace( temp, "(", "");
                    temp = Replace( temp, "(", "");
                    if( temp.charAt(0) == "?" ) 
                    {
                        alert( "앞절단자를 사용하실 수 없습니다." );
                        return -1;
                    }
                    
                    if( sCurrWord == ' '  || sCurrWord == ''        ||
                        sCurrWord == null || sCurrWord == undefined )
                        sCurrWord = "KW";

                    if( iStartBrace == 1 &&  // 해당항목이 없을경우, 괄호 닫히지 않은상태
                        iEndBrace   == 0 &&
                        iAssigner   == 1  )
                    {
                        sResult += sCurrWord + "=" + sToken[i];
                        sReturnStr += sToken[i];

if(i == iCount)  return  sReturnStr;

                    }
                    else if( iEndBrace   == 1 ||
                             iStartBrace == 0  )
                    {
                        sWord   = "KW";
                        sResult += sWord + "=" + sToken[i];
                        sReturnStr += sToken[i];
                        iType   = 0;

if(i == iCount)  return  sReturnStr;

                    }
                    else
                    {
                        sWord   = "KW";
                        sResult += sWord + "=" + sToken[i];
                        sReturnStr += sToken[i];
                        iType   = 0;

if(i == iCount)  return  sReturnStr;

                    }
                }
                break;

        } /* End of Switch */

        if(sType[i].charAt(0)=='X' || sType[i].charAt(0)=='R')
            iPrevGroup = iCurrGroup;

    }

///////////////////////////////////////////////////////////////////////////////
//alert( //"sType      : " + sType   +
//       //"\n\nsGroup : " + sGroup  +
//       "\n\n sSource    : " + sSource +
//       "\n\n sResult    : " + sResult +
//       "\n\n sReturnStr : " + sReturnStr );
///////////////////////////////////////////////////////////////////////////////

    //return  sResult;
    //return  sSource

    return  sReturnStr;
/////alert("Re sResult        "+sResult); 
/////alert("Re sSource        "+sSource);    
/////alert("Re sReturnStr        "+sReturnStr);
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : fProcessDate( sToken, sType );                                 */
/*---------------------------------------------------------------------------*/
function  fProcessDate( sSource, sWord )
{
    var inx      = 0;
    var rtnValue = "";

    sSource = Replace(sSource,"[","");
    sSource = Replace(sSource,"]","");    

    if( !isNumber(sSource) )
    {
        alert( sWord + " 숫자만 입력하세요(" + sSource + ")" );
        return false;
    }
    
    rtnValue = ConvertDateFormat(sSource, sWord); //편무학

    if( rtnValue != ''         ||
        rtnValue != false      ||
        rtnValue != undefined  )
    {
        return  rtnValue;
    }
    else
    {
        
        return  false;
    }

}

/*---------------------------------------------------------------------------*/
/* FUNCTION : fFindReserved( sToken, sType );                                */
/*---------------------------------------------------------------------------*/
function  fFindReserved( sToken, sType )
{
    var i;
    var sTemp = sToken.toUpperCase();

    sReserved = ["IPC", "CLAS", "FI", "FT", "EC", 
                 "TL", "AB", "CL", "PN", "PD", "RC",
                 "AN" , "OPN", "GN", "RN", "IAN", "ION",                                  
                 "AD" , "OPD", "GD", "RD", "IDT", "IOD",                
                 "AP" , "IN" , "AG", "DS"];                 

    for( i = 0 ; i < 30 ; i++ )
    {
        if( sTemp.indexOf(sReserved[i]) == 0 )  return  "R";
    }

    return sType;
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : removeSpecialCharacter( Query );                               */
/*---------------------------------------------------------------------------*/
function removeSpecialCharacter( Query )
{
    Query = Replace( Query, '@', '' );
    Query = Replace( Query, '#', '' );
    Query = Replace( Query, '(', '' );
    Query = Replace( Query, ')', '' );
    Query = Replace( Query, '%', '' );
    Query = Replace( Query, '&', '' );
    Query = Replace( Query, '|', '' );
    Query = Replace( Query, '$', '' );
    //Query = Replace( Query, '!', '' );//편무학(6.8) '!' 연산자 허용
    Query = Replace( Query, '.', '' );

    return Query;
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : fNomalization( str ); 불요 공백, 연산자 처리                   */
/*---------------------------------------------------------------------------*/
function fNomalization( sQuery )
{
    var i       = 0;
    var iBr     = 0;
    var sChar   = 0;
    var iOp     = 0;
    var iDt     = 0;
    var sSource = "";

    var iStartQuot = 0;
    var iEndQuot   = 0;
    var sField = "";

    //-----------------------------------------------------------
    //  입력된 스트링을 읽어 배열의 갯수를 정의한다.
    //   - 연산자 단위 : *, +
    //   - 괄호의 단위 : ( )
    //-----------------------------------------------------------
    for( i = 0 ; i < sQuery.length; i++ )
    {
        sChar = sQuery.charAt(i);
        //if( sChar < 32 ) continue;

        
        sField += sChar;

        if( sField.length >= 3 && sField.substring( sField.length -3, sField.length ) == "FN=" ) 
        {    sField = sField.substring( sField.length -3, sField.length ); iOp = 1;}
        if( sField.length >= 4 && sField.substring( sField.length -4,  sField.length ) == "FON=" )
        {    sField = sField.substring( sField.length -4, sField.length ); iOp = 1;}
        
        // 문장검색 일 때 공백을 '+' 화 하는거 방지 위해
        if( sChar == '\"' ) iStartQuot++;
        if( sField == "FN=" || sField == "FON=") iStartQuot++; 
        
        if( ( sChar == '(' ) ||
            ( sChar == ')' ) )
        {
            if( sChar == '(' ) iBr = 1;
            else               iBr = 2;

 /*           if( ( sChar == '(' ) &&
                ( iOp == 0     ) &&
                ( iDt == 1     ) && ( sField != "FN=" && sField != "FON=" )) sSource = sSource + '+';
*/
            sSource = sSource + sChar;
            iDt = 0;
        }
        else if( (( sChar == '+' ) ||
                 ( sChar == '*' ) ||
                 ( sChar == '=' )) && ( sField != "FN=" && sField != "FON=" ))
        {
            if( iOp == 1 )
            {
                alert( "검색식에 연산자 오류가 있습니다." );
                return  false;
            }
            sSource = sSource + sChar;
            iOp = 1;
            iBr = 0;
            iDt = 0;
        }
        else if( sChar == ' ' && iOp == 1 )
        {
            continue; // 불요 공백
        }
        else if( sChar == ' ' )
        {
            if( iStartQuot % 2 != 0 )  // 문장검색일 경우 그대로
            {
                sSource = sSource + sChar;
            }
            else
                iOp = 2;  // 아직은 필요한 공백
        }
        else
        {
            if( iStartQuot % 2 == 0 )  // 문장검색이 아닐경우
            {
                if(      iDt == 1 && iOp == 2 ) sSource = sSource; // 단어검색일때 공백은 *로 간주
                else if( iOp == 2 || iBr == 2 ) sSource = sSource;
            }

            sSource = sSource + sChar;
            iOp = 0;
            iBr = 0;
            iDt = 1;

        }
    }
    
    return sSource;
}
/*-------------------------------- End of File ------------------------------*/



/*----------------------- 번 호 관 련 함 수  시작 ---------------------------*/
/*---------------------------------------------------------------------------*/
/* FUNCTION : fCheckIPCNumber( ); - IPC 번호                                 */
/*---------------------------------------------------------------------------*/
function fCheckIPCNumber( inputValue, fieldName )
{
    var inx       = 0;
    var iTokenCnt = 0;
    var iSpaceCnt = 0;

    var rtnValue  = "";
    var strTempInputValue = "";

    if( inputValue.length <= 0 ) return ;

    //inputValue = strTempInputValue = Replace( inputValue, " ", "+" );

    /* Global Array : sTokenArr[inx]에 검색어 입력 */
    iTokenCnt = fNumQueryTokenize( inputValue );

    for( inx = 0; inx <= iTokenCnt; inx++ )
    {
        if( sTokenArr[inx].length > 0 )
        {
            /* IPC 검색어의 '/' 제거 */
            //sTokenArr[inx] = Replace( sTokenArr[inx], "/", "" );
            sTokenArr[inx] = Replace( sTokenArr[inx], " ", "" );
            sTokenArr[inx] = Replace( sTokenArr[inx], "*", "" ); // fNormalize()에서 공백을 '*'로 바꾸기때문
            // IPC검색어에 무조건 뒷절단자 추가 (2004.07.12)
	    sTokenArr[inx] = Replace( sTokenArr[inx], "?", "" ); 
	    //sTokenArr[inx] =  sTokenArr[inx] + "?";
            sTokenArr[inx] = rtrim( sTokenArr[inx] );

            iSpaceCnt = fFind( sTokenArr[inx], ' ' );

            if( iSpaceCnt > 0 )
            {
/*            
                alert( fieldName   + " 필드의\n"                          +
                       "[" + ++inx + "] 번째 검색어에 공백이 있습니다.\n" +
                       "\'" + sTokenArr[--inx] + "\'"                       );
*/                       
                alert( fieldName   + " 필드의 검색어에 공백이 있습니다.\n공백제거후 재검색해 주십시오." );
                return false;
            }
        }
        rtnValue += sTokenArr[inx] + strOperator.charAt(inx);
    }
    return  rtnValue;
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : fCheckNumNormal();                                             */
/*---------------------------------------------------------------------------*/
function fCheckNumNormal( inputValue, fieldName )
{
    var inx = 0;
    var knx = 0;
    var qnx = 0;
    var tokenCnt     = 0;
    var iPatNoLen    = 0;
    var dashCnt      = 0;

    var strPvsU      = "";
    var strYear      = "";
    var strPatNo     = "";
    var strTempPatNo = "";
    var strElement   = "";
    var strTempInputValue = "";

    var strFieldTotalQuery = "";

    /* 일단 개인 PC의 날짜를 확인 */
    var theTime  = new Date();
    var now_year = theTime.getFullYear(); //getYear()에서 변경

    inputValue = Replace(inputValue,"[","");
    inputValue = Replace(inputValue,"]","");    
    
    if( inputValue.length <= 0 ) return ;

    inputValue = strTempInputValue = Replace( inputValue, " ", "+" );
    /**
     ** sTokenArr   <- array
     ** strOperator <- operator collect string
     **/
    tokenCnt = fNumQueryTokenize( inputValue );


    for( inx = 0; inx <= tokenCnt; inx++ )
    {
        if( sTokenArr[inx].length > 0 )
        {
            /**  TokenArr 에 있던 "10-1998-0000001" 번호가
             **  '-'별로 split 하여 sElementArr에 입력
             **/
            fResetElementArray();

            /* 입력번호 길이가 13자리 일 경우 */
            if(  sTokenArr[inx].length == 13  &&
                 (sTokenArr[inx].substring(2,3) != '-' &&
                  sTokenArr[inx].substring(7,8) != '-'  )  )
            {
                sTokenArr[inx] = sTokenArr[inx].substring(0,2) + "-" + sTokenArr[inx].substring(2,6) + "-" + sTokenArr[inx].substring(6,13);
                strFieldTotalQuery += sTokenArr[inx] + strOperator.charAt(inx);



//alert( " 연산자 : " + strOperator.charAt(inx) );
///////////////////////////////////////////////////////////////////////////////
//alert( " KPKE0000.js - fCheckNumNormal(); \n"  +
//       "\n strFieldTotalQuery : " + strFieldTotalQuery );
///////////////////////////////////////////////////////////////////////////////

            }
            else
            {
                dashCnt = fFind( sTokenArr[inx], '-' );
                if( dashCnt != 2 && dashCnt != 0 )
                {
/*                	
                    alert( fieldName + " 필드의\n\n" +
                           "[" + ++inx + "] 번째 검색어는 지원되지 않습니다.\n\n" +
                           "검색어 입력시 \'-\' 갯수는 2개 여야 합니다.(" +  dashCnt + ")" );
*/                           

//                    alert( fieldName + " 입력 형식이 맞지 않습니다."+fieldName +" 는(은) 다음 예제의 형식을 지원합니다.\n\n" +
//                           "예1) ?-?-12345, 10-?-12345, ?-2003-12345\n" +
//                           "예2) ?-12345 (권리,년도 제외한 7자리내의 일련번호)\n" + 
//                           "예3) 1020031234567 (13자리 정상번호)" );

                    alert( fieldName + " 입력 형식이 맞지 않습니다."+fieldName +" 는(은) 다음 예제의 형식을 지원합니다.\n\n" +
                           "예1) --12345?, 10-?-12345, ?-2003-12345\n" +
                           "예2) 12345? (권리,년도 제외한 7자리내의 일련번호)\n" + 
                           "예3) 1020031234567 (13자리 정상번호)" );

                    return false;
                }
                else if( dashCnt               == 0  &&
                         sTokenArr[inx].length <= 7  )
                {
                    sTokenArr[inx] = "--" + sTokenArr[inx];
                }

                sElementArr = sTokenArr[inx].split('-');
                /**************************************************************
                 *  1. 구분 기호 없는 상태 ('-')
                *  2. 자릿수도 13자리가 아닌상태
                 *  3. 권리구분, 년도를 입력하지 않은 상태
                 *************************************************************/
                if( (sElementArr[1] == null || sElementArr[1] == "undefined") ||
                    (sElementArr[2] == null || sElementArr[2] == "undefined")  )
                {
/*                	
                    alert( fieldName + " 필드의\n"                       +
                           "[" + ++inx + "] 번째 검색어는 지원되지 않습니다.\n" +
                           "검색예를 확인하십시요." );
*/
                    alert( fieldName + " 입력 형식이 맞지 않습니다. \n\n" +
                           "예1) --12345?, 10-?-12345, ?-2003-12345\n" +
                           "예2) 12345? (권리,년도 제외한 7자리내의 일련번호)\n" + 
                           "예3) 1020031234567 (13자리 정상번호)" );
                    return false;
                }

                /**************************************************************
                 *  권리구분
                 *************************************************************/
                sElementArr[0] = Replace( sElementArr[0], " ", "" );
                if( sElementArr[0].length > 0 )
                {
                    if( sElementArr[0].length > 2 )
                    {
/*                    	
                        alert( fieldName + " 필드의\n" +
                               "[" + ++inx + "] 번째 권리구분는 2자리(10, 20) 이어야 합니다." );
*/                       
                        alert( fieldName + " 필드의 권리구분은  2자리(10, 20) 이어야 합니다.");
                        return false;
                    }
                    else if( sElementArr[0].length < 2 )
                    {
                        if( sElementArr[0]        == '?' &&
                            sElementArr[0].length == 1   )
                        {
                            strPvsU  = '?';
                        }
                        else
                        {
/*                        	
                            alert( fieldName + " 필드의\n" +
                                   "[" + ++inx + "] 번째 권리구분는 입력값에 문제가 있습니다." );
*/                            
			    alert( fieldName + " 필드의 권리구분은  2자리(10, 20) 이어야 합니다.");      
                            return false;
                        }
                    }
                    else
                    {
                        if( isNumber(sElementArr[0]) )
                        {
                            if( (sElementArr[0].charAt(0) == '1' || sElementArr[0].charAt(0) == '2') &&
                                (sElementArr[0].charAt(1) == '0' )                                   )
                            {
                                strPvsU = sElementArr[0];
                            }
                            else
                            {
/*                            	
                                alert( fieldName + " 필드의\n" +
                                       "[" + ++inx + "] 번째 권리구분의 입력값은 10 또는 20 입니다." );
*/                                       
			        alert( fieldName + " 필드의 권리구분은  2자리(10, 20) 이어야 합니다.");      
                                return false;
                            }
                        }
                        else
                        {
/*                        	
                            alert( fieldName + " 필드의\n" +
                                   "[" + ++inx + "] 번째 권리구분이 숫자가 아닙니다.(" + sElementArr[0] + ")" );
*/
			    alert( fieldName + " 숫자만 입력하세요");                                         
                            return false;
                        }
                    }
                }
                else
                {
                    strPvsU  = '?';
                }

                /**************************************************************
                 *  입력년도 값
                 *************************************************************/
                sElementArr[1] = Replace( sElementArr[1], " ", "" );
                if( sElementArr[1].length > 0 )
                {
                    if( sElementArr[1].length > 4 )
                    {
/*                    	
                        alert( fieldName + " 필드의\n" +
                               "[" + ++inx + "] 번째 입력년도 검색어는 4자리( ex:2004 ) 이어야 합니다." );
*/           
			 alert( fieldName + " 필드의 입력년도는 4자리( ex:2004 ) 이어야 합니다.");                                                             
                        return false;
                    }
                    else if( sElementArr[1].length < 4 )
                    {
                        if( sElementArr[1].length    == 1   &&
                            sElementArr[1].charAt(0) == '?' )
                        {
                            strYear  = '?';
                        }
                        else
                        {
/*                        	
                            alert( fieldName + " 필드의\n" +
                                   "[" + ++inx + "] 번째 입력년도 검색어는 4자리( ex:2004 ) 이어야 합니다." );
*/                                   
	  		    alert( fieldName + " 필드의 입력년도는 4자리( ex:2004 ) 이어야 합니다.");
                            return false;
                        }
                    }
                    else if( sElementArr[1].length == 4 )
                    {
                        if( isNumber(sElementArr[1]) )
                        {
                            if( now_year >= sElementArr[1] )
                            {
                                strYear = sElementArr[1];
                            }
                            else
                            {
/*                            	
                                alert( fieldName + " 필드의\n" +
                                       "[" + ++inx + "] 번째 입력년도는  현재년도 보다 큽니다." );
*/           
	  		        alert( fieldName + " 필드의 입력년도는  현재년도 보다 큽니다.");                            
                                return false;
                            }
                        }
                        else
                        {
/*                        	
                            alert( fieldName + " 필드의\n" +
                                   "[" + ++inx + "] 번째 입력년도는 숫자가 아닙니다." );
*/
  		            alert( fieldName + " 숫자만 입력하세요");                                                               
                            return false;
                        }
                    }
                }
                else
                {
                    strYear  = '?';
                }

                /**************************************************************
                 *  검색번호 일련번호 값
                 *************************************************************/
                sElementArr[2] = Replace( sElementArr[2], " ", "" );
                if( sElementArr[2].length > 0 )
                {
                    if( isNumber(sElementArr[2]) )
                    {
                        /* 검색어 번호별 3번째 일렬번호 7자리 맞춰주기 *******/
                        strPatNo  = sElementArr[2];
                        iPatNoLen = strPatNo.length;

                        if( iPatNoLen > 7 )
                        {
/*                        	
                            alert( fieldName + " 필드의\n" +
                                   "[" + ++inx + "] 번째 검색어의 일련번호는 7자리 보다 많아서는 않됩니다.("+ iPatNoLen+ ")" + sElementArr[2] );
*/
                            alert( fieldName + " \n" +
                                   "일련번호는 7자리 이하입니다.("+ iPatNoLen+ ")" + sElementArr[2] );
                            return false;
                        }
                        else if( iPatNoLen < 7 && iPatNoLen > 1 )
                        {
                            strTempPatNo = "";
                            if( strPatNo.charAt( strPatNo.length - 1 ) != '?' )
                            {
                                for( qnx = 1; qnx <= 7 - iPatNoLen; qnx++ )
                                {
                                    strTempPatNo = strTempPatNo + '0';
                                }
                                strPatNo = strTempPatNo + strPatNo;
                            }
                            else
                            {
                                strPatNo = sElementArr[2];
                            }
                        }
                        else
                            ;
                    }
                    else
                    {
/*                    	
                        alert( fieldName + " 필드의\n" +
                               "[" + ++inx + "] 번째 검색어는 숫자가 아닙니다." );
*/                    
  		        alert( fieldName + " 숫자만 입력하세요");                                                                   

                        return false;
                    }
                }
                else
                {
                    strPatNo  = '?';
                }

                strFieldTotalQuery += strPvsU + '-' + strYear + '-' + strPatNo + strOperator.charAt(inx);

            }

        }

    } /* for loop */


//alert( strFieldTotalQuery );

    return  strFieldTotalQuery;

}

function fCheckRegiNum( inputValue, fieldName )
{
    var inx = 0;
    var knx = 0;
    var qnx = 0;
    var dashCnt    = 0;
    var tokenCnt   = 0;
    var iRegiNoLen = 0;

    var strPvsU       = "";
    var strRegiNo     = "";
    var strTempRegiNo = "";
    var strElement    = "";
    var sSearchAll    = 0;

    var temp          = "";

    var strTempInputValue  = "";
    var strFieldTotalQuery = "";

    inputValue = Replace(inputValue,"[","");
    inputValue = Replace(inputValue,"]","");    

    if( inputValue.length <= 0 )  return ;

    inputValue = strTempInputValue = Replace( inputValue, " ", "+" );

    /**
     **  sTokenArr   <- array
     **  strOperator <- operator collected string
     **/
    tokenCnt = fNumQueryTokenize( inputValue );


    for( inx = 0; inx <= tokenCnt; inx++ )
    {
        dashCnt = fFind( sTokenArr[inx], '-' );
        if( dashCnt != 2 && dashCnt != 1 && dashCnt != 0 )
        {
/*        	
                alert( fieldName + " 필드의\n\n" +
                       "[" + ++inx + "] 번째 검색어는 지원되지 않습니다.\n\n" +
                       "검색어 입력시 \'-\' 갯수는 3개 이상이여서는 않됩니다."  );
*/                       
                alert( fieldName + " \n" +
                       "검색어 입력시 '-' 갯수는 3개 이상이여서는 안됩니다."  );
            return false;
        }
        else if( dashCnt == 0 && sTokenArr[inx].length <= 11 )
        {
            
            sTokenArr[inx] = "-" + sTokenArr[inx];
        }

                                                                       //012346789012345
        if( sTokenArr[inx].length == 13 )         /* 13자리 모두 입력 예)1001971140000 */
        {
            temp = sTokenArr[inx].substring(9,13);
            if( temp != "0000" )
            {
                alert( "등록번호 13자리 중 끝자리 4자리는 '0000' 입니다." );
                return false;
            }

            strFieldTotalQuery += sTokenArr[inx].substring(0, 2);
            strFieldTotalQuery += "-";
            strFieldTotalQuery += sTokenArr[inx].substring(2,13)+ strOperator.charAt(inx);
        }                                                              //012346789012345
        else if( sTokenArr[inx].length == 14 )    /* 13자리 모두 입력 예)10-01971140000 */
        {
            temp = sTokenArr[inx].substring(10,14);
            if( temp != "0000" )
            {
                alert( "등록번호 13자리 중 끝자리 4자리는 '0000' 입니다." );
                return false;
            }

            strFieldTotalQuery += sTokenArr[inx] + strOperator.charAt(inx);
        }                                                              //   012346789012345
        else if( sTokenArr[inx].length == 15 )    /* 13자리 모두 입력 예)10-0197114-0000 */
        {
            temp = sTokenArr[inx].substring(11,15);
            if( temp != "0000" )
            {
                alert( "등록번호 13자리 중 끝자리 4자리는 '0000' 입니다." );
                return false;
            }

          strFieldTotalQuery += sTokenArr[inx].substring(0 ,10);
          strFieldTotalQuery += sTokenArr[inx].substring(11,15)+ strOperator.charAt(inx);
        }
        else if( sTokenArr[inx].length == 9 )     /* 13자리 모두 입력 예)100197114      */
        {
            if( sTokenArr[inx].charAt(0) != '-' )
            {
                strFieldTotalQuery += sTokenArr[inx].substring(0,2);
                strFieldTotalQuery += "-0";
                strFieldTotalQuery += sTokenArr[inx].substring(3,9);
                strFieldTotalQuery += "0000" + strOperator.charAt(inx);
            }
            else
                strFieldTotalQuery += sTokenArr[inx]+ strOperator.charAt(inx);
        }
        else
        {

            /***
             *** TokenArr 에 있던 "10-01971140000" 번호가
             *** '-'별로 split 하여 sElementArr에 입력
             ***/
            fResetElementArray();
            sElementArr = sTokenArr[inx].split('-');

            if( sElementArr[0].length <= 0 && sElementArr[1].length <= 0 )
            {
                //alert( fieldName + " 필드의\n" +
                //       "[" + ++inx + "] 번째 검색어는 지원되지 않습니다.("+sElementArr[0]+sElementArr[1]+")");
                //return false;
                continue;
            }

            /******************************************************************
             *****  권리구분
             ******************************************************************/
            sElementArr[0] = Replace( sElementArr[0], " ", "" );
            if( sElementArr[0].length > 0 )
            {
                if( sElementArr[0].length > 2 )
                {
/*                	
                    alert( fieldName + " 필드의\n" +
                           "[" + ++inx + "] 번째 권리구분은 2자리(10, 20) 이어야 합니다." );
*/                           
                    alert( fieldName + " 필드의 권리구분은  2자리(10, 20) 이어야 합니다." );
                    return false;
                }
                else if( sElementArr[0].length < 2 )
                {
                    if( sElementArr[0]        == '?' &&
                        sElementArr[0].length == 1   )
                    {
                        strPvsU  = '?';
                    }
                    else
                    {
/*                    	
                        alert( fieldName + " 필드의\n" +
                               "[" + ++inx + "] 번째 권리구분는 입력값에 문제가 있습니다." );
*/                               
                        alert( fieldName + " 입력값에 문제가 있습니다." );
                        return false;
                    }
                }
                else
                {
                    if( isNumber(sElementArr[0]) )
                    {
                        if( (sElementArr[0].charAt(0) == '1' || sElementArr[0].charAt(0) == '2') &&
                            (sElementArr[0].charAt(1) == '0' )                                   )
                        {
                            strPvsU = sElementArr[0];
                        }
                        else
                        {
/*                        	
                            alert( fieldName + " 필드의\n" +
                                   "[" + ++inx + "] 번째 권리구분의 입력값은 10 또는 20 이어야 합니다." );
*/
                    	    alert( fieldName + " 필드의 권리구분은  2자리(10, 20) 이어야 합니다." );                                   
                            return false;
                        }
                    }
                    else
                    {
/*                    	
                        alert( fieldName + " 필드의\n" +
                               "[" + ++inx + "] 번째 권리구분이 숫자가 아닙니다." );
*/
                    	alert( fieldName + " - 숫자만 입력하세요" );                               
                        return false;
                    }
                }
            }
            else
            {
                strPvsU  = '?';
            }

            /******************************************************************
             *****  등록 검색 일련번호 값
             ******************************************************************/
            sElementArr[1] = Replace( sElementArr[1], " ", "" );


            if( sElementArr[1].length > 0 )
            {
                if( isNumber(sElementArr[1]) )
                {
                    /* 검색어 번호별 2번째 일렬번호 7자리 맞춰주기 ***********/
                    strRegiNo  = sElementArr[1];
                    iRegiNoLen = strRegiNo.length;

                    if( iRegiNoLen > 11 )
                    {
/*                    	
                        alert( fieldName + " 필드의\n" +
                               "[" + ++inx + "] 번째 검색어의 일련번호는 11자리 보다 많아서는 않됩니다." );
*/                               
                        alert( fieldName + " 필드의 일련번호는 11자리 보다 많아서는 않됩니다." );
                        return false;
                    }
                    else if( iRegiNoLen <= 11 && iRegiNoLen >= 1 )
                    {
                        if( iRegiNoLen <= 7 )
                        {
                            strTempRegiNo = "";
                            if( strRegiNo.charAt( strRegiNo.length - 1 ) != '?' )
                            {
                                for( qnx = 1; qnx <= 7 - iRegiNoLen; qnx++ )
                                {
                                    strTempRegiNo += '0';
                                }
                                strRegiNo = strTempRegiNo + strRegiNo ;

                                strFieldTotalQuery += strPvsU +'-'+ strRegiNo +"0000"+ strOperator.charAt(inx);

                            }
                            else // 일련번호의 마지막자가 "?" 일 경우 그대로 넘겨줌
                            {
                                strRegiNo = sElementArr[1];
                                //sSearchAll = 1;

                                strFieldTotalQuery += strPvsU +'-'+ strRegiNo + strOperator.charAt(inx);

                            }
                        }
                        else if( iRegiNoLen > 7 && iRegiNoLen <= 11 )
                        {
                            strTempRegiNo = "";
                            if( strRegiNo.charAt( strRegiNo.length - 1 ) != '?' )
                            {
                                temp = strRegiNo.substring(7,strRegiNo.length);
                                if( temp != "0000" ||
                                    temp != "000"  ||
                                    temp != "00"   ||
                                    temp != "0"     )
                                {
                                    alert( "등록번호 13자리 중 끝자리 4자리는 '0000' 입니다.("+strRegiNo+")" );
                                    return false;
                                }

                                for( qnx = 1; qnx <= 11 - iRegiNoLen; qnx++ )
                                {
                                    strTempRegiNo += '0';
                                }
                                strRegiNo = strRegiNo + strTempRegiNo ;
                            }
                            else // 일련번호의 마지막자가 "?" 일 경우 그대로 넘겨줌
                            {
                                strRegiNo = sElementArr[1];
                                strFieldTotalQuery += strPvsU +'-'+ strRegiNo + strOperator.charAt(inx);
                            }
                        }
                    }
                    else
                        ;
                }
                else
                {
/*                	
                    alert( fieldName + " 필드의\n" +
                           "[" + ++inx + "] 번째 검색어는 숫자가 아닙니다." );
*/
                        alert( fieldName + " - 숫자만 입력하세요" );                           
                    return false;
                }
            }
            else
            {
                strRegiNo  = '?';
                strFieldTotalQuery += strPvsU +'-'+ strRegiNo + strOperator.charAt(inx);
            }
        }

    } /* for loop */

 //   alert(strFieldTotalQuery);
    return  strFieldTotalQuery;
}


/*---------------------------------------------------------------------------*/
/* FUNCTION : fFind( inputStr, inputChar );                                  */
/*---------------------------------------------------------------------------*/
function fFind( inputStr, inputChar )
{
    var inx = 0;
    var cnt = 0;

    for( inx = 0; inx <= inputStr.length; inx++ )
    {
        if( inputStr.charAt(inx) == inputChar )  cnt++;
    }
    return cnt;
}

/*****************************************************************************/
/* global declaration                                                        */
/*****************************************************************************/
                                                                           /**/
var sTokenArr   = new Array(1000);                                         /**/
var sElementArr = new Array(1000);                                         /**/
var strOperator = "";                                                      /**/
                                                                           /**/
/*****************************************************************************/
/* global declaration                                                        */
/*****************************************************************************/



/*---------------------------------------------------------------------------*/
/* FUNCTION : fReset();                                                      */
/*---------------------------------------------------------------------------*/
function fResetTokenArray()
{
    var inx;
    for( inx = 0; inx < 1000; inx++)
    {
        sTokenArr[inx] = "";
    }
    strOperator = "";
}

function fResetElementArray()
{
    var inx;
    for( inx = 0; inx < 1000; inx++)
    {
        sElementArr[inx] = "";
    }
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : fNumQueryTokenize();                                           */
/*---------------------------------------------------------------------------*/
function fNumQueryTokenize( inputStr )
{
    var inx = 0;
    var knx = 0;
    var mnx = 0;
    var pnx = 0;
    var strTemp = "";

    fResetTokenArray();

    while( inx <= inputStr.length )
    {
        if( sTokenArr[inx] == "undefined" )  sTokenArr[inx] = "";

        if( inx == '\0' || inx == inputStr.length )
            sTokenArr[knx] = strTemp;

        switch( inputStr.charAt(inx) )
        {
            case '+':
            case '*':
            case ')':
            case '(':
                /* 연산자를 따로 모아둔다. */
                strOperator += inputStr.charAt(inx);
                /* global array 에 input   */
                sTokenArr[knx] = strTemp;
                strTemp = "";
                knx++;
                inx++;
                break;
            default:
                strTemp = strTemp + inputStr.charAt(inx);
                inx++;
                break;
        }
    }

    return  knx;
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : fIsOperator(); 연산자 확인                                     */
/*---------------------------------------------------------------------------*/
function fIsOperator( op )
{
    var vsOperationKind = '+*=';

    for( var i = 0; i < vsOperationKind.length; i++ )
    {
        if( op == vsOperationKind.charAt(i) )
            return true;
    }

    return false;
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : fIsDoubleOperator(); 연산자 중복 확인                          */
/*---------------------------------------------------------------------------*/
function fIsDoubleOperator( query )
{
    var inx = 0;

    for( inx = 0; inx < query.length; inx++ )
    {
        if( fIsOperator(query[inx]  ) == true &&
            fIsOperator(query[inx+1]) == true )    return true;
    }

    return false;
}
/*----------------------- 번 호 관 련 함 수  끝 -----------------------------*/



/*----------------------- 일 자 관 련 함 수  --------------------------------*/
/*---------------------------------------------------------------------------*/
/* FUNCTION : ConvertDateFormat(); 일자포맷완성                              */
/*---------------------------------------------------------------------------*/
function ConvertDateFormat(value, name)
{
    var str = "", i=0;
    var FromDate = "";
    var ToDate   = "";
    
    value = StrDelStr( value, ' ' );
    value = StrDelStr( value, '/' );
    value = StrDelStr( value, '*' );
    value = StrDelStr( value, '.' );
    value = StrDelStr( value, '-' );
    value = StrDelStr( value, '_' );

    for( i = 0; i < value.length; i++ )
    {
        if( (value.charAt(i) < '0' || value.charAt(i) > '9') &&
            (value.charAt(i) != '~'                        ) &&
            (value.charAt(i) != '?'                        )  )   break;
    }

    //if( i != value.length )    return '' ;

    if( value.length < 17 )
    {
        /* 예) 200401~200403 일 경우 ( 13 자리 ) */
        if( value.length == 13 )
        {
            var DelimeterPos = value.indexOf( '~' );

            if(DelimeterPos == 0)  return str;

        	var FromDate = value.substring(0, DelimeterPos);
        	var ToDate   = value.substring(DelimeterPos+1, value.length);

            yy = eval(ToDate.substring(0,4));
            mm = eval(ToDate.substring(4,6));
            dd = Getdd(yy, mm);

            FromDate = FromDate + '01';
            ToDate   = ToDate   + dd;

            /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
            str = FromDate + '~' + ToDate;

            return  str;
        }

        switch( IsDateFormat(value) )
        {
            case 'yyyy':
                FromDate = value + '0101';
                ToDate   = value + '1231';
                /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
                str = FromDate + '~' + ToDate;
                break;

            case 'yyyy?':
                FromDate = value.substring(0,4) + '0101';
                ToDate   = value.substring(0,4) + '1231';
                /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
                str = FromDate + '~' + ToDate;
                break;

            case 'yyyymm':
                yy = eval(value.substring(0,4));
                mm = eval(value.substring(4,6));
                dd = Getdd(yy, mm);
                FromDate = value + '01';
                ToDate   = value + dd;
                /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
                str = FromDate + '~' + ToDate;
                break;

            case 'yyyymm?':
                yy = eval(value.substring(0,4));
                mm = eval(value.substring(4,6));
                dd = Getdd(yy, mm);
                FromDate = value.substring(0,6) + '01';
                ToDate   = value.substring(0,6) + dd;
                /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
                str = FromDate + '~' + ToDate;
                break;

            case 'yyyymmdd':
                yy = eval(value.substring(0,4));
                mm = eval(value.substring(4,6));
                dd = eval(value.substring(6,2));
                FromDate = value;
                ToDate   = value;
                /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
                str = FromDate + '~' + ToDate;
                break;

            default:
    		    str = '';
    		    break;
        }
    }

    if( value.length == 17 )
    {
        var DelimeterPos = value.indexOf('~');

        if( DelimeterPos == 0 )  return str;

    	var FromDate = value.substring( 0, DelimeterPos );
    	var ToDate   = value.substring( DelimeterPos + 1, value.length );

    	if( IsDateFormat(FromDate) == 'yyyymmdd' && IsDateFormat(ToDate) == 'yyyymmdd' )
    	{
            /*str = '(' + name + '>=' + FromDate + ')<and>(' + name + '<=' + ToDate + ')';*/
            str = FromDate + '~' + ToDate;
    	}
    	else
    	{
    		str = "";
        }
    }

    return str;
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : IsDateFormat( param ); Data 포맷 확인                          */
/*---------------------------------------------------------------------------*/
function IsDateFormat(date)
{
    var i = 0;
    var yy, mm, dd;

    if( (date.length > 8)                            ||
        (date.length == 5 && date.charAt(4) != '?' ) ||
        (date.length == 7 && date.charAt(6) != '?' ) )
    {
        alert( " 입력하신 일자가 포맷에 맞지 않습니다.  " );
    }

    // 숫자인지 검사한다. 아니면 false
    if(date.length >= 4 && date.charAt(3) != '?')
    {
        yy = eval(date.substring(0,4));
        if(yy < 1893 || yy > 2099)
        {
            alert( " 입력하신 년(年)도는 형식이 맞지 않습니다.  " );
            return false;
        }

	if(date.length == 4)
            return 'yyyy';
        if(date.length == 5 && date.charAt(4) == '?')
            return 'yyyy?';
    }
    else
    {
        return false;
    }

    if(date.length >= 6 && date.charAt(5) != '?')
    {
	    mm = eval(date.substring(4,6));
	    if(mm < 1 || mm > 12)
	    {
            alert( " 입력하신 월(月)은 조회가능한 월(1~12)이 아닙니다.  " );
            return false;
        }

	    if(date.length == 6 )                         return 'yyyymm';
        if(date.length == 7 && date.charAt(6) == '?') return 'yyyymm?';
    }
    else
    {
        return false;
    }

    if(date.length == 8 && date.charAt(7) != '?')
    {
        dd = eval(date.substring(6,8));
	    if(dd < 1 || dd > Getdd(yy, dd))
	    {
	        alert( " 입력하신 일(月)은 조회가능한 일(1~31)이 아닙니다.  " );
            return false;
        }

	    if(date.length == 8)  return 'yyyymmdd';
    }
    else
    {
        return false;
    }
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : StrDelStr(); 특정문자 제거                                     */
/*---------------------------------------------------------------------------*/
function StrDelStr(Lstr, Sstr)
{
    var str = "";
    var index = Lstr.indexOf( Sstr );

    if( index == -1 ) {
	    str = Lstr;
    }
    else {
        str = Lstr.substring(0, index) + Lstr.substring(index+Sstr.length, Lstr.length);
        str = StrDelStr(str, Sstr);
    }

    return str;
}
/*---------------------------------------------------------------------------*/
/* FUNCTION : Replace(); 특정문자 교체                                       */
/*---------------------------------------------------------------------------*/
function Replace(string, src, dst)
{
    var str = string, words = "";

    if(string.indexOf(src) != -1)
    {
        words = str.split(src);
        str = words[0];

        for(i=1; i<words.length; i++)
        {
            str += dst + words[i];
        }
    }

    return str;
}

/*---------------------------------------------------------------------------*/
/* FUNCTION : Getdd(); 월별일자 가져오기                                     */
/*---------------------------------------------------------------------------*/
function Getdd(yy, mm)
{
    month = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

    if(mm == 2)
   {
    	if(((yy % 4 == 0) && (yy % 100 != 0)) || (yy % 400 == 0))
            month[1] = 29;
    	else
    	    month[1] = 28;
    }

    return month[mm - 1];
}



/*---------------------------------------------------------------------------
 *
 * 윈도우 오픈2 (무조건 가운데 생성)
 * param : wUrl		지정url
 * param : wTitle	지정타이틀
 * param : wWidth	창넓이
 * param : wHeight	창높이
 * param : wSco		스크롤바 생성유무, 1:생성 0:비생성
 * 수정 : 2003.05.02 scrollbars -> scrollbar
 *---------------------------------------------------------------------------*/
function win_open3(wUrl,wTitle,wWidth,wHeight,wSco)
{
	var top_po = (screen.availHeight/2) - (wHeight/2);
	var left_po = (screen.availWidth/2) - (wWidth/2);

	window.open(wUrl,wTitle, "top="+top_po+", left="+left_po+", width="+wWidth+", height="+wHeight+", scrollbar="+wSco);
}
/*---------------------------------------------------------------------------*/
/**************************************************************************************
	* Validation Check 
	* history 
	  -----------------------------------------------------------
	  2004.06.01		초기작성
**************************************************************************************/
var srchType1= new Array("AD" , "OPD", "GD", "RD", "PD", "IDT", "IOD", "TD"); //기존 날짜검색
//var srchType1= new Array("AD" , "OD", "GD", "PD");
//var srchType2= new Array("AN" , "ON", "GN", "RN", "FNA", "FNO");//기존
var srchType2= new Array("AN" , "OPN", "IAN", "ION", "NO", "GN");
var srchType3= new Array("IPC", "CLAS", "FI", "FT", "EC", "FS" );
//var srchType4= new Array("TL", "AB", "CL", "UR", "AP" , "IN" , "AG", "RU", "DC" ,"FR" , "OR"); //기존
var srchType4= new Array("TL", "AB", "CL", "UR", "AP" , "IN" , "AG", "RD", "RU", "DC" ,"FR" , "OR", "GN", "RN", "KW", "RB", "RC");

var paStack= new Array();
var itStack= new Array();
var opStack= new Array();

var paIndex= 0;
var itIndex= 0;
var opIndex= 0;
var chkKind= "B";

var srchType= "";	// 일자검색, 문자가포함된 일자검색, IPC검색, 일반단어검색
var group= false;	// 현재 읽고있는 검색식부분이 그룹내에 포함되었는지 체크 
var itemCnt= 0;		// 검색식내에 명시된 항목의 수 

// 키워드 검색식에서 특수문자 제거 //편무학(6.8) '!' 연산자 허용 //^(near) 연산자 허용  2007/11/26
var knword= new Array("@", "#", "$", "%", "&", "`", "_", "|", "'", "<", ">", "{", "}", ";", "/", ":","?");
// 번호검색식에서 특수문자 제거 
var nnword= new Array("!", "@", "#", "$", "%", "^", "&", "~", "`", "_", "|", "'", "<", ">", "*", "(", ")", "/", "\"", "{", "}", "[", "]", "=", ";", ":");
// 날짜검색식에서 특수문자 제거 
var dnword= new Array("!", "@", "#", "$", "%", "^", "&", "`", "_", "-", "|", "'", "*", "<", ">", "/", ".", "\"", "{", "}", "[", "]", "=", ";", ":");
// IPC검색식에서 특수문자 제거 
var inword= new Array("@", "#", "$", "%", "^", "&", "~", "`", "_", "|", "'", "<", ">", ".", "\"", "{", "}", "[", "]", "=", ";", ":");
// LP("("), RP(")"), LB("["), RB("]"), WO("단어"), OP("+,*"), EQ("=")

function kwValidationCheck(inputStr, kind) {
	var tmpStr= "";
	var oneChar= "";
	var previous= "";	
	// stack에 있는 모든 값을 초기화한다. 
	initAllStack();
	chkKind= kind;
	for( var i=0 ; i < inputStr.length ; i++ ) {
		oneChar= inputStr.charAt(i);
		
		// 좌측괄호나 올경우 괄호 stack에 저장
		if( oneChar == "(" ) {
			if( !group ) {
				if( !(previous == "LB" || previous == "OP" || previous == "LP" || previous == "" || previous == "NP")){
					//ws081009 자유검색에서 괄호앞에 NEAR연산(^)이 있을 경우 (자동차)^2(각도)                            
                                    var idx = tmpStr.lastIndexOf("^"); //현재 검사하고 있는 검색식(inputStr)의 마지막 NEAR연산(^)위치
                                    if(idx  <= 0)
                                    { //NEAR연산(^)이 없다면 원래대로 경고메세지
					alert(Number(i+1) + "번째 ( 문자 바로앞에는 [, +, *, ( 문자만 가능합니다");
					return false;
                                    }//end if idx
				}
				paStack.push(oneChar);
				paIndex++;
			}
			previous= "LP";		
			tmpStr += oneChar;										
		}
		else if( oneChar == ")" ) {
			if( !group ) {
				if( !(previous == "RB" || previous == "WO" || previous == "RP") ) {
					alert(Number(i+1) + "번째 ) 문자 바로앞에는 단어, ], ) 문자만 가능합니다");
					return false;
				}
				paStack.pop(oneChar);
				//paIndex++;
				paIndex--; // 20080613 CWS
			}
			previous= "RP";			
			tmpStr += oneChar;									
		}	
                else if( oneChar == "!" ) {
			if( !group ) {
				if( !(previous == "OP" || previous == "LP" ||previous == "")) {
					alert(Number(i+1) + "번째 ! 문자 바로앞에는 연산자(*), ( 문자만 가능합니다");
					return false;
				}
			}
			previous= "NP";			
			tmpStr += oneChar;									
		}		
		// 좌측 대괄호가 올경우 괄호내의 값을 
		else if( oneChar == "[" ) {
			if( previous != "EQ" ) {
				alert(Number(i+1) + "번째 [ 문자앞에는 = 문자만 가능합니다.");
				return false;
		}
			paStack.push(oneChar);
			paIndex++;
			previous= "LB";		
			tmpStr= "";
			group= true;
		}
		else if( oneChar == "]" ) {
			var popChar= "";
			if( !(previous == "WO" || previous == "RP") ) {
				alert(Number(i+1) + "번째 ] 문자 바로앞에는 단어,) 문자만 가능합니다.");
				return false;
			}
			popChar= paStack.pop();
			paIndex--;
			if( popChar != "[") {
				alert( Number(i+1) + "번째 ] 괄호에 대한 짝이 맞지 않습니다");
				return false;
			}
			popChar= opStack.pop();
			opIndex--;
			if( popChar != "=" ) {
				alert(Number(i+1) + "번째 항목=[] 에서 = 문자가 빠졌습니다.");
				return false;
			}
			popChar= itStack.pop();
			itIndex--;
			// 그룹내의 그룹식이 올바른지 정합성 체크
			if( !checkExprInItem(tmpStr, popChar) ) {
				return false;
			}
			tmpStr= "";
			previous= "RB";
			group= false;
		}
		else if( oneChar == "=" ) {
			// 첫번째 항목을 제외하고는 항목과 항목사이에 *,+ 연산자가 항상 존재해야한다.		
			itemCnt++;			
			tmpStr= Replace(tmpStr, "(", "");
			if( itemCnt > 0) {
				tmpStr= Replace(tmpStr, ")", "");
				tmpStr= Replace(tmpStr, "(", "");				
				//	키워드 검색이 항목검색 앞에 올경우 김치*AN=[]시 항목이 김치*AN 으로 오류발생 방지
				var itemArr= new Array();
				//itemArr= Split(tmpStr, "+,*");
                                itemArr= Split(tmpStr, "+!,+,*!,*"); // NOT 검색시 *!를 연산자로 인식하지 못해 오류가 발생하여 수정 by lhy 2013.04.30
				tmpStr= itemArr[itemArr.length-1];
/*				
				if (itemArr[itemArr.length-1] == "*" || itemArr[itemArr.length-1] == "+") {
					tmpStr= tmpStr.substring(1);
				}	
				else {
					alert("항목과 항목검색식 사이는 *,+ 로 연결되어야합니다.");
					return false;
				}
*/				
			}	
			if( !group ) {
				if( !checkSrchType(tmpStr) ) {
					alert(" [" + tmpStr + "] 항목은 존재하지 않습니다.");
					tmpStr= "";
					return false;
				}
				// 항목이 정상일 경우 항목 count증가
				itStack.push(tmpStr);
				itIndex++;
				opStack.push(oneChar);
				opIndex++;
			}	
			previous= "EQ";			
			tmpStr += oneChar;						
		}
		else if( oneChar == "+" || oneChar == "*" || oneChar == "^" ) {
			if( i == (inputStr.length-1) ) {
				alert("[" + inputStr + "] 마지막 문자는 우측괄호나 단어로 끝나야합니다.");
				return false;
			}		
			if( !group ) {
				if( !(previous == "RP" || previous == "RB" || previous == "WO") ) {
					alert(Number(i+1) + "번째 연산자 바로앞에는 ),],단어 만 가능합니다.");
					return false;
				}
				opStack.push(oneChar);
				opIndex++;
			}
			previous= "OP";			
			tmpStr += oneChar;						
		}
		// 단어일경우
		else {
			if( !group ) {
				if( (i != 0) && !(previous == "LP" || previous == "LB" || previous == "OP" || previous == "WO" || previous == "NP")  ) {
					alert(Number(i+1) + "번째 단어앞에는 (, [, *,+ 문자만 가능합니다.");
					return false;
				}
			}
			previous= "WO";			
			tmpStr += oneChar;			
		}
	}
	if( paIndex != 0 ) {
		alert("괄호개수가 일치하지 않습니다.");
		return false;
	}	
	if( itIndex != 0 ) {
		alert("검색항목 지정이 잘못되었습니다.");
		return false;
	}
}

// 특정문자를 받아서 split하는 함수 
function Split(inputStr, gubun) {
	var delimiters= new Array();
	var strArr= new Array();
	var tmpArr= new Array();
	var inx= 0;
	var tmpStr= "";
	var flag= true;
	delimiters= gubun.split(",");
	
	for( var i=0 ; i < inputStr.length ; i++ ) {
		for( var j=0 ; j < delimiters.length ; j++) {
			// 연산자가 두글자이상일때 처리 by lhy 2013.04.30
                        if(delimiters[j].length > 1 && (i <= inputStr.length - delimiters[j].length)){
                            if(inputStr.substring(i, i+delimiters[j].length) == delimiters[j] ){
                                strArr[inx++]= tmpStr;
                                tmpStr= "";
                                flag= true;
                                i = i + delimiters[j].length-1; // 추가된 글자길이만큼 체크할 글자를 건너뜀
                                break;
                            } else flag = false;                        
                        } else {
                            if( inputStr.charAt(i) == delimiters[j] ) {
                                strArr[inx++]= tmpStr;
                                tmpStr= "";
                                flag= true;
                                break;	
                            }
                            else flag= false;
                        }
                        /*
                        if( inputStr.charAt(i) == delimiters[j] ) {
				strArr[inx++]= tmpStr;
				tmpStr= "";
				flag= true;
				break;	
			}
			else flag= false; 
                        */
		}
		if( ! flag ) {
			tmpStr += inputStr.charAt(i);
		}	
	}
	if( i == inputStr.length) {
		strArr[inx++]= tmpStr;
	}	
	return strArr;
}	

// 배열에 명시된 특수문자 포함여부 확인
function isSpecialChar(comStr) {
	for( var j=0 ; j < comStr.length ; j++) {
		for( var i=0 ; i < nword.length ; i++ ) {
			if( comStr.charAt(j) == nword[i] ) {
				alert(comStr.charAt(j) + " 특수문자는 입력할수 없습니다.");			
				return true;
			}
		}
	}
	return false;
}

// keyword문자열내에서 str1을 str2로 변경
function Replace( inputStr, str1, str2) {
	var retStr= "";
	var splitStr= "";
	splitStr= inputStr.split(str1);
	for( var i=0 ; i < splitStr.length ; i++) {
		retStr += splitStr[i] + str2;
	}
	return retStr.substr(0, retStr.length - str2.length);
}

// keyword에서 \n, CR, LF, SPACE 제거
function Trim( inputStr ) {
	var retStr= "";
	for( var i=0 ; i < inputStr.length ; i++ ) {
		if( inputStr.charCodeAt(i) != 32 && inputStr.charCodeAt(i) != 13 && inputStr.charCodeAt(i) != 10)
			retStr += inputStr.charAt(i);
	}
	return retStr;	
}

// keyword내에서 oneChar의 문자 개수 
function getCount(inputStr, oneChar) {
	var matchCnt= 0;
	for( var i=0 ; i < inputStr.length ; i++) {
		if( inputStr.charAt(i) == oneChar ) 
			matchCnt++;
	}
	return matchCnt;
}

// keyword 항목의 검색변수 초기화 
function initAllStack() {
	for( var i=0 ; i < paStack.length ; i++)
		paStack.pop();
	for( var i=0 ; i < itStack.length ; i++)		
		itStack.pop();	
	for( var i=0 ; i < opStack.length ; i++)		
		opStack.pop();	
	srchType= "";		// 일자검색, 문자가포함된 일자검색, IPC검색, 일반단어검색
	group= false;		// 현재 읽고있는 검색식부분이 그룹내에 포함되었는지 체크 
	itemCnt= 0;		// 검색식내에 명시된 항목의 수 	
	chkKind= "B";	
	itIndex= 0;
	opIndex= 0;
	paIndex= 0;
}


function deleteSpecialChar(inputStr, type) {
	var retStr= "";
	var find=false;		// 특수문자를 찾을경우  true로 변경
	for( var i=0 ; i < inputStr.length ; i++) {
		switch(type) {
		case 'KW' : //kimsj
			for( var j=0 ; j < knword.length ; j++) {		
				if( inputStr.charAt(i) == knword[j] ) {
                                    if (inputStr.charAt(i) != '/')
                                    {
                                        find= true;
                                        break;					
                                    }
				}
			}
			break;
		case 'K' : 
			for( var j=0 ; j < knword.length ; j++) {		
				if( inputStr.charAt(i) == knword[j] ) {
					find= true;
					break;					
				}
			}
			break;		
		case 'D' : 
			for( var j=0 ; j < dnword.length ; j++) {		
				if( inputStr.charAt(i) == dnword[j] ) {
					find= true;
					break;					
				}
			}
			break;
		case 'I' : 
			for( var j=0 ; j < inword.length ; j++) {		
				if( inputStr.charAt(i) == inword[j] ) {
					find= true;
					break;					
				}
			}
			break;		
		case 'N' :
			for( var j=0 ; j < nnword.length ; j++) {		
				if( inputStr.charAt(i) == nnword[j] ) {
					find= true;
					break;
				}
			}
			break;
		}
		if( !find ) {
			retStr += inputStr.charAt(i);
		}	
		else find= false;
	}
	return retStr;
}

// 정합성을 검사하기위해 4가지 타입으로 분류
function checkSrchType(type) {
	for( var i=0 ; i < srchType1.length ; i++ ) {
		if( type == srchType1[i]) {
			srchType= "ONE";
			return true;
		}	
	}
	for( var i=0 ; i < srchType2.length ; i++ ) {
		if( type == srchType2[i]) {
			srchType= "TWO";
			return true;			
		}	
	}
	for( var i=0 ; i < srchType3.length ; i++ ) {
		if( type == srchType3[i]) {
			srchType= "THREE";
			return true;			
		}	
	}
	for( var i=0 ; i < srchType4.length ; i++ ) {
		if( type == srchType4[i]) {
			srchType= "FOUR";
			return true;			
		}	
	}	
	return false;
}

// 유효성을 검사할 항목에 따라 각각의 함수 호출
function checkExprInItem( str, type ) {
	if( srchType == "ONE") {
		return  checkSrchTypeOne(str, type);	
	}
	if( srchType == "TWO") {
		if( chkKind == "R" ) {
			alert("결과내 재검색에서는 번호검색을 할수 없습니다.");
			return false;
		}	
		return checkSrchTypeTwo(str, type);	
	}
	if( srchType == "THREE") {
		return checkSrchTypeThree(str, type);	
	}
	if( srchType == "FOUR") {
		return checkSrchTypeFour(str, type);	
	}
}

// 날짜 검색식에 대한 유효성체크
function  checkSrchTypeOne( inputStr, type ) {
	var curChar= "";
	var tmpStr= "";		// 숫자와 - 문자만 저장하는 문자열
	var previous= "";
//alert(type + "=" + inputStr);	
	if( getCount(inputStr, "(") != getCount(inputStr, ")")) {
		alert("[" + inputStr + "] - 검색식의 괄호'(,)'의 개수가 맞지 않습니다.");
		return;		
	}
//	inputStr= Trim(inputStr);	
//	inputStr= deleteSpecialChar(inputStr, 'D');	
	
	for( var i=0 ; i < inputStr.length ; i++) {
		curChar= inputStr.charAt(i);
		if( curChar == "(" ) {
			if( i != 0) {
				if( !(previous == "LP" || previous == "OP")) {
					alert("[" + inputStr + "]  -  ( 숫자앞에 (,+ 만 사용가능합니다.");
					return false;
				}
			}				
			previous= "LP";
		}
		else if( curChar == ")" ) {
			if( !(previous == "WO" || previous == "RP") ) {
				alert("[" + inputStr + "]  -  ) 숫자앞에 숫자,?,) 만 사용가능합니다.");
				return false;
			}
			if( !checkDateExpression(tmpStr) )
				return false;
			tmpStr= "";			
			previous= "RP";
		}	
		else if( curChar == "+" ) {
		    if( i == (inputStr.length-1) ) {
				alert("[" + inputStr + "]  -  마지막 문자는 우측괄호나 단어로 끝나야합니다.");
				return false;
			}
			if( i == 0) {
				alert("[" + inputStr + "] - 첫문자는 연산자로 시작할수 없습니다.");
				return false;
			}		
			if( !(previous == "WO" || previous == "RP") ) {
				alert("[" + inputStr + "]  -  + 숫자앞에 숫자,?,) 만 사용가능합니다.");
				return false;
			}
			if( !checkDateExpression(tmpStr, type) )
				return false;
			tmpStr= "";
			previous= "OP";
		}
		else {
			if( (i != 0) && !(previous == "LP" || previous == "OP" || previous == "WO") ) {
				alert("[" + inputStr + "]  -  숫자 앞에 숫자,?,+,~ 만 사용가능합니다.");
				return false;
			}
			tmpStr += curChar;	
			// 번호를 구분하는 기준이 숫자로 끝난경우(가장마지막 문자로 판단) 
			if ( i == (inputStr.length-1)) {
				if( !checkDateExpression(tmpStr) )
					return false;
			}	
			previous= "WO";
		}	
	}
	return true;	
}

// 날짜에 대한 유효성 검사
function checkDateExpression(inputStr) {
	var noArr= new Array();

	// 전체검색문자가 숫자와 - 만으로 이루어져 있는지 확인
	for( var i=0 ; i < inputStr.length ; i++ ) {
		// 번호중  - , ? 문자는 포함 가능
		if(  inputStr.charAt(i) != "~" && inputStr.charAt(i) != "?" ) {
			if( inputStr.charCodeAt(i) < 48 || inputStr.charCodeAt(i) > 57 ) {
				alert("[" + inputStr + "]  내에 숫자,?,~ 가 아닌 문자가 포함되어 있습니다.");
				return false;
			}
		}	
	}
	noArr= inputStr.split("~");	
	if( noArr.length > 2) {
		alert("[" + inputStr + "]중 날짜범위는 ~ 문자를 하나만 포함해야합니다.");
		return false;		
	}
	else  {
		for( var i=0 ; i < noArr.length ; i++ ) {
			if( ! isDateFormat(noArr[i]) ) 
				return false;
		}
	}
	return true;
}

function isDateFormat( inputStr ) {
	var date= new Date();
	var year= date.getFullYear();
	if( inputStr.length < 4 || inputStr.length > 8) {
		alert("[" + inputStr + "]중 날짜는 4자리 이상 8자리 이하여야 합니다.");
		return false;
	}

	// 앞4개 문자가 숫자가 아닐경우 판별 
	if( isNaN(inputStr.substring(0,4)) ) {
		alert("[" + inputStr + "]중 앞4자리가 숫자가 아닙니다.");
		return false;
	}	
	// 년도 체크 
	if( Number(inputStr.substring(0,4)) < 1893 || Number(inputStr.substring(0,4)) > year ) {
		alert("[" + inputStr + "]중 앞의 4자리년도는 1893부터 " + year + "사이여야 합니다.");
		return false;
	}
	return true;
}

// 번호 검색식에 대한 유효성 체크 
function checkSrchTypeTwo(inputStr, type) {
	var curChar= "";
	var tmpStr= "";		// 숫자와 - 문자만 저장하는 문자열
	var previous= "";
//alert(type + "=" + inputStr);	
	if( getCount(inputStr, "(") != getCount(inputStr, ")")) {
		alert("[" + inputStr + "] - 검색식의 괄호'(,)'의 개수가 맞지 않습니다.");
		return;		
	}
//	inputStr= Trim(inputStr);
//	inputStr= deleteSpecialChar(inputStr, 'N');		

	for( var i=0 ; i < inputStr.length ; i++) {
		curChar= inputStr.charAt(i);
		if( curChar == "(" ) {
			if( i != 0) {
				if( !(previous == "LP" || previous == "OP")) {
					alert("[" + inputStr + "]    ( 문자앞에 (,*,+ 만 사용가능합니다.");
					return false;
				}
			}				
			previous= "LP";
		}
		else if( curChar == ")" ) {
			if( !(previous == "WO" || previous == "RP") ) {
				alert("[" + inputStr + "]    ) 문자앞에 숫자,?,) 만 사용가능합니다.");
				return false;
			}
//번호검색 주석처리 2008/03/20	if( !divideNoType(tmpStr, type) )
//				return false;
			tmpStr= "";			
			previous= "RP";
		}	
		else if( curChar == "+" ) {
		    if( i == (inputStr.length-1) ) {
				alert("[" + inputStr + "]    마지막 문자는 우측괄호나 단어로 끝나야합니다.");
				return false;
			}
			if( i == 0) {
				alert("[" + inputStr + "]    첫문자는 연산자로 시작할수 없습니다.");
				return false;
			}		
			if( !(previous == "WO" || previous == "RP") ) {
				alert("[" + inputStr + "]    + 문자앞에 숫자,?,),- 만 사용가능합니다.");
				return false;
			}
//번호검색 주석처리 2008/03/20			if( !divideNoType(tmpStr, type) )
//				return false;
			tmpStr= "";
			previous= "OP";
		}
		else {
			if(  (i != 0) && !(previous == "LP" || previous == "OP" || previous == "WO") ) {
				alert("[" + inputStr + "]    숫자 앞에 숫자,?(,*,+,- 만 사용가능합니다.");
				return false;
			}
			tmpStr += curChar;	
			// 번호를 구분하는 기준이 숫자로 끝난경우(가장마지막 문자로 판단) 
///번호검색 주석처리 2008/03/20			if ( i == (inputStr.length-1)) {
//				if( !divideNoType(tmpStr, type) )
//					return false;
//			}	
			previous= "WO";
		}	
	}
	return true;
}

// 번호의 종류에 따라 체크타입을 달리하는 루틴
function divideNoType(inputStr, type) {
	return true;
}

function checkSrchTypeThree(inputStr, type) {
	var curChar= "";
	var tmpStr= "";		
	var previous= "";
//alert(type + "=" + inputStr);	
	if( getCount(inputStr, "(") != getCount(inputStr, ")")) {
		alert("[" + inputStr + "] 검색식의 괄호'(,)'의 개수가 맞지 않습니다.");
		return;		
	}
//	inputStr= Trim(inputStr);
//	inputStr= deleteSpecialChar(inputStr, 'N');		

	for( var i=0 ; i < inputStr.length ; i++) {
		curChar= inputStr.charAt(i);
		if( curChar == "(" ) {
			if( i != 0) {
				if( !(previous == "LP" || previous == "OP")) {
					alert("[" + inputStr + "]   ( 문자앞에 (,*,+ 만 사용가능합니다.");
					return false;
				}
			}				
			previous= "LP";
		}
		else if( curChar == ")" ) {
			if( !(previous == "WO" || previous == "RP") ) {
				alert("[" + inputStr + "]   ) 문자앞에 단어,?,) 만 사용가능합니다.");
				return false;
			}
			if( !isIpcFormat(tmpStr) )
				return false;
			tmpStr= "";			
			previous= "RP";
		}	
		else if( curChar == "+"  || curChar == "*" ) {
		    if( i == (inputStr.length-1) ) {
				alert("[" + inputStr + "]   마지막 문자는 우측괄호나 단어로 끝나야합니다.");
				return false;
			}
			if( i == 0) {
				alert("[" + inputStr + "]   첫문자는 연산자로 시작할수 없습니다.");
				return false;
			}		
			if( ! (previous == "WO" || previous == "RP") ) {
				alert("[" + inputStr + "]    +,* 문자앞에 단어,?,) 만 사용가능합니다.");
				return false;
			}
			if( ! isIpcFormat(tmpStr) )
				return false;
			tmpStr= "";
			previous= "OP";
		}
		else {
			if( (i != 0) && ! (previous == "LP" || previous == "OP" || previous == "WO") ) {
				alert("[" + inputStr + "]   문자앞에 단어,?(,*,+,/ 만 사용가능합니다.");
				return false;
			}
			tmpStr += curChar;	
			// 번호를 구분하는 기준이 숫자로 끝난경우(가장마지막 문자로 판단) 
			if ( i == (inputStr.length-1)) {
				if( ! isIpcFormat(tmpStr, type) )
					return false;
			}	
			previous= "WO";
		}	
	}
	return true;	
}

function isIpcFormat(inputStr) {
	// 전체검색문자가 숫자와 - 만으로 이루어져 있는지 확인
	for( var i=0 ; i < inputStr.length ; i++ ) {
		// 번호중  - , ? 문자는 포함 가능
		if(  inputStr.charAt(i) != "/" && inputStr.charAt(i) != "?" && inputStr.charAt(i) != "!" ) {
			if( (inputStr.charCodeAt(i) >= 48 && inputStr.charCodeAt(i) <= 57)
				|| (inputStr.charCodeAt(i) >= 65 && inputStr.charCodeAt(i) <= 90)
				|| (inputStr.charCodeAt(i) >= 97 && inputStr.charCodeAt(i) <= 122) ) ;
			else {	
				alert("[" + inputStr + "]   알파벳,-,숫자 이외의 문자는 허용되지 않습니다.");
				return false;
			}
		}	
	}

/*
	if( inputStr.length < 4 || inputStr.length > 14) {
		alert("IPC는 최소 4자리에서 최대 14자리까지만 지원됩니다.");
		return false;
	}
*/	
	return true;
}

// "TL", "AB", "CL", "IN", "INDR", "AP", "APDR", "AG", "AGDR", "RN", "FN", "FON", "KW" 항목 validation체크
function checkSrchTypeFour(inputStr, type) {
	var chkStr= "";
	var curChar= "";
	var previous= "";
	var braceCnt= 0;
//alert(type + "=" + inputStr);
//	inputStr= Trim(inputStr);
//	inputStr= deleteSpecialChar(inputStr, 'N');		
	if( getCount(inputStr, "(") != getCount(inputStr, ")")) {
		alert("[" + inputStr + "]   검색식의 괄호'(,)'의 개수가 맞지 않습니다.");
		return;		
	}	
	
	for( var i=0 ; i < inputStr.length ; i++) {
		curChar= inputStr.charAt(i);
		if( curChar == "(" ) {
			if( previous == "WO" || previous == "RP") {
				alert("[" + inputStr + "]    ( 바로앞에 단어, ) 는 사용할수 없습니다.");
				return false;
			}
			braceCnt++;
			previous= "LP";
			chkStr= "";
		}
    else if( curChar == "!" ) {
			if( !(previous == "OP" || previous == "LP" || previous == "")) {
				alert("[" + inputStr + "]    ! 바로앞에는 연산자(*), ( 문자만 가능합니다");
				return false;
			}
			previous= "NP";
			chkStr= "";
		}
		else if( curChar == ")" ) {
			if( previous == "LP" || previous == "OP" ) {
				alert("[" + inputStr + "]     ) 바로앞에 (,+,*  는 사용할수 없습니다.");
				return false;
			}
			braceCnt--;
			if( braceCnt < 0 ) {
				alert("[" + inputStr + "]    ) 개수가 많습니다.");
				return false;
			}	
			// 단어중 앞절단자 검색 
			for( var j=0 ; j < chkStr.length ; j++ ) {
				if( chkStr.charAt(j) == "?" && j != (chkStr.length-1) ) {
					alert("[" + inputStr + "]    앞절단자를 사용하실 수 없습니다.");
					return false;
				}
			}
			chkStr= "";					
			previous= "RP";
		}	
		else if( curChar == "+" || curChar == "*" ) {
		    if( i == (inputStr.length-1) ) {
				alert("[" + inputStr + "]     마지막 문자는 우측괄호나 단어로 끝나야합니다.");
				return false;
			}
			if( previous == "LP" || previous == "OP" ) {
				alert("[" + inputStr + "]     +,* 바로앞에 (,*,+ 는 사용할수 없습니다.");
				return false;
			}
			if( type != "NO") {			
				// 단어중 앞절단자 검색 
				for( var j=0 ; j < chkStr.length ; j++ ) {
					if( chkStr.charAt(j) == "?" && j != (chkStr.length-1) ) {
						alert("[" + inputStr + "]    앞절단자를 사용하실 수 없습니다.");
						return false;
					}
				}	
			}
			chkStr= "";
			previous= "OP";
		}	
		else {
                        // AB=[]검색 오류 20090603 parkgh start
                        if(curChar == "^"){
                            previous= "OP";
                        }//end
                        
			if( previous == "RP" ) {
				alert("[" + inputStr + "]     단어 바로앞에 ) 는 사용할수 없습니다.");
				return false;
			}
			previous= "WO";
			// 단어일때만 앞절단체크하기 위해 문자를 더한다.
			chkStr += curChar;
                        
                        // AB=[]검색 오류 20090603 parkgh start
                        if(chkStr.indexOf("^") != -1){
                            previous= "OP";                            
                        }//end                         
		}
	}
	// 앞절단자는 ), 마지막단어, 연산자 기준으로 체크 
	for( var j=0 ; j < chkStr.length ; j++ ) {
		if( chkStr.charAt(j) == "?" && j != (chkStr.length-1) ) {
			alert("[" + inputStr + "]     앞절단자를 사용하실 수 없습니다.");
			return false;
		}
	}
	// 최종적으로 brace 개수를 확인한다.
	if( braceCnt != 0 ) {
		alert("[" + inputStr + "]    검색식의 괄호'(,)'의 개수가 맞지 않습니다.");
		return false;
	}
	return true;
}
/*-------------------------------- End of File ------------------------------*/


















//-->
</script>
<section id="smart_finder">
<form method="post" name="SearchItemForm" onsubmit="return false;">
<div class="detail_smart" id="divSmartFinderWrap" style="display: none; height: 0px;">
<div id="divSmartFinder">
<div class="helpme_info" title="새창으로 열림"><img alt="도우미" class="vertical_mid" src="/abpat/images/button/icon_helpme.gif"/> 표시되어 있는 항목은 <strong class="point02">검색정보 입력도우미</strong>를 클릭하면 자세한 설명을 볼 수 있으며 각 항목에 대한 값을 쉽게 입력할 수 있습니다.</div>
<table>
<caption>
				스마트검색 항목별 검색(전체검색여부, 자유검색 (전문), IPC, CPC, 분류정보, 일자정보, 직접입력, 우선권주장 국가(RC), 이름/코드/주소)
				</caption>
<colgroup>
<col style="width:120px;"/>
<col/>
</colgroup>
<tbody><tr>
<th scope="row"><label for="KW">자유검색 (전문) <a href="javascript:void(newPopupWindow('http://www.kipris.or.kr/khome/help/help06/help06_1.jsp','HelpWin',820,800,'C','M','scrollbars=yes'));" title="해외특허 검색도움말 새창으로 열림"><img alt="해외특허검색도움말" class="vertical_mid" src="/abpat/images/button/icon_help01.gif"/></a></label></th>
<td>
<input class="input_mid" id="KW" name="KW" placeholder='ex)구문으로 검색을 할 경우 : "video tape"' style="background-color: rgb(255, 255, 255);" title="자유검색어 입력" type="text" value=""/>
<select id="operate00" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
<a href="javascript:getTargetWords('N')" title="영문 대역어 확장"><img alt="영문 대역어 확장" class="vertical_mid" src="/abpat/images/common/targetWordBtn.png"/></a>
</td>
</tr>
<tr>
<th scope="row"><label for="IPC">IPC <a href="javascript:remoconHelpOpen(2,'1')" title="새창으로 열림"><img alt="도우미" class="vertical_mid" src="/abpat/images/button/icon_helpme.gif"/></a></label></th>
<td>
<input class="input_mid" id="IPC" name="IPC" placeholder="ex)G06F17/60 + H04Q" style="background-color: rgb(255, 255, 255);" title="ipc분류 입력" type="text" value=""/>
<select id="operate01" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</td>
</tr>
<tr>
<th scope="row"><label for="CPC">CPC <a href="javascript:remoconHelpOpen(2,'6')" title="새창으로 열림"><img alt="도우미" class="vertical_mid" src="/abpat/images/button/icon_helpme.gif"/></a></label></th>
<td>
<input class="divOnlyCpcInput" id="CPC" name="CPC" placeholder="ex)F24F 3/06" style="width: 50%; background-color: rgb(255, 255, 255);" title="CPC 입력" type="text" value=""/>
<select id="operate06" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
<a href="javascript:CPCinfoDivDisplay();"><img alt="CPC 코드정보 안내문구" id="questionBtn" src="/abpat/images/service/questionIcon.gif"/></a>
<a href="http://file.kipris.or.kr/abpat_manual/CPCtoIPC.xlsx" target="_blank" title="새창으로 열림"><img alt="CPC-IPC매핑" class="vertical_mid" src="/abpat/images/button/CPC_IPC_btn.png"/></a>
</td>
</tr>
<tr>
<th scope="row">분류정보</th>
<td class="codeInfo_input">
<p class="input_group">
<span>
<label for="CLAS">UPC(CLAS) <a href="javascript:remoconHelpOpen(2,'3')" title="새창으로 열림"><img alt="도우미" class="vertical_mid" src="/abpat/images/button/icon_helpme.gif"/></a></label>
<input id="CLAS" name="CLAS" placeholder="ex)144/0041" style="background-color: rgb(255, 255, 255);" title="UPC 입력" type="text" value=""/>
<select id="operate02" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="EC">EPC(EC) <a href="javascript:remoconHelpOpen(2,'2')" title="새창으로 열림"><img alt="도우미" class="vertical_mid" src="/abpat/images/button/icon_helpme.gif"/></a></label>
<input id="EC" name="EC" placeholder="ex)A01G 17/10" style="background-color: rgb(255, 255, 255);" title="EPC 입력" type="text" value=""/>
<select id="operate03" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
</p>
<div class="input_group" id="divJPOnlyCode">
<span>
<label for="FI">FI(FI) <a href="javascript:remoconHelpOpen(2,'4')" title="새창으로 열림"><img alt="도우미" class="vertical_mid" src="/abpat/images/button/icon_helpme.gif"/></a></label>
<input id="FI" name="FI" placeholder="ex)G06F" style="background-color: rgb(255, 255, 255);" title="FI 입력" type="text" value=""/>
<select id="operate04" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="FT">F-Term(FT) <a href="javascript:remoconHelpOpen(2,'5')" title="새창으로 열림"><img alt="도우미" class="vertical_mid" src="/abpat/images/button/icon_helpme.gif"/></a></label>
<input id="FT" name="FT" placeholder="ex)5B075QM08" style="background-color: rgb(255, 255, 255);" title="F-Term 입력" type="text" value=""/>
<select id="operate05" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
</div>
</td>
</tr>
<tr>
<th scope="row"> <label for="TL">발명의 명칭(TL) <a href="javascript:void(newPopupWindow('http://www.kipris.or.kr/khome/help/help06/help06_2.jsp#chapter7','HelpWin',820,800,'C','M','scrollbars=yes'));" title="해외특허 검색도움말 새창으로 열림"><img alt="해외특허검색도움말" class="vertical_mid" src="/abpat/images/button/icon_help01.gif"/></a></label></th>
<td>
<p>
<input class="input_mid" id="TL" name="TL" placeholder="ex)(CAR+VEHICLE)*ENGINE" style="background-color: rgb(255, 255, 255);" title="발명의 명칭 입력" type="text" value=""/>
<select id="operate20" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</p>
</td>
</tr>
<tr>
<th scope="row"> <label for="AB">요약(AB) <a href="javascript:void(newPopupWindow('http://www.kipris.or.kr/khome/help/help06/help06_2.jsp#chapter8','HelpWin',820,800,'C','M','scrollbars=yes'));" title="해외특허 검색도움말 새창으로 열림"><img alt="해외특허검색도움말" class="vertical_mid" src="/abpat/images/button/icon_help01.gif"/></a></label></th>
<td>
<p>
<input class="input_mid" id="AB" name="AB" placeholder="ex)CAR*(NAVIGATION+GPS)" style="background-color: rgb(255, 255, 255);" title="요약 입력" type="text" value=""/>
<select id="operate21" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</p>
</td>
</tr>
<tr>
<th scope="row">번호정보 <a href="javascript:remoconHelpOpen(2,'AN')" title="새창으로 열림"><img alt="도우미" class="vertical_mid" src="/abpat/images/button/icon_helpme.gif"/></a></th>
<td class="numInfo_input">
<div id="divNumInfo">
<div class="input_group">
<span>
<label for="AN">출원번호(AN)</label>
<input id="AN" name="AN" placeholder="ex)09990194" style="background-color: rgb(255, 255, 255);" title="출원번호 입력" type="text" value=""/>
<select id="operate07" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="GN">등록번호(GN)</label>
<input id="GN" name="GN" placeholder="ex)00314596" style="background-color: rgb(255, 255, 255);" title="등록번호 입력" type="text" value=""/>
<select id="operate08" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<div class="btn_close"><a href="#" id="btnOnoffNumInfo" onclick="return false;"><img alt="닫기" src="/abpat/images/button/btn_Wclose.gif"/></a></div>
</div>
<div class="input_group02" id="divNumHideArea">
<span>
<label for="OPN">공개번호(OPN)</label>
<input id="OPN" name="OPN" placeholder="ex)20030156652" style="background-color: rgb(255, 255, 255);" title="공개번호 입력" type="text" value=""/>
<select id="operate09" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="PN">공보번호(PN)</label>
<input id="PN" name="PN" placeholder="ex)2010120258" style="background-color: rgb(255, 255, 255);" title="공보번호 입력" type="text" value=""/>
<select id="operate10" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="IAN">국제출원번호(IAN)</label>
<input id="IAN" name="IAN" placeholder="ex)KR2003000653, PCT/KR2003/000653" style="background-color: rgb(255, 255, 255);" title="국제출원번호 입력" type="text" value=""/>
<select id="operate11" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="ION">국제공개번호(ION)</label>
<input id="ION" name="ION" placeholder="ex)WO2003052252, WO2003008308" style="background-color: rgb(255, 255, 255);" title="국제공개번호 입력" type="text" value=""/>
<select id="operate12" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
</div>
</div>
</td>
</tr>
<tr>
<th scope="row">일자정보 <a href="javascript:remoconHelpOpen(2,'AD')" title="새창으로 열림"><img alt="도우미" class="vertical_mid" src="/abpat/images/button/icon_helpme.gif"/></a></th>
<td class="dayInfo">
<div id="divDatePickArea">
<div class="dayInfo_input">
<span>
<label for="PD">공보일자(PD)</label>
<input id="PD_FROM" name="PD_FROM" placeholder="ex)20050101" size="10" style="background-color: rgb(255, 255, 255);" title="공보 시작일자 입력" type="text" value=""/> ~
									<input id="PD_TO" name="PD_TO" placeholder="ex)20050331" size="10" style="background-color: rgb(255, 255, 255);" title="공보 종료일자 입력" type="text" value=""/>
<input id="PD" name="PD" type="hidden"/>
<select id="operate13" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="AD_FROM">출원일자(AD)</label>
<input id="AD_FROM" name="AD_FROM" size="10" style="background-color: rgb(255, 255, 255);" title="출원 시작일자 입력" type="text" value=""/>	~
									<input id="AD_TO" name="AD_TO" size="10" style="background-color: rgb(255, 255, 255);" title="출원 종료일자 입력" type="text" value=""/>
<input id="AD" name="AD" type="hidden"/>
<select id="operate14" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="GD_FROM">등록일자(GD)</label>
<input id="GD_FROM" name="GD_FROM" size="10" style="background-color: rgb(255, 255, 255);" title="등록 시작일자 입력" type="text" value=""/>	~
									<input id="GD_TO" name="GD_TO" size="10" style="background-color: rgb(255, 255, 255);" title="등록 종료일자 입력" type="text" value=""/>
<input id="GD" name="GD" type="hidden"/>
<select id="operate15" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="OPD_FROM">공개일자(OPD)</label>
<input id="OPD_FROM" name="OPD_FROM" size="10" style="background-color: rgb(255, 255, 255);" title="공개 시작일자 입력" type="text" value=""/> ~
									<input id="OPD_TO" name="OPD_TO" size="10" style="background-color: rgb(255, 255, 255);" title="공개 종료일자 입력" type="text" value=""/>
<input id="OPD" name="OPD" type="hidden"/>
<select id="operate16" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="IDT_FROM">국제출원일자(IDT)</label>
<input id="IDT_FROM" name="IDT_FROM" size="10" style="background-color: rgb(255, 255, 255);" title="국제출원 시작일자 입력" type="text" value=""/> ~
									<input id="IDT_TO" name="IDT_TO" size="10" style="background-color: rgb(255, 255, 255);" title="국제출원 종료일자 입력" type="text" value=""/>
<input id="IDT" name="IDT" type="hidden"/>
<select id="operate17" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="IOD_FROM">국제공개일자(IOD)</label>
<input id="IOD_FROM" name="IOD_FROM" size="10" style="background-color: rgb(255, 255, 255);" title="국제공개 시작일자 입력" type="text" value=""/> ~
									<input id="IOD_TO" name="IOD_TO" size="10" style="background-color: rgb(255, 255, 255);" title="국제공개 종료일자 입력" type="text" value=""/>
<input id="IOD" name="IOD" type="hidden"/>
<select id="operate18" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
</div>
</div>
</td>
</tr>
<tr>
<th scope="row">우선권 정보 <a href="javascript:void(newPopupWindow('http://www.kipris.or.kr/khome/help/help06/help06_2.jsp#chapter11','HelpWin',820,800,'C','M','scrollbars=yes'));" title="해외특허 검색도움말 새창으로 열림"><img alt="해외특허검색도움말" class="vertical_mid" src="/abpat/images/button/icon_help01.gif"/></a></th>
<td class="dayInfo">
<div class="divDatePickArea">
<div class="dayInfo_input">
<span>
<label for="RC">우선권주장국가(RC)</label>
<input id="RC" name="RC" placeholder="ex)US, US+EP, US*EP" style="width: 40%; background-color: rgb(255, 255, 255);" title="우선권주장국가 입력" type="text" value=""/>
<select id="operate23" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="RN">우선권주장번호(RN)</label>
<input id="RN" name="RN" placeholder="ex)2005-0121279" style="width: 40%; background-color: rgb(255, 255, 255);" title="우선권주장번호 입력" type="text" value=""/>
<select id="operate18" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="RD_FROM">우선권주장일자(RD)</label>
<input id="RD_FROM" name="RD_FROM" size="10" style="background-color: rgb(255, 255, 255);" title="우선권주장일자 시작일자 입력" type="text" value=""/> ~
                            <input id="RD_TO" name="RD_TO" size="10" style="background-color: rgb(255, 255, 255);" title="우선권주장일자 종료일자 입력" type="text" value=""/>
<input id="RD" name="RD" type="hidden"/>
<select id="operate19" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
</div>
</div>
</td>
</tr>
<tr>
<th scope="row">직접입력 <a href="javascript:void(newPopupWindow('http://www.kipris.or.kr/khome/help/help06/help06_2.jsp#chapter12','HelpWin',820,800,'C','M','scrollbars=yes'));" title="해외특허 검색도움말 새창으로 열림"><img alt="해외특허검색도움말" class="vertical_mid" src="/abpat/images/button/icon_help01.gif"/></a></th>
<td>
<div class="direct_input">
<p>
<label for="CL" style="width: 100px;">청구범위(CL)</label>
<input class="input_mid" id="CL" name="CL" placeholder="ex)BUBBLE*SHOT" style="width: 68.5%; background-color: rgb(255, 255, 255);" title="청구범위 입력" type="text" value=""/>
<select id="operate22" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</p>
</div>
</td>
</tr>
<tr>
<th scope="row">이름 <a href="javascript:void(newPopupWindow('http://www.kipris.or.kr/khome/help/help06/help06_2.jsp#chapter13','HelpWin',820,800,'C','M','scrollbars=yes'));" title="해외특허 검색도움말 새창으로 열림"><img alt="해외특허검색도움말" class="vertical_mid" src="/abpat/images/button/icon_help01.gif"/></a></th>
<td class="nameCode_input">
<span style="margin: 0 10px 2px 0;">
<label for="AP" style="width: 22%;">출원인(AP)</label>
<input id="AP" name="AP" placeholder="ex)Robert, Blizzard Corporation" style="background-color: rgb(255, 255, 255);" title="출원인 입력" type="text" value=""/>
<select id="operate24" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label class="inventor" for="IN" style="width: 22%;">발명자(IN)</label>
<input id="IN" name="IN" placeholder="ex)Smith, John*Smith" style="background-color: rgb(255, 255, 255);" title="발명자 입력" type="text" value=""/>
<select id="operate25" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
<span>
<label for="AG" style="width: 22%;">대리인(AG)</label>
<input id="AG" name="AG" placeholder="ex)Jane" style="background-color: rgb(255, 255, 255);" title="대리인 입력" type="text" value=""/>
<select id="operate26" name="operate" title="검색식조건 선택">
<option value="and">and</option>
<option value="or">or</option>
</select>
</span>
</td>
</tr>
</tbody></table>
<div class="btn_area"><a href="#" id="btnClearSmartFinder" onclick="return false;"><img alt="초기화" src="/abpat/images/button/btn_clear.gif"/></a> <a href="javascript:remoconHelpOpen(2,'1')" title="새창으로 열림"><img alt="검색정보입력도우미" src="/abpat/images/button/btn_helpme.gif"/></a> <button id="btnItemizedSearch" type="button"><img alt="검색하기" src="/abpat/images/button/btn_search.gif"/></button>
</div>
</div>
<div class="sfinder_open" id="divDummySmartFinderBtn" style="display: none;"><span class="sfinder_txt"><a href="#" onclick="return false;"><img alt="항목별 검색을 위해 이곳을 클릭해주세요" id="DummySmartFinder" src="/abpat/images/common/btn_smartfinder_open_m.gif"/></a></span> <span class="Cscroll_stop"><a href="javascript:BindOnoffAutoScroll();"><img alt="자동스크롤 끄기" id="btnDummyOnoffAutoScroll" src="/abpat/images/common/txt_Cscroll_stop.gif"/></a></span> </div>
</div>
<div class="sfinder_open" id="divSmartFinderBtn">
<span class="sfinder_btn_left">
<a href="#" id="btnToggleSmartFinder2" onclick="return false;">
<img alt="스마트검색" id="ToggleSmartFinder2" src="/abpat/images/common/btn_smartfinder_open_left.gif"/>
</a>
</span>
<span class="sfinder_txt"><a href="#" id="btnToggleSmartFinder" onclick="return false;"><img alt="항목별 검색을 위해 이곳을 클릭해주세요" id="ToggleSmartFinder" src="/abpat/images/common/btn_smartfinder_open_m.gif"/></a></span> <span class="Cscroll_stop"><a href="javascript:BindOnoffAutoScroll();"><img alt="자동스크롤 끄기" id="btnOnoffAutoScroll" src="/abpat/images/common/txt_Cscroll_stop.gif"/></a></span>
</div>
</form>
</section>
<!-- 스마트 파인더 End -->
<!-- LeftSide Start -->
<script src="/abpat/common/jquery/jquery-ui-1.8.23.custom.min.js"></script>
<script src="/abpat/common/js/xlsx.full.min.js"></script>
<script src="/abpat/common/js/FileSaver.min.js"></script>
<!-- 왼쪽 메뉴 및 검색 -->
<section id="side">
<!-- <div class="Lscroll_control"><img src="/abpat/images/common/txt_Lscroll_stop.gif" alt="메뉴자동스크롤 끄기"/></div> -->
<nav id="snavigation">
<h2 class="title_hidden">search</h2>
<ul>
<li class="menu01"><a href="http://kportal.kipris.or.kr/kportal/search/total_search.do"><img alt="통합검색" src="/abpat/images/navigation/sub/menu01.gif"/></a></li>
<li><a href="http://kpat.kipris.or.kr/kpat/searchLogina.do?next=MainSearch"><img alt="특허 ·실용신안" src="/abpat/images/navigation/sub/menu02.gif"/></a></li>
<li><a href="http://kdtj.kipris.or.kr/kdtj/searchLogina.do?method=loginDG"><img alt="디자인" src="/abpat/images/navigation/sub/menu03.gif"/></a></li>
<li><a href="http://kdtj.kipris.or.kr/kdtj/searchLogina.do?method=loginTM"><img alt="상표" src="/abpat/images/navigation/sub/menu04.gif"/></a></li>
<li><a href="http://kdtj.kipris.or.kr/kdtj/searchLogina.do?method=loginJM"><img alt="심판" src="/abpat/images/navigation/sub/menu05.gif"/></a></li>
<li><a href="http://kpa.kipris.or.kr/kpa/search/search_kpa.do" target="_blank" title="한국특허영문초록 새창으로 열림"><img alt="한국특허영문초록(KPA)" src="/abpat/images/navigation/sub/menu06.gif"/></a></li>
<li class="menu07"><a href="http://abpat.kipris.or.kr/abpat/searchLogina.do?next=MainSearch"><img alt="해외특허" src="/abpat/images/navigation/sub/menu07_on.gif"/></a>
<div id="divCtrycnt">
<!-- 국가별 조회결과 Count 목록 Start -->
<ul class="line_listStyle">
<li class="on" id="liselect_all">전체 : -</li>
<li class="" id="liselect_us"><span class="arrow"><img alt="미국(US)" src="/abpat/images/flag/icon_us.gif"/> (미국) :</span> <span class="number">-</span></li>
<li class="" id="liselect_ep"><span class="arrow"><img alt="유럽(EU)" src="/abpat/images/flag/icon_ep.gif"/> (유럽) :</span> <span class="number">-</span></li>
<li class="" id="liselect_wo"><span class="arrow"><img alt="PCT(US)" src="/abpat/images/flag/icon_wo.gif"/> (PCT) :</span> <span class="number">-</span></li>
<li class="" id="liselect_paj"><span class="arrow"><img alt="일본(EU)" src="/abpat/images/flag/icon_pj.gif"/> (일본) :</span> <span class="number">-</span></li>
<li class="" id="liselect_cn"><span class="arrow"><img alt="중국(US)" src="/abpat/images/flag/icon_cn.gif"/> (중국) :</span> <span class="number">-</span></li>
</ul>
<!-- 국가별 조회결과 Count 목록 End -->
</div>
<div class="side_formCon" id="divLeftSide">
<form id="leftside" method="post" name="leftside">
<fieldset>
<legend>정렬</legend>
<div class="sort_area">
<style type="text/css">
                                                        .sort_list li span.btn_updown span{
                                                            width: 19px;
                                                        }
                                                        .sort_list li span.btn_updown button{
                                                            width: 23px;
                                                        }
                                                        </style>
<h2><img alt="정렬" src="/abpat/images/common/title_sort.gif"/>
<a href="javascript:void(newPopupWindow('http://www.kipris.or.kr/khome/help/help06/help06_7.jsp','HelpWin',820, 800, 'C', 'M', 'scrollbars=yes'));" title="해외특허 검색도움말 새창으로 열림"><img alt="해외특허 검색도움말 정렬기능 새창으로 열림" src="/abpat/images/common/icon_question2.gif"/></a>
</h2>
<ul class="sort_list">
<li class="sort_upDown first" id="liSort_1"><button id="divSelSort_1" title="선택" type="button">선택</button>
<ul class="sort_layerBox" id="ulSortLayer_1">
<!-- 환경설정 개발 후 동적으로 로드하도록 수정해야 함 -->
<li><button id="btnSelSortLayer_1_0" name="btnSelSortLayer_1" title="초기화" type="button" value="RANK">선택</button></li>
<li><button id="btnSelSortLayer_1_1" name="btnSelSortLayer_1" title="국가" type="button" value="CC">국가</button></li>
<li><button id="btnSelSortLayer_1_2" name="btnSelSortLayer_1" title="공개번호" type="button" value="OPN">공개번호</button></li>
<li><button id="btnSelSortLayer_1_3" name="btnSelSortLayer_1" title="발명의 명칭" type="button" value="TL">발명의 명칭</button></li>
<li><button id="btnSelSortLayer_1_4" name="btnSelSortLayer_1" title="IPC" type="button" value="IPC">IPC</button></li>
<li><button id="btnSelSortLayer_1_5" name="btnSelSortLayer_1" title="출원번호" type="button" value="AN">출원번호</button></li>
<li><button id="btnSelSortLayer_1_6" name="btnSelSortLayer_1" title="등록번호" type="button" value="GN">등록번호</button></li>
<li><button id="btnSelSortLayer_1_7" name="btnSelSortLayer_1" title="공보번호" type="button" value="PN">공보번호</button></li>
<li><button id="btnSelSortLayer_1_8" name="btnSelSortLayer_1" title="국제출원번호" type="button" value="IAN">국제출원번호</button></li>
<li><button id="btnSelSortLayer_1_9" name="btnSelSortLayer_1" title="국제공개번호" type="button" value="ION">국제공개번호</button></li>
<li><button id="btnSelSortLayer_1_10" name="btnSelSortLayer_1" title="우선권주장번호" type="button" value="RN">우선권주장번호</button></li>
<li><button id="btnSelSortLayer_1_11" name="btnSelSortLayer_1" title="공보일자" type="button" value="PD">공보일자</button></li>
<li><button id="btnSelSortLayer_1_12" name="btnSelSortLayer_1" title="출원일자" type="button" value="AD">출원일자</button></li>
<li><button id="btnSelSortLayer_1_13" name="btnSelSortLayer_1" title="등록일자" type="button" value="GD">등록일자</button></li>
<li><button id="btnSelSortLayer_1_14" name="btnSelSortLayer_1" title="공개일자" type="button" value="OPD">공개일자</button></li>
<li><button id="btnSelSortLayer_1_15" name="btnSelSortLayer_1" title="국제출원일자" type="button" value="IDT">국제출원일자</button></li>
<li><button id="btnSelSortLayer_1_16" name="btnSelSortLayer_1" title="국제공개일자" type="button" value="IOD">국제공개일자</button></li>
<li><button id="btnSelSortLayer_1_17" name="btnSelSortLayer_1" title="우선권주장일자" type="button" value="RD">우선권주장일자</button></li>
<li><button id="btnSelSortLayer_1_18" name="btnSelSortLayer_1" title="출원인" type="button" value="AP">출원인</button></li>
<li><button id="btnSelSortLayer_1_19" name="btnSelSortLayer_1" title="발명인" type="button" value="IN">발명인</button></li>
<li><button id="btnSelSortLayer_1_20" name="btnSelSortLayer_1" title="대리인" type="button" value="AG">대리인</button></li>
</ul>
<span class="btn_updown">
<span class="btn_up" id="spanSortOrderAsc_1">
<button id="btnSortOrderAsc_1" name="btnSortOrder_1" title="오름차순" type="button" value="ASC">오름차순</button>
</span>
<span class="btn_down" id="spanSortOrderDesc_1">
<button id="btnSortOrderDesc_1" name="btnSortOrder_1" title="내림차순" type="button" value="DESC">내림차순</button>
</span>
</span>
</li>
<li class="sort_upDown" id="liSort_2"><button id="divSelSort_2" title="선택" type="button">선택</button>
<ul class="sort_layerBox" id="ulSortLayer_2">
<!-- 환경설정 개발 후 동적으로 로드하도록 수정해야 함 -->
<li><button id="btnSelSortLayer_2_0" name="btnSelSortLayer_2" title="초기화" type="button" value="RANK">선택</button></li>
<li><button id="btnSelSortLayer_2_1" name="btnSelSortLayer_2" title="국가" type="button" value="CC">국가</button></li>
<li><button id="btnSelSortLayer_2_2" name="btnSelSortLayer_2" title="공개번호" type="button" value="OPN">공개번호</button></li>
<li><button id="btnSelSortLayer_2_3" name="btnSelSortLayer_2" title="발명의 명칭" type="button" value="TL">발명의 명칭</button></li>
<li><button id="btnSelSortLayer_2_4" name="btnSelSortLayer_2" title="IPC" type="button" value="IPC">IPC</button></li>
<li><button id="btnSelSortLayer_2_5" name="btnSelSortLayer_2" title="출원번호" type="button" value="AN">출원번호</button></li>
<li><button id="btnSelSortLayer_2_6" name="btnSelSortLayer_2" title="등록번호" type="button" value="GN">등록번호</button></li>
<li><button id="btnSelSortLayer_2_7" name="btnSelSortLayer_2" title="공보번호" type="button" value="PN">공보번호</button></li>
<li><button id="btnSelSortLayer_2_8" name="btnSelSortLayer_2" title="국제출원번호" type="button" value="IAN">국제출원번호</button></li>
<li><button id="btnSelSortLayer_2_9" name="btnSelSortLayer_2" title="국제공개번호" type="button" value="ION">국제공개번호</button></li>
<li><button id="btnSelSortLayer_2_10" name="btnSelSortLayer_2" title="우선권주장번호" type="button" value="RN">우선권주장번호</button></li>
<li><button id="btnSelSortLayer_2_11" name="btnSelSortLayer_2" title="공보일자" type="button" value="PD">공보일자</button></li>
<li><button id="btnSelSortLayer_2_12" name="btnSelSortLayer_2" title="출원일자" type="button" value="AD">출원일자</button></li>
<li><button id="btnSelSortLayer_2_13" name="btnSelSortLayer_2" title="등록일자" type="button" value="GD">등록일자</button></li>
<li><button id="btnSelSortLayer_2_14" name="btnSelSortLayer_2" title="공개일자" type="button" value="OPD">공개일자</button></li>
<li><button id="btnSelSortLayer_2_15" name="btnSelSortLayer_2" title="국제출원일자" type="button" value="IDT">국제출원일자</button></li>
<li><button id="btnSelSortLayer_2_16" name="btnSelSortLayer_2" title="국제공개일자" type="button" value="IOD">국제공개일자</button></li>
<li><button id="btnSelSortLayer_2_17" name="btnSelSortLayer_2" title="우선권주장일자" type="button" value="RD">우선권주장일자</button></li>
<li><button id="btnSelSortLayer_2_18" name="btnSelSortLayer_2" title="출원인" type="button" value="AP">출원인</button></li>
<li><button id="btnSelSortLayer_2_19" name="btnSelSortLayer_2" title="발명인" type="button" value="IN">발명인</button></li>
<li><button id="btnSelSortLayer_2_20" name="btnSelSortLayer_2" title="대리인" type="button" value="AG">대리인</button></li>
</ul>
<span class="btn_updown">
<span class="btn_up" id="spanSortOrderAsc_2">
<button id="btnSortOrderAsc_2" name="btnSortOrder_2" title="오름차순" type="button" value="ASC">오름차순</button>
</span>
<span class="btn_down" id="spanSortOrderDesc_2">
<button id="btnSortOrderDesc_2" name="btnSortOrder_2" title="내림차순" type="button" value="DESC">내림차순</button>
</span>
</span>
</li>
</ul>
</div>
</fieldset>
<fieldset>
<span class="btn_ok">
<a href="javascript:DoSearch()"><img alt="확인" src="/abpat/images/button/btn_ok.gif"/></a>
</span>
</fieldset>
</form>
</div>
<!-- 분류통계 서비스 항목 확대 제공 202205 -->
<button class="side_formCon2">
<img alt="검색결과 분류통계" src="/abpat/images/common/btn_category.gif"/>
</button>
<span id="spanCategoryArea" style="display:none"></span>
<div id="categorybox">
<div class="side_formCon2_popup">
<div id="PIloadingBarBack" style="display: none; text-align : center; margin-top: 85px;">
<img src="/abpat/images/common/ktloadingbar.gif" style="margin-right: 50px;"/>
<p style="font-size: 1.5em;"><b>검색결과 <font color="#056ac9">분류통계</font>를 조회하고 있습니다.</b></p>
</div>
<div id="PIContents" style="display: none;">
<h3 id="divStatLayerBox_title1">항목별 분류통계 결과</h3>
<button id="excelFileExport">
<img alt="엑셀" src="/abpat/images/common/btn_ctexcel.png"/>
</button>
<div id="hidetable" style="display: none;"></div>
<button id="categoryPrint">
<img alt="인쇄" src="/abpat/images/common/btn_ctprint.png" style="vertical-align: initial;"/>
</button>
<h4 id="csrd">*분류통계는 5개 국가(미국,유럽,PCT,일본,중국)에 대해서 제공합니다.</h4>
<div class="con">
<ul class="divStatLayerBorder_1" style="background: 0;">
<li class="list1" style="width: calc(100%/5);">
<span>출원년도</span>
<ul class="listlayer" id="CategoryList_1" style="background: 0; background-wcolor:  #f7f7f7;"></ul>
</li>
<li class="list2" style="width: calc(100%/5);">
<span>공개년도</span>
<ul class="listlayer" id="CategoryList_2" style="background: 0; background-color:  #f7f7f7;"></ul>
</li>
<li class="list3" style="width: calc(100%/5);">
<span>등록년도</span>
<ul class="listlayer" id="CategoryList_3" style="background: 0; background-color:  #f7f7f7;"></ul>
</li>
<li class="list4" style="width: calc(100%/5);">
<span>IPC</span>
<ul class="listlayer" id="CategoryList_4" style="background: 0; background-color:  #f7f7f7;"></ul>
</li>
<li class="list5" style="width: calc(100%/5);">
<span>CPC</span>
<ul class="listlayer" id="CategoryList_5" style="margin-right: 0; background: 0; background-color:  #f7f7f7;"></ul>
</li>
</ul>
</div>
</div>
<button class="btn-close"> 닫기</button>
</div>
</div>
<!-- //분류통계 -->
</li>
<li><a href="http://abtm.kipris.or.kr/abtm/search/resultList.jsp"><img alt="해외상표" src="/abpat/images/navigation/sub/menu08.gif"/></a></li>
<li><a href="http://abdg.kipris.or.kr/abdg/searchLogina.do?next=MainSearch"><img alt="해외디자인" src="/abpat/images/navigation/sub/menu10.gif"/></a></li>
<li><a href="http://kpat.kipris.or.kr/kpat/searchLogina.do?next=CyberSearch"><img alt="인터넷기술공지" src="/abpat/images/navigation/sub/menu09.gif"/></a></li>
<li><a href="http://kpat.kipris.or.kr/kpat/searchLogina.do?next=ContestSearch"><img alt="아이디어공모전" src="/abpat/images/navigation/sub/menu11.gif"/></a></li>
<li><a href="http://kdc.kipris.or.kr/kdc/searchLogina.do?next=MainSearch"><img alt="문장검색" src="/abpat/images/navigation/sub/menu12.gif"/></a></li>
</ul>
</nav>
<div class="side_qmenu">
<h2><img alt="KIPRIS 검색이 처음이세요?" src="/abpat/images/qlink/title_kiprisInfo.gif"/></h2>
<p><img alt="초보자 GUIDE 페이지로 이동합니다. 검색을 편리하고 유용하게 이용하기 위한 설명을 담았습니다." src="/abpat/images/qlink/txt_kiprisInfo.gif"/></p>
<p class="qmenu_btn"><a href="http://www.kipris.or.kr/khome/guideMaina.do"><img alt="초보자검색" src="/abpat/images/qlink/btn_search_guide.gif"/></a><a href="http://www.kipris.or.kr/khome/guide/easy/easy_abpat.jsp"><img alt="동영상보기" src="/abpat/images/qlink/btn_movie.gif"/></a></p>
<!--
		<h2 class="title_hidden">검색정보입력도우미</h2>
		<p><img src="/abpat/images/qlink/txt_entryguide.gif" alt="검색정보입력도우미를 클릭하면 자세한 설명을 볼 수 있으며 각 항목에 대한 값을 쉽게 입력할 수 있습니다." /></p>
		<p class="qmenu_btn"><a href="javascript:remoconOpen(2,'1')" title="검색정보입력도우미 새창으로 열림"><img src="/abpat/images/qlink/btn_entryguide.gif" alt="검색정보입력도우미 바로가기" /></a></p>
-->
<article class="link_site">
<h2><img alt="관련사이트 새창으로 열림" src="/abpat/images/qlink/title_guresite.gif"/></h2>
<ul class="sitelink">
<li> <span>
<label for="patentHomeSiteList">국내 특허 검색사이트</label>
</span>
<select id="patentHomeSiteList" name="relationSite1">
<optgroup label="특허">
<option value="http://plus.kipris.or.kr">KIPRIS PLUS</option>
<option value="http://www.kipi.or.kr/ipis">IPIS 지식재산통합검색</option>
<option value="http://biz.kista.re.kr/patentmap/front/common.do?method=main">E-특허나라 </option>
<option value="http://www.ip-navi.or.kr">국제지재권 분쟁정보 포털</option>
<option value="http://www.designmap.or.kr">DESIGNMAP</option>
</optgroup>
<optgroup label="비특허">
<option value="http://www.ndsl.kr">Science ON</option>
<option value="http://www.koreantk.com">한국전통지식포탈</option>
</optgroup>
</select>
<span class="sitelink_go">
<button id="patentHomeSiteGoBtn" title="새창으로 열림" type="button">go</button>
</span> </li>
<li> <span>
<label for="patentForeignSiteList">해외 특허 검색사이트</label>
</span>
<select id="patentForeignSiteList" name="relationSite2">
<optgroup label="세계지적재산권기구(WIPO)">
<option value="http://www.wipo.int/pctdb/en/">국제 특허 검색(WIPO)</option>
<option value="https://www3.wipo.int/branddb/en/">국제 상표 검색</option>
<option value="http://www.wipo.int/designdb/hague/en/">국제 디자인 검색</option>
</optgroup>
<optgroup label="미국특허청(USPTO)">
<option value="http://www.uspto.gov/patft/index.html">특허검색</option>
<option value="http://www.uspto.gov/main/trademarks.htm">상표 검색</option>
</optgroup>
<optgroup label="유럽특허청(EPO)">
<option value="https://www.epo.org/searching-for-patents.html">특허 검색</option>
</optgroup>
<optgroup label="유럽상표청(EUIPO)">
<option value="http://www.tmview.org/">상표 검색 </option>
<option value="http://oami.europa.eu/RCDOnline/RequestManager">디자인 검색</option>
</optgroup>
<optgroup label="일본특허청(J-PlatPat)">
<option value="https://www.j-platpat.inpit.go.jp/p0000">특허 검색</option>
<option value="https://www.j-platpat.inpit.go.jp/d0000">디자인 검색</option>
<option value="https://www.j-platpat.inpit.go.jp/t0000">상표 검색</option>
</optgroup>
<optgroup label="호주 특허청">
<option value="http://pericles.ipaustralia.gov.au/ols/auspat/">특허 검색</option>
<option value="http://pericles.ipaustralia.gov.au/atmoss/falcon.application_start">상표 검색</option>
<option value="http://pericles.ipaustralia.gov.au/adds2/adds.adds_simple_search.paint_simple_search">디자인 검색</option>
</optgroup>
<optgroup label="캐나다 특허청">
<option value="http://www.ic.gc.ca/opic-cipo/cpd/eng/introduction.html">특허 검색</option>
<option value="http://strategis.ic.gc.ca/app/cipo/trademarks/search/tmSearch.do?language=eng">상표 검색</option>
<option value="http://strategis.ic.gc.ca/app/cipo/id/displaySearch.do?language=eng">디자인 검색</option>
</optgroup>
<optgroup label="중국 특허청">
<option value="http://ensearch.cnipr.com.cn/sipo_EN/search/tabSearch.do?method=init">특허 검색</option>
<option value="http://wcjs.sbj.cnipa.gov.cn/txnT01.do">상표 검색</option>
</optgroup>
<optgroup label="덴마크 특허청">
<option value="http://onlineweb.dkpto.dk/pvsonline/Patent">특허 검색</option>
<option value="http://onlineweb.dkpto.dk/pvsonline/Varemaerke">상표 검색</option>
<option value="http://onlineweb.dkpto.dk/pvsonline/Design">디자인 검색</option>
</optgroup>
<optgroup label="홍콩">
<option value="http://ipsearch.ipd.gov.hk/patent/main.jsp?LANG=en">특허 검색</option>
<option value="http://ipsearch.ipd.gov.hk/trademark/jsp/main.jsp">상표 검색</option>
</optgroup>
<optgroup label="영국 특허청">
<option value="http://www.ipo.gov.uk/types/patent/p-os/p-find/p-ipsum.htm">특허 검색</option>
<option value="http://www.ipo.gov.uk/types/tm/t-os/t-find/tmcase.htm">상표 검색</option>
<option value="http://www.ipo.gov.uk/types/design/d-os/d-find/d-find-number.htm">디자인 검색</option>
</optgroup>
<optgroup label="독일 특허청">
<option value="https://register.dpma.de/DPMAregister/pat/uebersicht">특허 검색</option>
<option value="https://register.dpma.de/DPMAregister/marke/uebersicht">상표 검색</option>
<option value="https://register.dpma.de/DPMAregister/gsm/uebersicht">디자인 검색</option>
</optgroup>
<optgroup label="뉴질랜드 특허청">
<option value="https://www.iponz.govt.nz/manage-ip">특허 검색</option>
<option value="https://www.iponz.govt.nz/manage-ip">상표 검색</option>
<option value="https://www.iponz.govt.nz/manage-ip">디자인 검색</option>
</optgroup>
<optgroup label="필리핀 특허청">
<option value="http://onlineservices.ipophil.gov.ph/wopublish-search/public/patents">특허 검색</option>
<option value="http://www.wipo.int/branddb/ph/en/">상표 검색</option>
</optgroup>
<optgroup label="러시아 특허청">
<option value="https://www.fips.ru/publication-web/publications/IZPM?inputSelectOIS=Invention,UtilityModel&amp;tab=IZPM&amp;searchSortSelect=dtPublish&amp;searchSortDirection=true">특허 검색</option>
<option value="https://www.fips.ru/publication-web/publications/PO?inputSelectOIS=IndustrialDesign&amp;tab=PO&amp;searchSortSelect=dtPublish&amp;searchSortDirection=true">상표 검색</option>
<option value="https://www.fips.ru/publication-web/publications/UsrTM?inputSelectOIS=TM,CKTM,AOG,ERAOG,TMIR&amp;tab=UsrTM&amp;searchSortSelect=dtPublish&amp;searchSortDirection=true">디자인 검색</option>
</optgroup>
<optgroup label="Questel">
<option value="http://www.qpat.com">QPAT</option>
</optgroup>
</select>
<span class="sitelink_go">
<button id="patentForeignSiteGoBtn" title="새창으로 열림" type="button">go</button>
</span> </li>
<li> <span>
<label for="patentCountrySiteList">각국특허청 사이트</label>
</span>
<select id="patentCountrySiteList" name="relationSite3">
<option value="http://www.kipo.go.kr">한국 특허청</option>
<option value="http://www.wipo.int">세계지적재산권기구 (WIPO)</option>
<option value="http://www.uspto.gov/">미국 특허상표청 (USPTO)</option>
<option value="http://www.epo.org/">유럽 특허청 (EPO)</option>
<option value="http://www.jpo.go.jp/">일본 특허청 (JPO)</option>
<option value="http://www.dkpto.dk/">덴마크 특허청 </option>
<!--           <option value="http://www.osim.ro">루마니아 특허청 </option> -->
<option value="http://www.impi.gob.mx/">멕시코 특허청</option>
<option value="http://www.ige.ch">스위스 특허청</option>
<option value="http://www.indprop.gov.sk">슬로바키아 특허청 </option>
<option value="http://www.ipo.gov.uk">영국 특허청 </option>
<option value="http://www.ipaustralia.gov.au">호주 특허청 </option>
<option value="http://www.prh.fi">핀란드 특허청 </option>
<option value="http://www.deutsches-patentamt.de">독일 특허청 </option>
<option value="http://www.eco.public.lu">룩셈브루크 특허청</option>
<option value="http://www.inpi.fr">프랑스 지적재산국 </option>
<option value="http://www.oepm.es">스페인 특허청 </option>
<option value="https://www.patentamt.at/">오스트리아 특허청 </option>
<option value="https://www.cnipa.gov.cn/">중국 특허청 </option>
<option value="http://www.tipo.gov.tw/ ">대만 특허청 </option>
<option value="http://www.prv.se">스웨덴 특허청 </option>
<option value="http://www.hpo.hu">헝가리 특허청 </option>
<option value="http://www.ipd.gov.hk">홍콩정부 지적재산국 </option>
<option value="http://strategis.ic.gc.ca ">캐나다 특허청 </option>
</select>
<span class="sitelink_go">
<button id="patentCountrySiteGoBtn" title="새창으로 열림" type="button">go</button>
</span> </li>
<li> <span>
<label for="patentInterSiteList">유관기관 사이트</label>
</span>
<select id="patentInterSiteList" name="relationSite4">
<option value="http://www.kipa.org/kipa/index.jsp">한국발명진흥회</option>
<option value="https://www2.ripc.org">지역지식재산센터</option>
<option value="http://www.kasi.org/">한국학교발명협회</option>
<option value="http://www.inventor.or.kr/">한국여성발명협회</option>
<option value="http://www.kmsk.or.kr/">한국지식경영학회</option>
<option value="http://www.scholarweb.kr">한국특허학회</option>
<option value="http://www.ficpi.org/">국제변리사연맹 한국협회</option>
<option value="http://www.kipla.or.kr/">한국지식재산학회</option>
<option value="http://www.pcc.or.kr/">공익변리사 특허상담센터</option>
</select>
<span class="sitelink_go">
<button id="patentInterSiteGoBtn" title="새창으로 열림" type="button">go</button>
</span> </li>
</ul>
</article>
</div>
</section>
<script type="text/javascript">

$(document).ready(function(){
	
	//분류통계 서비스 항목 확대 제공 UI 개선 202205
	$('.divStatLayerBorder_1 > li > span').hover(function() {
		 $(this).css("background-color", "white").css('color', '#056ac9');
		}, function(){
		  $(this).css("background-color", "#056ac9").css('color', 'white');
		});
	$('.listlayer').hover(function() {
		 $(this).parent().find('> span').css("background-color", "white").css('color', '#056ac9');
		}, function(){
		  $(this).parent().find('> span').css("background-color", "#056ac9").css('color', 'white');
		});
	
});

jQuery("#patentHomeSiteGoBtn").click(function() { window.open(jQuery("#patentHomeSiteList").val(), null, null) ; }) ;
jQuery("#patentForeignSiteGoBtn").click(function() { window.open(jQuery("#patentForeignSiteList").val(), null, null) ; }) ;
jQuery("#patentCountrySiteGoBtn").click(function() { window.open(jQuery("#patentCountrySiteList").val(), null, null) ; }) ;
jQuery("#patentInterSiteGoBtn").click(function() { window.open(jQuery("#patentInterSiteList").val(), null, null) ; }) ;

/*분류통계 검색 방법 변경 (기존 default 검색 -> 버튼 클릭시 검색)*/
function PiSearchStart()
{
    var artPost = getPostAllData("divSearchItems");

    if (artPost.expression == "")
    {
        alert("분류통계는 검색 후 이용가능합니다.");
    }
    else
    {
        artPost.method = "PISearch";
        getPIList(artPost);
    }    
}
</script>
<!-- //왼쪽 메뉴 및 검색 -->
<!-- LeftSide End -->
<!-- 콘텐츠 -->
<section id="content">
<h1 class="title_hidden">해외특허</h1>
<section id="detail_content">
<div class="search_section_head">
<div class="list_view_type">
<span class="btn_all_translation"><button id="btnAllTranslation" type="button">전체요약번역</button></span><span class="btn_choice_translation"><button id="btnSelTranslation" type="button">선택요약번역</button></span>
</div>
<div class="icon_strip">
<span class="icon_choice" id="showOnlyCheckArticleBtnContainer"><button id="btnViewSelItems" type="button">선택보기</button></span><span class="icon_Nochoice" id="showAllCheckArticleBtnContainer"><button id="btnViewAllItems" type="button">선택해제</button></span>
<span class="icon_exl"><a href="javascript:excelFile()">엑셀저장</a></span>
<!-- 						<span class="icon_print"><a href="javascript:printArea()" title="인쇄">인쇄</a></span>  -->
<span class="icon_print"><a href="javascript:goPrintPreview()" title="인쇄">인쇄</a></span>
<span class="icon_setting"><a href="javascript:popupSetting('Abpat')" title="환경설정">환경설정</a></span>
</div>
<div class="icon_strip2">
<span class="icon_guide"><a href="http://www.kipris.or.kr/khome/guideMaina.do">초보자검색가이드</a></span>
<span class="icon_video"><a href="http://www.kipris.or.kr/khome/guide/easy/easy_abpat.jsp">동영상메뉴얼</a></span>
</div>
<div class="float_right">
<select id="opt28" onchange="" title="페이지당 보여지는 검색결과 갯수 선택">
<option selected="" value="30">페이지당 30개</option>
<option value="60">페이지당 60개</option>
<option value="90">페이지당 90개</option>
</select>
<a href="javascript:setNumPerPage(document.getElementById('opt28').value)"><img alt="go" src="/abpat/images/button/btn_go.gif"/></a>
</div>
</div>
<div class="data_non_realtime"><span class="txt_bold">실시간 해외데이터</span>는 각 국가의 검색사이트를 통해 확인하시기 바랍니다.</div>
<div id="divMainArticle">
<form name="listForm">
<section class="search_section">
<!-- 구글 통계 관련추가 By J.H.S 20130502 -->
<script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            
            ga('create', 'UA-40578824-1', 'kipris.or.kr');
            ga('send', 'pageview');
        </script>
<!-- 검색서비스 안내  -->
<article class="search_nodata">
<div class="nodata_info">KIPRIS의 <span class="point02">해외특허</span> 검색 서비스입니다.</div>
<h2 class="solution_title"><img alt="해외특허 검색 tip" src="/abpat/images/common/txt_searchTip.gif"/></h2>
<ol class="solution_list">
<li><span class="num01">1</span> 펼치기 버튼을 눌러 긴 검색식의 경우 자유롭게 입력/편집해보세요.</li>
<li><span class="num02">2</span> 정확한 검색결과를 원하시면 스마트 검색, 결과 내 재검색, 검색어 확장 기능을 효율적으로 이용해보세요.</li>
<li><span class="num03">3</span> 정렬기능을 활용하여 많은 검색결과 내에서 다양하게 필터링 해보세요.</li>
<li><span class="num04">4</span> 특허용어가 어려우시다면 도움말, 용어사전 등을 이용해보세요.</li>
<li><span class="num05">5</span> 검색식 저장, 마이폴더 기능, 온라인 다운로드는 KIPRIS회원을 위한 서비스입니다. </li>
<li><span class="num06">6</span> 보다 다양한 기능을  이용해보시려면 회원가입을 해보세요.</li>
</ol>
<!-- 20190228 KSM 서비스 데이터 제약사항에 대한 안내 추가  -->
<h2 class="solution_title"><img alt="데이터 제공안내" src="/abpat/images/common/txt_searchTip_data.gif"/></h2>
<div class="solution_list">
<div class="solution_list_child"><span class="num01" style="display: block;  background-position : -88px -596px;">1</span> 특허법 등 관련 법령에 따른 미공개 데이터, 데이터 미입수 또는 과거 데이터 미비 등으로 인한 데이터는 조회되지 않을 수 있습니다.</div>
</div>
<div class="solution_action">
<h3>KIPRIS검색이 처음이신가요?</h3>
<p><span class="first"><a href="http://www.kipris.or.kr/khome/guideMaina.do">초보자검색가이드</a></span> <span><a href="http://www.kipris.or.kr/khome/guide/easy/easy_abpat.jsp">동영상메뉴얼</a></span></p>
</div>
</article>
<!-- //검색서비스 안내  -->
</section>
<script>
	<!--

	var transAtcl = "";
	var transFlag = "";

	jQuery("div[id^='div_search_detail_']").hide();
	jQuery("p[id^=divTranslArea_]").hide();

	//alert(transFlag + " " + transAtcl);
	if(transFlag == "ALL")
	{
		jQuery("div[id*='btnOpenABVArea']").hide();
		jQuery("div[id^='div_search_detail_']").show();
		jQuery("p[id^=divTranslArea_]").show();
	}
	else if(transFlag == "SEL")
	{
		var transarr = transAtcl.split("|");
		for(var i = 0; i < transarr.length; i++)
		{
			//alert("div_search_detail_" + transarr[i].replace(/,/g, "\\,"));
			jQuery("div[id='btnOpenABVArea']", jQuery("#divViewSel" + transarr[i].replace(/,/g, "\\,"))).hide();
			jQuery("#div_search_detail_" + transarr[i].replace(/,/g, "\\,")).show();
			jQuery("#divTranslArea_" + transarr[i].replace(/,/g, "\\,")).show();
			jQuery("#chkSelItem" + transarr[i].replace(/,/g, "\\,")).prop("checked", true);
		}
	}


	//////////////////////////////////////////////////////////////////////
	// 북마크 기능 관련 버튼정의 및 함수 실행
	// 2013.02.06 bhhan
	jQuery("#chkSelItemAll").bind("click", BindSelItemChkAll);
	jQuery("input[name='chkSelItem']").bind("click", BindSelItemChk);

	loadBookmarkChk();
	initViewAllItems();
	//////////////////////////////////////////////////////////////////////


	// 새로운 검색결과에 따른 검색히스토리 설정
        // By J.H.S 2014.05.30 검색어 길이가 길 경우 검색히스토리에 넣지 않음
        /* 검색히스토리 방식 변경 스크립트에서 쿠키값 셋팅하도록 변경
        
                historyStr = "";
        
	//historyStr = historyStr.replace(/\\/g, "");

	//historyArr = historyStr.split("|");
	//showHistoryStr(0);

	jQuery("a[id^=btnHistory]")
		.unbind("click")
		.bind("click", BindHistoryGo);
	*/

	/**
	 * 초록(div영역)을 보이거나 숨기고, 더보기 버튼과 숨기기 버튼을 토글시킨다.
	 * @param idx : 영역의 순번
	 * 2012.09.17 bhhan
	 */
	function openABVArea(ikey, idx, natlCD, popno, stat) {

		var odiv = jQuery("div[id^='div_search_detail_']:eq(" + idx + ")");
		var obtn = jQuery("div[id='btnOpenABVArea']:eq(" + idx + ")");
		var cbtn = jQuery("div[id='btnCloseABVArea']:eq(" + idx + ")");

		if(stat == "open")
		{
			odiv.show();
			obtn.hide();
			cbtn.show();
			//obtn.prop("src", "/kdtj/images/button/btn_Wclose.gif");
			//obtn.offset(btnoset);

			// 더보기 버튼 클릭했을때 상세보기 항목 가져오기..
			// 가져오지 않은 경우 한번만 가져온다.
			var old = jQuery("div[id^='divDetailBtnArea']:eq(" + idx + ")").html().trim();
			if(old == "")
			{

				var artPost = new Object();
				artPost.publ_key = ikey;
				artPost.openKey = "";
				artPost.popno = popno;
				artPost.index = idx;
				artPost.cntry = natlCD;
				artPost.biblioCollection = "";

				$.ajax({
					url : "/abpat/biblioa.do?method=mainDetailBtn",
					type : 'post',
					data : artPost,
					async : true,
					cache : true,
					datatype: 'html',
					success : function(data)
					{
						jQuery("div[id^='divDetailBtnArea']:eq(" + idx + ")").empty().html(data);
					},
					error : function()
					{

					}
				});
			}

		}
		else if(stat == "close")
		{
			odiv.hide();
			obtn.show();
			cbtn.hide();
			//obtn.prop("src", "/kdtj/images/button/btn_Wopen.gif");
			//obtn.offset(btnoset);
		}
	}
        
        // 호주 초록 이미지 팝업
        function viewAbstract(ctry, publkey){
            var viewAbstract = null;
            var patno_fg = 1;
            
            viewAbstract = window.open("/abpat/remoteFile.do?method=Abstract&publ_key="+publkey+"&cntry="+ctry+"&patno_fg="+patno_fg, "viewAbstract", "width=800, height=600, left=10, top=10, resizable=yes, scrollbars=yes, status=yes");    
            viewAbstract.focus();     
        }

	//-->
</script>
<input id="next" name="next" type="hidden" value="AbstList"/>
<input id="docsFound" name="docsFound" type="hidden" value="0"/>
</form>
<script type="text/javascript">
<!--
/*
 * 전체발명의명칭번역 이벤트
 */
function BindAllTitleTranslation() {
    var regexp = /[ㄱ-힣]/;
    var noTitleRegexp = /.*NO TITLE.*/i;
    
    var targetArr = $("section.search_section > article").map(function() { 
        return this;
    }).get();	
    
    var idPrefix = "divViewSel";
    
    for(var idx = 0; idx < targetArr.length; idx++) {
        var articleObj = targetArr[idx];
        var id = $(articleObj).prop("id");
        key = id.replace("divViewSel", "");
        
        var titleObj = $(articleObj).find("h1.stitle > a");

        var titleEnText = $(titleObj).text();
        if (!regexp.test(titleEnText)
                && !noTitleRegexp.test(titleEnText)) {
            titleEnText = titleEnText.replace(/(?:\r\n|\r|\n)/g,"");
            if (key != null && key != 'undefined') {
                var cntryCd = key.substring(0, 2);
                if (cntryCd == "JP" || cntryCd == "PJ" || cntryCd == "DE" || cntryCd == "FR" || cntryCd == "RU") {
                    if (cntryCd == "DE" || cntryCd == "FR" || cntryCd == "RU" || cntryCd == "AT" || cntryCd == "DK" || cntryCd == "IL" || cntryCd == "ES" || cntryCd == "PT"
                     || cntryCd == "PH" || cntryCd == "CH" || cntryCd == "PL" || cntryCd == "SE"
                     || cntryCd == "SI" || cntryCd == "CO" || cntryCd == "EA" || cntryCd == "RS") {
                        fnProcTransE2K(titleObj, titleEnText, key);
                    }
                } else {
                    // 번역처리
                    fnProcTransE2K(titleObj, titleEnText);
                }
            }
        }
    }
}

/*
 * 영한번역처리
 */
function fnProcTransE2K(obj, text, key) {
    var regexp = /[ㄱ-힣]/;
    var params = "{\"MA\":\"E2K\",\"ORG_TXT\":\"" + text + "\",\"MK\":\"" + key + "\"}";
     
    $.ajax({
        //url: "/pmt/patent/getRTTransRes.do",
        url: "http://abpat.kipris.or.kr/pmt/patent/getRTTransRes.do",
        data: {
            "p": params,
        }
        , success: function(data) {
            if (data != null
                    && data != 'undefined') {
                var result = eval('(' + data + ')');
                var titleKoText = result.Data.transText;
                var title = text;
                if (regexp.test(titleKoText)) {
                    title = text + " (" + titleKoText + ")";
                }
                
                $(obj).text(title);
            }
        }
    });
		
}

$(document).ready(function(){
    BindAllTitleTranslation();
});

//-->
</script>
</div>
</section>
<article class="all_service">
<h2><img alt="전체서비스" src="/abpat/images/common/txt_allservice.gif"/></h2>
<ul class="all_service_list">
<li><a href="http://www.kipris.or.kr/khome/guideMaina.do">초보자검색</a></li>
<li><a href="http://www.kipris.or.kr/khome/guide/easy/easy_abpat.jsp">동영상메뉴얼</a></li>
<li><a href="http://www.kipris.or.kr/khome/guide/customer/center.jsp">찾아가는 특허서비스</a></li>
<!-- <li><a href="http://www.kipris.or.kr/khome/guide/add_service/dictionary_new.jsp">용어사전</a></li>-->
<li><a href="javascript:void(newPopupWindow('http://www.kipris.or.kr/khome/guide/easy/glossary/glossary02.jsp','GlossaryWin',700, 690, 'C', 'M', 'scrollbars=yes'));" title="용어사전 새창으로 열림">용어사전</a></li>
<!-- <li><a href="javascript:void(newPopupWindow('http://www.kipris.or.kr/khome/dictionary.do','dictionaryWin',770, 800, 'C', 'M', null))" title="특허용어사전 새창으로 열림">특허용어사전</a></li> -->
<!--   1. contents : 팝업창 위치 일원화 작업에 따른 위치 변경 (20191108)
    	 		2. author : jihoo-->
<li><a href="http://www.kipris.or.kr/khome/help/help06/help06_1.jsp" onclick="newPopupWindow(this.href, 'HelpWin', 820, 800, 'C', 'M', 'scrollbars=yes');return false;" target="_blank" title="검색도움말 새창으로 열림">검색도움말</a></li>
</ul>
</article>
</section>
<aside id="aside">
<section>
<ul class="straight">
<!--  1. contents : 팝업창 위치 일원화 작업에 따른 위치 변경 (20191108)
    						2. author : jihoo -->
<li><a href="http://www.kipris.or.kr/khome/help/help06/help06_1.jsp" onclick="newPopupWindow(this.href, 'HelpWin', 820, 750, 'R', 'M', 'scrollbars=yes');return false;" title="검색도움말 새창으로 열림"><img alt="검색도움말" src="/abpat/images/right/txt_straight01.gif"/></a></li>
<li><a href="http://www.kipris.or.kr/khome/help/help08/help08_1.jsp" onclick="newPopupWindow(this.href, 'HelpWin', 650, 830, 'R', 'M', 'scrollbars=yes');return false;" title="해외특허 검색가이드 새창으로 열림"><img alt="해외검색가이드다운로드" src="/abpat/images/right/txt_straight05.gif"/></a></li>
<li><a href="javascript:void(newPopupWindow('http://www.kipris.or.kr/khome/guide/easy/glossary/glossary02.jsp','GlossaryWin',700, 690, 'R', 'M', 'scrollbars=yes'));" title="용어사전 새창으로 열림"><img alt="용어사전" src="/abpat/images/right/txt_straight02_new.gif"/></a></li>
<li><a href="http://www.kipris.or.kr/khome/guide/customer/suggestion.jsp" title="의견수렴 페이지로 이동"><img alt="의견수렴" src="/abpat/images/right/txt_straight03.gif"/></a></li>
<li><a href="javascript:showDataCoverageWindow()" title="데이터 제공 현황 새창으로 열림"><img alt="데이터 제공 현황" src="/abpat/images/right/txt_straight04.gif"/></a></li>
</ul>
<ul class="myStraight">
<li><a href="javascript:void(goMemberLogin())" title="로그인페이지 새창으로 열림"><img alt="검색식 저장" src="/abpat/images/right/txt_myStraight01.gif"/></a></li>
<li><a href="javascript:void(goMemberLogin())" title="로그인페이지 새창으로 열림"><img alt="마이폴더 보기" src="/abpat/images/right/txt_myStraight02.gif"/></a></li>
<li><a href="javascript:void(goMemberLogin())" title="로그인페이지 새창으로 열림"><img alt="마이폴더 저장" src="/abpat/images/right/txt_myStraight03.gif"/></a></li>
<li><a href="javascript:void(goMemberLogin())" title="로그인페이지 새창으로 열림"><img alt="마이폴더 전체저장" src="/abpat/images/right/txt_myStraight04.gif"/></a></li>
<li><a href="javascript:void(goMemberLogin())" title="로그인페이지 새창으로 열림"><img alt="온라인 다운로드" src="/abpat/images/right/txt_myStraight05.gif"/></a></li>
</ul>
</section>
<section class="realtime_searchword">
<h2 class="float_left"><img alt="실시간인기검색어" src="/abpat/images/right/title_realtime.gif"/></h2>
<p class="float_right"><a href="http://www.kipris.or.kr/khome/today/today.jsp"><img alt="Today KIPRIS" src="/abpat/images/right/btn_todayKipris.gif"/></a></p>
<ol class="folding_area" id="favorSearchWordListBoard"><li><span class="rank"><em>1</em></span><a href="javascript:setSearchFavorWord('에너지')" title="에너지"><strong>에너지</strong></a><span class="blind equal">동일</span><span class="num"></span></li><li><span class="rank"><em>2</em></span><a href="javascript:setSearchFavorWord('MOBILITY')" title="MOBILITY"><strong>MOBILITY</strong></a><span class="blind equal">동일</span><span class="num"></span></li><li><span class="rank"><em>3</em></span><a href="javascript:setSearchFavorWord('TRANSMIT')" title="TRANSMIT"><strong>TRANSMIT</strong></a><span class="blind equal">동일</span><span class="num"></span></li><li><span class="rank"><em>4</em></span><a href="javascript:setSearchFavorWord('모빌리티')" title="모빌리티"><strong>모빌리티</strong></a><span class="blind equal">동일</span><span class="num"></span></li><li><span class="rank"><em>5</em></span><a href="javascript:setSearchFavorWord('전달')" title="전달"><strong>전달</strong></a><span class="blind equal">동일</span><span class="num"></span></li><li><span class="rank"><em>6</em></span><a href="javascript:setSearchFavorWord('RENEWABLE')" title="RENEWABLE"><strong>RENEWABLE</strong></a><span class="blind equal">동일</span><span class="num"></span></li><li><span class="rank"><em>7</em></span><a href="javascript:setSearchFavorWord('이동체')" title="이동체"><strong>이동체</strong></a><span class="blind equal">동일</span><span class="num"></span></li><li><span class="rank"><em>8</em></span><a href="javascript:setSearchFavorWord('친환경')" title="친환경"><strong>친환경</strong></a><span class="blind new">new</span><span class="num"></span></li><li><span class="rank"><em>9</em></span><a href="javascript:setSearchFavorWord('ENERGY')" title="ENERGY"><strong>ENERGY</strong></a><span class="blind new">new</span><span class="num"></span></li><li><span class="rank"><em>10</em></span><a href="javascript:setSearchFavorWord('ECO')" title="ECO"><strong>ECO</strong></a><span class="blind new">new</span><span class="num"></span></li></ol>
</section>
<script>

function setSearchFavorWord(V) {
	jQuery("#queryText").val(V) ;
	jQuery("#keywordTextarea").val(V) ;
	DoSearch() ;
}

function cutLongStr(str)
{
	return (str.length > 10) ? str.substr(0,9) + "..." : str;
}

function setFavorSearchWordList(xml, status) {
	jQuery("#favorSearchWordListBoard").empty() ;
	if (jQuery(xml).find("flag").text() == "SUCCESS") {
		if (parseInt(jQuery(xml).find("wordCount").text()) > 0) {
			var newTagStr = "<li><span class=\"rank\"><em>{RANK}</em></span><a href=\"javascript:setSearchFavorWord('{WORD_ORG}')\" title='{WORD_ORG}'><strong>{WORD}</strong></a><span class=\"blind {RANK_CHANGE_CSS}\">{RANK_CHANGE_STR}</span><span class=\"num\">{RANK_CHANGE_VAL}</span></li>" ;
			var rankLimit = 10 ;
			jQuery(xml).find("wordList").find("keyword").each(
				function() {
					if (parseInt(jQuery(this).find("wordRank").text()) <= rankLimit) {
						var addTagStr = newTagStr.replace(/{RANK}/g, jQuery(this).find("wordRank").text()) ;
						addTagStr = addTagStr.replace(/{WORD_ORG}/g, jQuery(this).find("word").text()) ;
						addTagStr = addTagStr.replace(/{WORD}/g, cutLongStr(jQuery(this).find("word").text())) ;
						if (jQuery(this).find("change").text() == "NEW") {
							addTagStr = addTagStr.replace(/{RANK_CHANGE_CSS}/, "new") ;
							addTagStr = addTagStr.replace(/{RANK_CHANGE_STR}/, "new") ;
							addTagStr = addTagStr.replace(/{RANK_CHANGE_VAL}/, "") ;
						} else {
							var rankChgN = parseInt(jQuery(this).find("change").text()) ;
							if (rankChgN < 0) {
								rankChgN = Math.abs(rankChgN) ;
								addTagStr = addTagStr.replace(/{RANK_CHANGE_CSS}/, "down") ;
								addTagStr = addTagStr.replace(/{RANK_CHANGE_STR}/, "하락") ;
								addTagStr = addTagStr.replace(/{RANK_CHANGE_VAL}/, rankChgN) ;
							} else if (rankChgN > 0) {
								addTagStr = addTagStr.replace(/{RANK_CHANGE_CSS}/, "up") ;
								addTagStr = addTagStr.replace(/{RANK_CHANGE_STR}/, "상승") ;
								addTagStr = addTagStr.replace(/{RANK_CHANGE_VAL}/, rankChgN) ;
							} else {
								addTagStr = addTagStr.replace(/{RANK_CHANGE_CSS}/, "equal") ;
								addTagStr = addTagStr.replace(/{RANK_CHANGE_STR}/, "동일") ;
								addTagStr = addTagStr.replace(/{RANK_CHANGE_VAL}/, "") ;
							}
						}
						jQuery("#favorSearchWordListBoard").append(addTagStr) ;
					}
				}
			) ;
		} else {
			jQuery("#searchMore").hide() ;
		}
	} else {
		jQuery("#favorSearchWordListBoard").append("<li>인기검색어 데이타를 가져오는 도중 오류가 발생하였습니다.</li>") ;
	}
}

jQuery.ajax({
	type : "POST" ,
	dataType : "xml" ,
	url : "/abpat/remocon/viewStat/favorSearchWord.jsp" ,
	data : {
		C : "KAB"
		} ,
	success : function(xml, textStatus) {
		setFavorSearchWordList(xml, textStatus) ;
		} ,
	error : function(xhr, textStatus) {
	}
}) ;


</script>
<section class="patent_area">
<h2><img alt="최근 본 해외특허" src="/abpat/images/right/title_patent.gif"/></h2>
<iframe frameborder="0" height="420" id="ifrmRcntlyView" name="ifrmRcntlyView" scrolling="no" src="/abpat/common/include/rcntlyView.jsp" title="최근본 해외특허 발명의 명칭 및 출원번호 목록" width="165"></iframe>
</section>
<div><button class="btn_top" id="goTopBtn" style="position: fixed; top: 794px; left: 1330px;" type="button">TOP</button></div>
<!--원클릭 여기서 include 해야지 전체 css가 안깨짐 jsb -->
<script language="javascript" src="/abpat/common/js/jquery.MetaData.js" type="text/javascript"></script>
<script language="javascript" src="/abpat/common/js/jquery.rating.js" type="text/javascript"></script>
<!-- 펼쳐지기 전 div-->
<div class="oneClick00" id="oneClick00">
<div class="arrow_box" style="display:block">
<p><img alt="여러분의 의견을 들려주세요" id="arrow_text" src="/abpat/images/oneclick/oneclick_text.png"/></p>
<p><img alt="oneclick_msg" id="arrow_kt" src="/abpat/images/oneclick/oneclick_kt.png"/></p>
</div>
<div id="oneClickBtn">
<button class="oneClickOn" id="oneClickOn" title="KIPRIS 의견수렴" type="button">
<span class="oneClickSpacing">
<img alt="oneclick_title" src="/abpat/images/oneclick/oneclick_title.png"/>
<img alt="의견수렴" src="/abpat/images/oneclick/oneclick_text2.png"/>
<!-- 	<span style="color:white;"> <strong>KIPRIS 의견수렴 </strong></span>&nbsp; -->
<img alt="펼침" src="/abpat/images/oneclick/oneclick_on.png"/>
</span>
</button>
</div>
</div>
<!-- 펼쳐진 후 div-->
<div class="oneClick01" id="oneClick01">
<button class="oneClickOff" id="oneClickOff" title="KIPRIS 의견수렴" type="button">
<span class="oneClickSpacing">
<img alt="oneclick_title" src="/abpat/images/oneclick/oneclick_title.png"/>
<!-- <span style="color:white;"> <strong>KIPRIS 의견수렴</strong></span>&nbsp; -->
<img alt="의견수렴" src="/abpat/images/oneclick/oneclick_text2.png"/>
<img alt="접힘" src="/abpat/images/oneclick/oneclick_off.png"/>
</span>
</button>
<div class="oneClick" id="oneClick">
<form id="starRatingF" name="api-readonly">
<div class="oneClickContents">
<textarea cols="20" id="oneClickMemo" maxlength="200" placeholder="KIPRIS 서비스에 대한 의견을 남겨주시면, 향후 서비스 반영을 검토하겠습니다." rows="6" title="KIPRIS 서비스에 대한 의견을 남겨주시면, 향후 서비스 반영을 검토하겠습니다."></textarea>
<div id="countCharacter">(0/200자)</div>
</div>
<div class="oneClickInfo" id="oneClickInfo">
<div class="oneClickJob" id="oneClickJob" title="직종">
<div id="oneClicknotice02">* 항목은 필수입니다</div>
<font id="userInfo">직 종*</font>
<select color="#646363" id="oneClickJobSelect" title="직종선택">
<option disabled="" selected="" value="직종"> 직종을 선택해주세요 </option>
<option value="중소, 벤처기업">중소, 벤처기업</option>
<option value="중견, 대기업">중견, 대기업</option>
<option value="자영업">자영업</option>
<option value="학생">학생</option>
<option value="연구기관">연구기관</option>
<option value="공공기관">공공기관</option>
<option value="교육기관">교육기관</option>
<option value="지식재산 관련 업체">지식재산 관련 업체</option>
<option value="비영리기관">비영리기관</option>
<option value="기타" 기타"="">기타</option>
</select>
<div class="oneClickEmailAddr" id="oneClickEmailAddr" title="이메일">
<font id="userInfo">이메일</font>
<input id="oneClickEmail" placeholder=" 회신받을 이메일을 입력해주세요" title="이메일을 입력해주세요" type="email"/>
</div>
</div>
</div>
<div class="oneClickContents02">
<div id="oneClickSatis"><b>만족도 평가<span id="noticeScore">(10점)</span></b></div>
<div id="oneClickStars">
<span aria-hidden="true" class="star-rating-control"><div class="rating-cancel rater-cancel-0"><a title="Cancel Rating"></a></div><div aria-label="총10점 만점에 1점" class="star-rating rater-0 star {split:2} star-rating-applied star-rating-live star-rating-on" id="oneClickStar" role="text" style="width: 15px;"><a style="margin-left: 0px;" title="총10점 만점에 1점">1</a></div><div aria-label="총10점 만점에 2점" class="star-rating rater-0 star {split:2} star-rating-applied star-rating-live star-rating-on" id="oneClickStar" role="text" style="width: 10px;"><a style="margin-left: -15px;" title="총10점 만점에 2점">2</a></div><div aria-label="총10점 만점에 3점" class="star-rating rater-0 star {split:2} star-rating-applied star-rating-live star-rating-on" id="oneClickStar" role="text" style="width: 15px;"><a style="margin-left: 0px;" title="총10점 만점에 3점">3</a></div><div aria-label="총10점 만점에 4점" class="star-rating rater-0 star {split:2} star-rating-applied star-rating-live star-rating-on" id="oneClickStar" role="text" style="width: 10px;"><a style="margin-left: -15px;" title="총10점 만점에 4점">4</a></div><div aria-label="총10점 만점에 5점" class="star-rating rater-0 star {split:2} star-rating-applied star-rating-live star-rating-on" id="oneClickStar" role="text" style="width: 15px;"><a style="margin-left: 0px;" title="총10점 만점에 5점">5</a></div><div aria-label="총10점 만점에 6점" class="star-rating rater-0 star {split:2} star-rating-applied star-rating-live star-rating-on" id="oneClickStar" role="text" style="width: 10px;"><a style="margin-left: -15px;" title="총10점 만점에 6점">6</a></div><div aria-label="총10점 만점에 7점" class="star-rating rater-0 star {split:2} star-rating-applied star-rating-live star-rating-on" id="oneClickStar" role="text" style="width: 15px;"><a style="margin-left: 0px;" title="총10점 만점에 7점">7</a></div><div aria-label="총10점 만점에 8점" class="star-rating rater-0 star {split:2} star-rating-applied star-rating-live star-rating-on" id="oneClickStar" role="text" style="width: 10px;"><a style="margin-left: -15px;" title="총10점 만점에 8점">8</a></div><div aria-label="총10점 만점에 9점" class="star-rating rater-0 star {split:2} star-rating-applied star-rating-live star-rating-on" id="oneClickStar" role="text" style="width: 15px;"><a style="margin-left: 0px;" title="총10점 만점에 9점">9</a></div><div aria-label="총10점 만점에 10점" class="star-rating rater-0 star {split:2} star-rating-applied star-rating-live star-rating-on" id="oneClickStar" role="text" style="width: 10px;"><a style="margin-left: -15px;" title="총10점 만점에 10점">10</a></div></span><input class="star {split:2} star-rating-applied" name="api-readonly-test" style="position: absolute; left: -9999em;" title="1" type="radio" value="1"/>
<input class="star {split:2} star-rating-applied" name="api-readonly-test" style="position: absolute; left: -9999em;" title="2" type="radio" value="2"/>
<input class="star {split:2} star-rating-applied" name="api-readonly-test" style="position: absolute; left: -9999em;" title="3" type="radio" value="3"/>
<input class="star {split:2} star-rating-applied" name="api-readonly-test" style="position: absolute; left: -9999em;" title="4" type="radio" value="4"/>
<input class="star {split:2} star-rating-applied" name="api-readonly-test" style="position: absolute; left: -9999em;" title="5" type="radio" value="5"/>
<input class="star {split:2} star-rating-applied" name="api-readonly-test" style="position: absolute; left: -9999em;" title="6" type="radio" value="6"/>
<input class="star {split:2} star-rating-applied" name="api-readonly-test" style="position: absolute; left: -9999em;" title="7" type="radio" value="7"/>
<input class="star {split:2} star-rating-applied" name="api-readonly-test" style="position: absolute; left: -9999em;" title="8" type="radio" value="8"/>
<input class="star {split:2} star-rating-applied" name="api-readonly-test" style="position: absolute; left: -9999em;" title="9" type="radio" value="9"/>
<input checked="checked" class="star {split:2} star-rating-applied" name="api-readonly-test" style="position: absolute; left: -9999em;" title="10" type="radio" value="10"/>
</div>
</div>
<div class="oneClickborder">
<input disabled="" id="oneClickPersInfo" name="oneClickPersInfo" type="checkbox"/>
<label for="oneClickPersInfo"> 개인정보 제공 동의</label>
<button id="oneClickPersInfoA" type="button">
<img alt="개인정보제공동의 안내" src="/abpat/images/oneclick/oneclick_notice.png"/>
</button>
<!--<div id="oneClickSubmit" class="oneClickSubmit" title="KIPRIS 의견수렴"><div id="oneClickSend" class="oneClickSend"><a class="button_patent"><font color=white>보내기</font></a></div>-->
<button class="oneClickSend" id="oneClickSend" title="보내기" type="button"><span style="color:white;">보내기</span></button>
</div>
</form>
</div>
</div>
<!-- 펼쳐진 후 의견 전송 후 div-->
<div class="oneClick02" id="oneClick02">
<button class="oneClickOff" id="oneClickOff" title="KIPRIS 의견수렴" type="button">
<span class="oneClickSpacing">
<img alt="oneclick_title" src="/abpat/images/oneclick/oneclick_title.png"/>
<!-- <span style="color:white;"> <strong>KIPRIS 의견수렴</strong></span>&nbsp; -->
<img alt="의견수렴" src="/abpat/images/oneclick/oneclick_text2.png"/>
<img alt="KIPRIS One Click Message 닫기" src="/abpat/images/oneclick/oneclick_off.png"/>
</span>
</button>
<div class="oneClick" id="oneClick">
<div style="text-align: center;">
<img alt="oneclick_check" src="/abpat/images/oneclick/oneclick_check.png" style="margin-top:50px"/><br/>
<span class="oneClickComplete"><p>완료되었습니다.</p></span>
<!--<div id="oneClickClose" class="oneClickClose" alt="닫기" title="닫기">닫기</div>-->
<button class="oneClickClose" id="oneClickClose" title="닫기" type="button">
<span style="color:white;">닫기</span>
</button>
<div class="oneClicknotice">
<p>※본 서비스는 간단한 피드백을 제공하며<br/>보다 정확한 답변을 원하시면 <a alt="신고/제안 게시판 새창으로 열림" href="http://www.kipris.or.kr/khome/guide/customer/suggestion.jsp" target="_blank" title="신고/제안 게시판으로 이동"><font color="#0077C9"><strong>신고/제안</strong></font></a>을<br/>이용해주세요.</p>
</div>
</div>
</div>
</div>
<script>
	var returnFocus;
	var oneClickCheck = false;
	var emailCheck = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[a-z]([-_.]?[a-z])*.[a-z]{2,3}$/i;
	
	$("#oneClickOn").mousedown(function()
	{
	    returnFocus = document.activeElement;
	});
	
	$("#oneClickOn").keydown(function()
	{
	    returnFocus = document.activeElement;
	});

    $("#oneClickOn").click(function()
    {
    	if(!oneClickCheck){
        	$("#oneClick00").hide();
        	$("#oneClick01").show();
        	document.getElementById("oneClick01").focus();
        	oneClickCheck = true;
    	}
    	else{
    		$("#oneClick01").hide();
    		oneClickCheck = false;
    	}
    });
    
    $(".oneClickOff").click(function()
    {
        $("#oneClick01").hide();
        $("#oneClick02").hide();
        $("#oneClick00").show();
        returnFocus.focus();
        oneClickCheck = false;
    });
    
    $("#oneClickClose").click(function()
    {
        $("#oneClick01").hide();
        $("#oneClick02").hide();
        $("#oneClick00").show();
        oneClickCheck = false;
    });
    
	$("#oneClickEmail").keyup(function(){
		$("#oneClickEmail").val() ? $("#oneClickPersInfo").prop("disabled", false) : ($("#oneClickPersInfo").prop("disabled", true), $("#oneClickPersInfo").prop("checked", false));
	});

	$("#oneClickPersInfoA").click(function(){
		alert("개인정보보호법 등 관련 법규에 의거하여 KIPRIS는 이용자의 개인정보 수집 및 활용에 대해 개인정보 제공동의를 받고 있습니다.\r\r* 수집하는 개인정보의 항목 : 이메일주소 \r* 개인정보의 수집 및 이용목적 : 문의에 대한 회신\r* 개인정보의 보유 및 이용기간 : 별도 공지시까지 보유\r\r개인정보 제공자가 동의한 내용 외 다른 목적으로 활용하지 않으며,\r제공된 개인정보에 대한 열람, 정정, 삭제를 요구할 수 있습니다.");
	});
    
    // 원클릭메시지 외부 클릭 시 최소화
/* 	$(document).mouseup(function(e){
    	if(!(($(e.target).parents().hasClass("oneClick")) || $(e.target).parents().hasClass("oneClickOn"))
    			|| $(e.target).hasClass("oneClick02")){
    		$("#oneClick01").hide();
            $("#oneClick02").hide();
            $("#oneClick00").show();
            oneClickCheck = false;
    	}
    }); */
	
    $("#oneClickSend").click(function()
    {
		var postData = new Object(); 
		postData.pageTpcd = $("#SEL_PAT", $("#divSearchItems")).val();
		postData.comment = $("#oneClickMemo").val();
		postData.starPoint =  $('input[name=api-readonly-test]:checked').val();
		postData.job = $("#oneClickJobSelect option:selected").val();
		postData.email = $("#oneClickEmail").val();
		postData.chk = $('input[name=oneClickPersInfo]')[0].checked;
		
		if (postData.starPoint==null || postData.starPoint =="0")
		{
			alert("별점을 남겨주세요");
			return ;
		}
		if (postData.job == "직종"){
			alert("직종을 선택해주세요");
			return;
		}
		if (postData.email.match(emailCheck) == null){
			if(postData.email != ""){
				alert ("유효한 이메일주소를 입력해주세요");
				return;
			}
		}
		if (postData.email != "" && postData.chk == false){
			alert("개인정보 제공에 동의해주세요");
			return ;
		}
		
		if (postData.pageTpcd == "" || postData.pageTpcd == null) return;
		
		
		
		jQuery.ajax({
			type : "POST" ,
			dataType : "xml" ,
			url : "/abpat/oneClick.do",
			data : postData,
			success : function (xml, textStatus)
			{
				$("#oneClick01").hide();
				$("#oneClick02").show();

				//입력폼에 적혀있는 값 초기화
				$("#oneClickMemo").val("");
				$("#countCharacter").text("(0/200자)");
				$("input[name=oneClickPersInfo]")[0].checked = false;
				$("#oneClickEmail").val(""); 
				$("#oneClickJobSelect").val("직종");
				// 별 0점으로 초기화 하는 코드
				// $('div[id^="oneClickStar"]').each(function(){
				// $(this).rating('drain');
				// var control = $(this).data('rating');
				// control.current = null;
				// });
			},
			error : function (xhr, textStatus)
			{
				alert("일시적 장애로 전송되지 않았습니다.");
			}
		});
	});
    
    $("input[type=radio][name=api-readonly-test]").focus(function()
	{
		$("div.star").css({"border-top": "2px solid #4776e0", "border-bottom": "2px solid #4776e0"});
		$("div.star").first().css("border-left", "2px solid #4776e0");
		$("div.star").last().css("border-right", "2px solid #4776e0");
	});

	$("input[type=radio][name=api-readonly-test]").blur(function()
	{
		$("div.star").css("border", "none");
	});
	
	 // 1. contents : 별점 클릭 시,  선택된 점수를 확인 할 수 있는 기능 추가(20210615)
    // 2. author : jihoo
     $(".oneClickContents02").click(
       function(){
    	   var StarPoint = $('input[name=api-readonly-test]:checked').val();
    	   if(StarPoint){
    		   var getScore = "(" + StarPoint + "점)";
        	   $("#noticeScore").html(getScore);   
    	   }
	  }) ;
	// 페이지 접근하고, 별점 클릭하지 않을 경우, 기본으로 제공되는 점수인 10점을 표기하도록 추가     
       var initPoint = $('input[name=api-readonly-test]:checked').val();
	   if(initPoint){
		   var initScore = "(" + initPoint + "점)";
  	   $("#noticeScore").html(initScore);   
	   }
</script>
</aside>
<script>
<!--
var goTopBtnRollingId = null ;
var topbase = jQuery("#goTopBtn").offset().top;

jQuery(document).ready(function(){

	jQuery("#goTopBtn").click(function() { $(window).scrollTop(0);}) ;
	jQuery(document).bind("resize", BindGoTopBtnPosition);
	jQuery(document).bind("scroll", BindGoTopBtnPosition);
	BindGoTopBtnPosition();
});

function BindGoTopBtnPosition() {

	// 아래 주석처리된 기존 코드가 크롬에서 동작하지 않아 새로 만듬..
	// 2012.12.13 bhhan..
	var bodyobj = jQuery("section[id='content']");
	var btnobj = jQuery("#goTopBtn");

	var fixleft = parseInt(bodyobj.offset().left) + bodyobj.width();
	fixleft -= (btnobj.width() / 2);

	var limittop = jQuery("footer[id='footer']").offset().top - (btnobj.height());
	var scrlTop = jQuery(window).scrollTop();

	var newtop = (topbase + scrlTop) > limittop ? limittop : (topbase + scrlTop);
	btnobj
		.css("position", "fixed")
		.offset({"top" : newtop, "left" : fixleft});

}

/*
var goEventBtnRollingId = null ;

jQuery(document).ready(function(){

	jQuery("#goEventBtn").click(function() { $(window).scrollTop(0);}) ;
	jQuery(document).bind("resize", BindGoEventBtnPosition);
	jQuery(document).bind("scroll", BindGoEventBtnPosition);
	BindGoEventBtnPosition();
});

function BindGoEventBtnPosition() {
	var bodyobj = jQuery("section[id='content']");
	var btnobj = jQuery("#goEventBtn");

	var fixleft = parseInt(bodyobj.offset().left) + bodyobj.width();
	fixleft -= (btnobj.width() / 2);

	var limittop = jQuery("footer[id='footer']").offset().top - (btnobj.height());
	var scrlTop = jQuery(window).scrollTop();

	var newtop = (topbase2 + scrlTop) > limittop ? limittop : (topbase2 + scrlTop);
	btnobj
		.css("position", "fixed")
		.offset({"top" : newtop, "left" : fixleft});

}
*/
//-->
</script>
</div>
<footer id="footer">
<div class="grab">
<!--### 로고 ###-->
<div class="flogo" id="flogo">
<a href="http://www.kipo.go.kr" target="_blank" title="특허청 새창으로 열림"><img alt="특허청" src="/abpat/images/footer/flogo01.gif"/></a>
<a href="http://www.kipi.or.kr" target="_blank" title="한국특허정보원 새창으로 열림"><img alt="한국특허정보원" src="/abpat/images/footer/flogo02.gif"/></a>
</div>
<!--### 이용정책 메뉴 ###-->
<ul class="fmenu">
<li><a class="bold_point" href="https://www.kipo.go.kr/kipo/kipoContentView.do?menuCd=SCD0201149">개인정보처리방침</a></li>
<li><a href="http://login.kipris.or.kr/member/kr/privacy/privacy01.jsp">이용약관</a></li>
<li><a href="http://login.kipris.or.kr/member/kr/privacy/privacy03.jsp">저작권정책</a></li>
</ul>
<!--### 주소 ###-->
<div class="fcenter">
<div class="ftxt">
<p>(우)35208 대전광역시 서구 청사로 189 (서구 둔산동 920번지) 정부대전청사 4동</p>
<p>
<span class="num"><b>산업재산권 제도·출원·심사·등록·수수료 등</b> 특허고객상담센터 : 1544-8080</span>
					  
					<span class="num"><b>검색·시스템</b> 헬프데스크 042-483-4710</span>
</p>
<p>Copyrightⓒ KIPI. All rights reserved.</p>
</div>
</div>
<!--### 웹접근성 로고 ###-->
<div class="flogo02">
<a href="http://www.wa.or.kr/board/list.asp?BoardID=0006" target="_blank" title="새창으로 열림"><img alt="한국웹접근성인증평가원 웹 접근성 우수사이트 인증마크(WA인증마크)" src="/abpat/images/footer/mark_acc_2022.png" style="width: 70px;"/></a>
</div>
</div>
</footer>
<script type="text/javascript">
var srchpos = "TOP";
</script>
</div>
<!-- 뒤로가기 구현시 state가 없는 경우에도 강제 검색 실행 jsb 
        브라우져마다 onPopState가 동작하는 기준이 다르기때문에 맞춰주기위해서 
        2017.08.08 -->
<script language="javascript" type="text/javascript">
        $(function(){
            var theForm = document.SearchPara;
            if(history.state==null){
            }else{
                loadStateContent(history.state);
            }
        });
        </script>
<!-- 서지사항  -->
<form method="post" name="biblioF">
<input id="sortField" name="sortField" type="hidden" value=""/>
<input id="sortField1" name="sortField1" type="hidden" value=""/>
<input id="sortField2" name="sortField2" type="hidden" value=""/>
<input id="sortState" name="sortState" type="hidden" value=""/>
<input id="sortState1" name="sortState1" type="hidden" value=""/>
<input id="sortState2" name="sortState2" type="hidden" value=""/>
<input id="FROM" name="FROM" type="hidden" value=""/>
<input id="BOOKMARK" name="BOOKMARK" type="hidden" value=""/>
<input id="REBOOKMARK" name="REBOOKMARK" type="hidden" value=""/>
<input id="expression" name="expression" type="hidden" value=""/>
<input id="applno" name="applno" type="hidden"/>
<input id="popno" name="popno" type="hidden"/>
<input id="index" name="index" type="hidden"/>
<input id="start" name="start" type="hidden"/>
<input id="pub_reg" name="pub_reg" type="hidden"/>
<input id="numPerPage" name="numPerPage" type="hidden"/>
<input id="cntry" name="cntry" type="hidden"/>
<input id="searchInTrans" name="searchInTrans" type="hidden" value=""/>
<input id="next" name="next" type="hidden" value="biblioFrame"/>
<input id="openPageId" name="openPageId" type="hidden" value="View01"/>
<input id="currentPage" name="currentPage" type="hidden" value=""/>
<input id="searchFg" name="searchFg" type="hidden" value=""/>
<input id="publ_key" name="publ_key" type="hidden" value=""/>
<input id="collectionValues" name="collectionValues" type="hidden" value=""/>
<!-- 분류통계 서비스 항목 확대 제공 과업 202205 -->
<input id="piSearchYN" name="piSearchYN" type="hidden" value=""/>
<input id="piField" name="piField" type="hidden" value=""/>
<input id="piValue" name="piValue" type="hidden" value=""/>
<input id="onlyPaj" name="onlyPaj" type="hidden" value="null"/>
</form>
</body></html>>